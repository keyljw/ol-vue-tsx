const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/VPLocalSearchBox.BY2m3Gpq.js","assets/chunks/framework.CBsH14-k.js"])))=>i.map(i=>d[i]);
import{r as B,w as ee,g as Jv,o as Qv,u as v,a as en,b as Ge,n as He,c as Rh,i as Qt,d as ey,e as F,f as w,h as R,j as I,k as qt,l as pf,m as ty,N as zo,p as T,q as pe,s as f0,t as nt,v as Xt,x as Fn,y as ny,z as st,A as L,B as Bt,C as Xn,D as Tt,E as Li,F as Jn,G as tn,H as W,I as Zl,J as z,K as Pe,L as ql,M as O,O as X,P as Qe,Q as pt,R as Lt,S as se,T as V,U as iy,V as ry,W as bt,X as Et,Y as vn,Z as Wi,_ as sy,$ as oy,a0 as g0,a1 as ay,a2 as ly,a3 as uy,a4 as li,a5 as Ph,a6 as Ui,a7 as Hu,a8 as Dt,a9 as cy,aa as Ct,ab as hy,ac as dy,ad as fy,ae as yo,af as gy,ag as py,ah as p0,ai as mf,aj as te,ak as my,al as _y,am as vy,an as Ih,ao as so,ap as kn,aq as Dn,ar as Ur,as as Fc,at as m0,au as yy,av as Jl,aw as _0,ax as Ql,ay as by,az as kc,aA as v0,aB as xy,aC as Ey,aD as wy,aE as y0,aF as Cy}from"./framework.CBsH14-k.js";const Ri=(n,e,{checkForDefaultPrevented:t=!0}={})=>r=>{const s=n==null?void 0:n(r);if(t===!1||!s)return e==null?void 0:e(r)};var _f;const rt=typeof window<"u",Ty=n=>typeof n=="string",xl=()=>{},Dc=rt&&((_f=window==null?void 0:window.navigator)==null?void 0:_f.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function jo(n){return typeof n=="function"?n():v(n)}function Sy(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return t}function Ry(n,e={}){let t,i,r=xl;const s=a=>{clearTimeout(a),r(),r=xl};return a=>{const l=jo(n),u=jo(e.maxWait);return t&&s(t),l<=0||u!==void 0&&u<=0?(i&&(s(i),i=null),Promise.resolve(a())):new Promise((c,h)=>{r=e.rejectOnCancel?h:c,u&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,c(a())},u)),t=setTimeout(()=>{i&&s(i),i=null,c(a())},l)})}}function Py(n){return n}function da(n){return Jv()?(Qv(n),!0):!1}function Iy(n,e=200,t={}){return Sy(Ry(e,t),n)}function Ly(n,e=200,t={}){const i=B(n.value),r=Iy(()=>{i.value=n.value},e,t);return ee(n,()=>r()),i}function Ay(n,e=!0){en()?Ge(n):e?n():He(n)}function My(n,e,t={}){const{immediate:i=!0}=t,r=B(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function a(){r.value=!1,o()}function l(...u){o(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...u)},jo(e))}return i&&(r.value=!0,rt&&l()),da(a),{isPending:Rh(r),start:l,stop:a}}function Ai(n){var e;const t=jo(n);return(e=t==null?void 0:t.$el)!=null?e:t}const eu=rt?window:void 0;function fi(...n){let e,t,i,r;if(Ty(n[0])||Array.isArray(n[0])?([t,i,r]=n,e=eu):[e,t,i,r]=n,!e)return xl;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(c=>c()),s.length=0},a=(c,h,d,f)=>(c.addEventListener(h,d,f),()=>c.removeEventListener(h,d,f)),l=ee(()=>[Ai(e),jo(r)],([c,h])=>{o(),c&&s.push(...t.flatMap(d=>i.map(f=>a(c,d,f,h))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return da(u),u}let vf=!1;function Oy(n,e,t={}){const{window:i=eu,ignore:r=[],capture:s=!0,detectIframe:o=!1}=t;if(!i)return;Dc&&!vf&&(vf=!0,Array.from(i.document.body.children).forEach(d=>d.addEventListener("click",xl)));let a=!0;const l=d=>r.some(f=>{if(typeof f=="string")return Array.from(i.document.querySelectorAll(f)).some(g=>g===d.target||d.composedPath().includes(g));{const g=Ai(f);return g&&(d.target===g||d.composedPath().includes(g))}}),c=[fi(i,"click",d=>{const f=Ai(n);if(!(!f||f===d.target||d.composedPath().includes(f))){if(d.detail===0&&(a=!l(d)),!a){a=!0;return}e(d)}},{passive:!0,capture:s}),fi(i,"pointerdown",d=>{const f=Ai(n);f&&(a=!d.composedPath().includes(f)&&!l(d))},{passive:!0}),o&&fi(i,"blur",d=>{var f;const g=Ai(n);((f=i.document.activeElement)==null?void 0:f.tagName)==="IFRAME"&&!(g!=null&&g.contains(i.document.activeElement))&&e(d)})].filter(Boolean);return()=>c.forEach(d=>d())}function b0(n,e=!1){const t=B(),i=()=>t.value=!!n();return i(),Ay(i,e),t}const yf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bf="__vueuse_ssr_handlers__";yf[bf]=yf[bf]||{};var xf=Object.getOwnPropertySymbols,Fy=Object.prototype.hasOwnProperty,ky=Object.prototype.propertyIsEnumerable,Dy=(n,e)=>{var t={};for(var i in n)Fy.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&xf)for(var i of xf(n))e.indexOf(i)<0&&ky.call(n,i)&&(t[i]=n[i]);return t};function jn(n,e,t={}){const i=t,{window:r=eu}=i,s=Dy(i,["window"]);let o;const a=b0(()=>r&&"ResizeObserver"in r),l=()=>{o&&(o.disconnect(),o=void 0)},u=ee(()=>Ai(n),h=>{l(),a.value&&r&&h&&(o=new ResizeObserver(e),o.observe(h,s))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return da(c),{isSupported:a,stop:c}}var Ef=Object.getOwnPropertySymbols,Ny=Object.prototype.hasOwnProperty,$y=Object.prototype.propertyIsEnumerable,By=(n,e)=>{var t={};for(var i in n)Ny.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&Ef)for(var i of Ef(n))e.indexOf(i)<0&&$y.call(n,i)&&(t[i]=n[i]);return t};function Gy(n,e,t={}){const i=t,{window:r=eu}=i,s=By(i,["window"]);let o;const a=b0(()=>r&&"MutationObserver"in r),l=()=>{o&&(o.disconnect(),o=void 0)},u=ee(()=>Ai(n),h=>{l(),a.value&&r&&h&&(o=new MutationObserver(e),o.observe(h,s))},{immediate:!0}),c=()=>{l(),u()};return da(c),{isSupported:a,stop:c}}var wf;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(wf||(wf={}));var Vy=Object.defineProperty,Cf=Object.getOwnPropertySymbols,zy=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable,Tf=(n,e,t)=>e in n?Vy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wy=(n,e)=>{for(var t in e||(e={}))zy.call(e,t)&&Tf(n,t,e[t]);if(Cf)for(var t of Cf(e))jy.call(e,t)&&Tf(n,t,e[t]);return n};const Uy={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Wy({linear:Py},Uy);const Hy=()=>rt&&/firefox/i.test(window.navigator.userAgent);var x0=typeof global=="object"&&global&&global.Object===Object&&global,Xy=typeof self=="object"&&self&&self.Object===Object&&self,Qn=x0||Xy||Function("return this")(),Ln=Qn.Symbol,E0=Object.prototype,Ky=E0.hasOwnProperty,Yy=E0.toString,bo=Ln?Ln.toStringTag:void 0;function Zy(n){var e=Ky.call(n,bo),t=n[bo];try{n[bo]=void 0;var i=!0}catch{}var r=Yy.call(n);return i&&(e?n[bo]=t:delete n[bo]),r}var qy=Object.prototype,Jy=qy.toString;function Qy(n){return Jy.call(n)}var e1="[object Null]",t1="[object Undefined]",Sf=Ln?Ln.toStringTag:void 0;function oo(n){return n==null?n===void 0?t1:e1:Sf&&Sf in Object(n)?Zy(n):Qy(n)}function _r(n){return n!=null&&typeof n=="object"}var n1="[object Symbol]";function tu(n){return typeof n=="symbol"||_r(n)&&oo(n)==n1}function i1(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var An=Array.isArray,r1=1/0,Rf=Ln?Ln.prototype:void 0,Pf=Rf?Rf.toString:void 0;function w0(n){if(typeof n=="string")return n;if(An(n))return i1(n,w0)+"";if(tu(n))return Pf?Pf.call(n):"";var e=n+"";return e=="0"&&1/n==-r1?"-0":e}var s1=/\s/;function o1(n){for(var e=n.length;e--&&s1.test(n.charAt(e)););return e}var a1=/^\s+/;function l1(n){return n&&n.slice(0,o1(n)+1).replace(a1,"")}function Zn(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var If=NaN,u1=/^[-+]0x[0-9a-f]+$/i,c1=/^0b[01]+$/i,h1=/^0o[0-7]+$/i,d1=parseInt;function Lf(n){if(typeof n=="number")return n;if(tu(n))return If;if(Zn(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Zn(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=l1(n);var t=c1.test(n);return t||h1.test(n)?d1(n.slice(2),t?2:8):u1.test(n)?If:+n}function C0(n){return n}var f1="[object AsyncFunction]",g1="[object Function]",p1="[object GeneratorFunction]",m1="[object Proxy]";function T0(n){if(!Zn(n))return!1;var e=oo(n);return e==g1||e==p1||e==f1||e==m1}var Xu=Qn["__core-js_shared__"],Af=function(){var n=/[^.]+$/.exec(Xu&&Xu.keys&&Xu.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function _1(n){return!!Af&&Af in n}var v1=Function.prototype,y1=v1.toString;function ns(n){if(n!=null){try{return y1.call(n)}catch{}try{return n+""}catch{}}return""}var b1=/[\\^$.*+?()[\]{}|]/g,x1=/^\[object .+?Constructor\]$/,E1=Function.prototype,w1=Object.prototype,C1=E1.toString,T1=w1.hasOwnProperty,S1=RegExp("^"+C1.call(T1).replace(b1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function R1(n){if(!Zn(n)||_1(n))return!1;var e=T0(n)?S1:x1;return e.test(ns(n))}function P1(n,e){return n==null?void 0:n[e]}function is(n,e){var t=P1(n,e);return R1(t)?t:void 0}var Nc=is(Qn,"WeakMap"),Mf=Object.create,I1=function(){function n(){}return function(e){if(!Zn(e))return{};if(Mf)return Mf(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function L1(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function A1(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var M1=800,O1=16,F1=Date.now;function k1(n){var e=0,t=0;return function(){var i=F1(),r=O1-(i-t);if(t=i,r>0){if(++e>=M1)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function D1(n){return function(){return n}}var El=function(){try{var n=is(Object,"defineProperty");return n({},"",{}),n}catch{}}(),N1=El?function(n,e){return El(n,"toString",{configurable:!0,enumerable:!1,value:D1(e),writable:!0})}:C0,$1=k1(N1);function B1(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function G1(n,e,t,i){n.length;for(var r=t+1;r--;)if(e(n[r],r,n))return r;return-1}var V1=9007199254740991,z1=/^(?:0|[1-9]\d*)$/;function Lh(n,e){var t=typeof n;return e=e??V1,!!e&&(t=="number"||t!="symbol"&&z1.test(n))&&n>-1&&n%1==0&&n<e}function S0(n,e,t){e=="__proto__"&&El?El(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function Ah(n,e){return n===e||n!==n&&e!==e}var j1=Object.prototype,W1=j1.hasOwnProperty;function Mh(n,e,t){var i=n[e];(!(W1.call(n,e)&&Ah(i,t))||t===void 0&&!(e in n))&&S0(n,e,t)}function nu(n,e,t,i){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=void 0;l===void 0&&(l=n[a]),r?S0(t,a,l):Mh(t,a,l)}return t}var Of=Math.max;function U1(n,e,t){return e=Of(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=Of(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(o),L1(n,this,a)}}var H1=9007199254740991;function Oh(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=H1}function R0(n){return n!=null&&Oh(n.length)&&!T0(n)}var X1=Object.prototype;function Fh(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||X1;return n===t}function K1(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var Y1="[object Arguments]";function Ff(n){return _r(n)&&oo(n)==Y1}var P0=Object.prototype,Z1=P0.hasOwnProperty,q1=P0.propertyIsEnumerable,kh=Ff(function(){return arguments}())?Ff:function(n){return _r(n)&&Z1.call(n,"callee")&&!q1.call(n,"callee")};function J1(){return!1}var I0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,kf=I0&&typeof module=="object"&&module&&!module.nodeType&&module,Q1=kf&&kf.exports===I0,Df=Q1?Qn.Buffer:void 0,e2=Df?Df.isBuffer:void 0,wl=e2||J1,t2="[object Arguments]",n2="[object Array]",i2="[object Boolean]",r2="[object Date]",s2="[object Error]",o2="[object Function]",a2="[object Map]",l2="[object Number]",u2="[object Object]",c2="[object RegExp]",h2="[object Set]",d2="[object String]",f2="[object WeakMap]",g2="[object ArrayBuffer]",p2="[object DataView]",m2="[object Float32Array]",_2="[object Float64Array]",v2="[object Int8Array]",y2="[object Int16Array]",b2="[object Int32Array]",x2="[object Uint8Array]",E2="[object Uint8ClampedArray]",w2="[object Uint16Array]",C2="[object Uint32Array]",We={};We[m2]=We[_2]=We[v2]=We[y2]=We[b2]=We[x2]=We[E2]=We[w2]=We[C2]=!0;We[t2]=We[n2]=We[g2]=We[i2]=We[p2]=We[r2]=We[s2]=We[o2]=We[a2]=We[l2]=We[u2]=We[c2]=We[h2]=We[d2]=We[f2]=!1;function T2(n){return _r(n)&&Oh(n.length)&&!!We[oo(n)]}function Dh(n){return function(e){return n(e)}}var L0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oo=L0&&typeof module=="object"&&module&&!module.nodeType&&module,S2=Oo&&Oo.exports===L0,Ku=S2&&x0.process,Vs=function(){try{var n=Oo&&Oo.require&&Oo.require("util").types;return n||Ku&&Ku.binding&&Ku.binding("util")}catch{}}(),Nf=Vs&&Vs.isTypedArray,A0=Nf?Dh(Nf):T2,R2=Object.prototype,P2=R2.hasOwnProperty;function M0(n,e){var t=An(n),i=!t&&kh(n),r=!t&&!i&&wl(n),s=!t&&!i&&!r&&A0(n),o=t||i||r||s,a=o?K1(n.length,String):[],l=a.length;for(var u in n)(e||P2.call(n,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Lh(u,l)))&&a.push(u);return a}function O0(n,e){return function(t){return n(e(t))}}var I2=O0(Object.keys,Object),L2=Object.prototype,A2=L2.hasOwnProperty;function M2(n){if(!Fh(n))return I2(n);var e=[];for(var t in Object(n))A2.call(n,t)&&t!="constructor"&&e.push(t);return e}function iu(n){return R0(n)?M0(n):M2(n)}function O2(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var F2=Object.prototype,k2=F2.hasOwnProperty;function D2(n){if(!Zn(n))return O2(n);var e=Fh(n),t=[];for(var i in n)i=="constructor"&&(e||!k2.call(n,i))||t.push(i);return t}function Nh(n){return R0(n)?M0(n,!0):D2(n)}var N2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$2=/^\w*$/;function $h(n,e){if(An(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||tu(n)?!0:$2.test(n)||!N2.test(n)||e!=null&&n in Object(e)}var Wo=is(Object,"create");function B2(){this.__data__=Wo?Wo(null):{},this.size=0}function G2(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var V2="__lodash_hash_undefined__",z2=Object.prototype,j2=z2.hasOwnProperty;function W2(n){var e=this.__data__;if(Wo){var t=e[n];return t===V2?void 0:t}return j2.call(e,n)?e[n]:void 0}var U2=Object.prototype,H2=U2.hasOwnProperty;function X2(n){var e=this.__data__;return Wo?e[n]!==void 0:H2.call(e,n)}var K2="__lodash_hash_undefined__";function Y2(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Wo&&e===void 0?K2:e,this}function Hr(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Hr.prototype.clear=B2;Hr.prototype.delete=G2;Hr.prototype.get=W2;Hr.prototype.has=X2;Hr.prototype.set=Y2;function Z2(){this.__data__=[],this.size=0}function ru(n,e){for(var t=n.length;t--;)if(Ah(n[t][0],e))return t;return-1}var q2=Array.prototype,J2=q2.splice;function Q2(n){var e=this.__data__,t=ru(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():J2.call(e,t,1),--this.size,!0}function eb(n){var e=this.__data__,t=ru(e,n);return t<0?void 0:e[t][1]}function tb(n){return ru(this.__data__,n)>-1}function nb(n,e){var t=this.__data__,i=ru(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function Hi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Hi.prototype.clear=Z2;Hi.prototype.delete=Q2;Hi.prototype.get=eb;Hi.prototype.has=tb;Hi.prototype.set=nb;var Uo=is(Qn,"Map");function ib(){this.size=0,this.__data__={hash:new Hr,map:new(Uo||Hi),string:new Hr}}function rb(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function su(n,e){var t=n.__data__;return rb(e)?t[typeof e=="string"?"string":"hash"]:t.map}function sb(n){var e=su(this,n).delete(n);return this.size-=e?1:0,e}function ob(n){return su(this,n).get(n)}function ab(n){return su(this,n).has(n)}function lb(n,e){var t=su(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function Xi(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Xi.prototype.clear=ib;Xi.prototype.delete=sb;Xi.prototype.get=ob;Xi.prototype.has=ab;Xi.prototype.set=lb;var ub="Expected a function";function Bh(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(ub);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var o=n.apply(this,i);return t.cache=s.set(r,o)||s,o};return t.cache=new(Bh.Cache||Xi),t}Bh.Cache=Xi;var cb=500;function hb(n){var e=Bh(n,function(i){return t.size===cb&&t.clear(),i}),t=e.cache;return e}var db=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fb=/\\(\\)?/g,gb=hb(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(db,function(t,i,r,s){e.push(r?s.replace(fb,"$1"):i||t)}),e});function pb(n){return n==null?"":w0(n)}function ou(n,e){return An(n)?n:$h(n,e)?[n]:gb(pb(n))}var mb=1/0;function fa(n){if(typeof n=="string"||tu(n))return n;var e=n+"";return e=="0"&&1/n==-mb?"-0":e}function Gh(n,e){e=ou(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[fa(e[t++])];return t&&t==i?n:void 0}function ui(n,e,t){var i=n==null?void 0:Gh(n,e);return i===void 0?t:i}function Vh(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var $f=Ln?Ln.isConcatSpreadable:void 0;function _b(n){return An(n)||kh(n)||!!($f&&n&&n[$f])}function vb(n,e,t,i,r){var s=-1,o=n.length;for(t||(t=_b),r||(r=[]);++s<o;){var a=n[s];t(a)?Vh(r,a):r[r.length]=a}return r}function yb(n){var e=n==null?0:n.length;return e?vb(n):[]}function bb(n){return $1(U1(n,void 0,yb),n+"")}var F0=O0(Object.getPrototypeOf,Object);function Un(){if(!arguments.length)return[];var n=arguments[0];return An(n)?n:[n]}function xb(){this.__data__=new Hi,this.size=0}function Eb(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function wb(n){return this.__data__.get(n)}function Cb(n){return this.__data__.has(n)}var Tb=200;function Sb(n,e){var t=this.__data__;if(t instanceof Hi){var i=t.__data__;if(!Uo||i.length<Tb-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Xi(i)}return t.set(n,e),this.size=t.size,this}function gi(n){var e=this.__data__=new Hi(n);this.size=e.size}gi.prototype.clear=xb;gi.prototype.delete=Eb;gi.prototype.get=wb;gi.prototype.has=Cb;gi.prototype.set=Sb;function Rb(n,e){return n&&nu(e,iu(e),n)}function Pb(n,e){return n&&nu(e,Nh(e),n)}var k0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bf=k0&&typeof module=="object"&&module&&!module.nodeType&&module,Ib=Bf&&Bf.exports===k0,Gf=Ib?Qn.Buffer:void 0,Vf=Gf?Gf.allocUnsafe:void 0;function Lb(n,e){if(e)return n.slice();var t=n.length,i=Vf?Vf(t):new n.constructor(t);return n.copy(i),i}function Ab(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var o=n[t];e(o,t,n)&&(s[r++]=o)}return s}function D0(){return[]}var Mb=Object.prototype,Ob=Mb.propertyIsEnumerable,zf=Object.getOwnPropertySymbols,zh=zf?function(n){return n==null?[]:(n=Object(n),Ab(zf(n),function(e){return Ob.call(n,e)}))}:D0;function Fb(n,e){return nu(n,zh(n),e)}var kb=Object.getOwnPropertySymbols,N0=kb?function(n){for(var e=[];n;)Vh(e,zh(n)),n=F0(n);return e}:D0;function Db(n,e){return nu(n,N0(n),e)}function $0(n,e,t){var i=e(n);return An(n)?i:Vh(i,t(n))}function $c(n){return $0(n,iu,zh)}function Nb(n){return $0(n,Nh,N0)}var Bc=is(Qn,"DataView"),Gc=is(Qn,"Promise"),Vc=is(Qn,"Set"),jf="[object Map]",$b="[object Object]",Wf="[object Promise]",Uf="[object Set]",Hf="[object WeakMap]",Xf="[object DataView]",Bb=ns(Bc),Gb=ns(Uo),Vb=ns(Gc),zb=ns(Vc),jb=ns(Nc),Wn=oo;(Bc&&Wn(new Bc(new ArrayBuffer(1)))!=Xf||Uo&&Wn(new Uo)!=jf||Gc&&Wn(Gc.resolve())!=Wf||Vc&&Wn(new Vc)!=Uf||Nc&&Wn(new Nc)!=Hf)&&(Wn=function(n){var e=oo(n),t=e==$b?n.constructor:void 0,i=t?ns(t):"";if(i)switch(i){case Bb:return Xf;case Gb:return jf;case Vb:return Wf;case zb:return Uf;case jb:return Hf}return e});var Wb=Object.prototype,Ub=Wb.hasOwnProperty;function Hb(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Ub.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var Cl=Qn.Uint8Array;function jh(n){var e=new n.constructor(n.byteLength);return new Cl(e).set(new Cl(n)),e}function Xb(n,e){var t=e?jh(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var Kb=/\w*$/;function Yb(n){var e=new n.constructor(n.source,Kb.exec(n));return e.lastIndex=n.lastIndex,e}var Kf=Ln?Ln.prototype:void 0,Yf=Kf?Kf.valueOf:void 0;function Zb(n){return Yf?Object(Yf.call(n)):{}}function qb(n,e){var t=e?jh(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Jb="[object Boolean]",Qb="[object Date]",ex="[object Map]",tx="[object Number]",nx="[object RegExp]",ix="[object Set]",rx="[object String]",sx="[object Symbol]",ox="[object ArrayBuffer]",ax="[object DataView]",lx="[object Float32Array]",ux="[object Float64Array]",cx="[object Int8Array]",hx="[object Int16Array]",dx="[object Int32Array]",fx="[object Uint8Array]",gx="[object Uint8ClampedArray]",px="[object Uint16Array]",mx="[object Uint32Array]";function _x(n,e,t){var i=n.constructor;switch(e){case ox:return jh(n);case Jb:case Qb:return new i(+n);case ax:return Xb(n,t);case lx:case ux:case cx:case hx:case dx:case fx:case gx:case px:case mx:return qb(n,t);case ex:return new i;case tx:case rx:return new i(n);case nx:return Yb(n);case ix:return new i;case sx:return Zb(n)}}function vx(n){return typeof n.constructor=="function"&&!Fh(n)?I1(F0(n)):{}}var yx="[object Map]";function bx(n){return _r(n)&&Wn(n)==yx}var Zf=Vs&&Vs.isMap,xx=Zf?Dh(Zf):bx,Ex="[object Set]";function wx(n){return _r(n)&&Wn(n)==Ex}var qf=Vs&&Vs.isSet,Cx=qf?Dh(qf):wx,Tx=1,Sx=2,Rx=4,B0="[object Arguments]",Px="[object Array]",Ix="[object Boolean]",Lx="[object Date]",Ax="[object Error]",G0="[object Function]",Mx="[object GeneratorFunction]",Ox="[object Map]",Fx="[object Number]",V0="[object Object]",kx="[object RegExp]",Dx="[object Set]",Nx="[object String]",$x="[object Symbol]",Bx="[object WeakMap]",Gx="[object ArrayBuffer]",Vx="[object DataView]",zx="[object Float32Array]",jx="[object Float64Array]",Wx="[object Int8Array]",Ux="[object Int16Array]",Hx="[object Int32Array]",Xx="[object Uint8Array]",Kx="[object Uint8ClampedArray]",Yx="[object Uint16Array]",Zx="[object Uint32Array]",ze={};ze[B0]=ze[Px]=ze[Gx]=ze[Vx]=ze[Ix]=ze[Lx]=ze[zx]=ze[jx]=ze[Wx]=ze[Ux]=ze[Hx]=ze[Ox]=ze[Fx]=ze[V0]=ze[kx]=ze[Dx]=ze[Nx]=ze[$x]=ze[Xx]=ze[Kx]=ze[Yx]=ze[Zx]=!0;ze[Ax]=ze[G0]=ze[Bx]=!1;function fl(n,e,t,i,r,s){var o,a=e&Tx,l=e&Sx,u=e&Rx;if(o!==void 0)return o;if(!Zn(n))return n;var c=An(n);if(c){if(o=Hb(n),!a)return A1(n,o)}else{var h=Wn(n),d=h==G0||h==Mx;if(wl(n))return Lb(n,a);if(h==V0||h==B0||d&&!r){if(o=l||d?{}:vx(n),!a)return l?Db(n,Pb(o,n)):Fb(n,Rb(o,n))}else{if(!ze[h])return r?n:{};o=_x(n,h,a)}}s||(s=new gi);var f=s.get(n);if(f)return f;s.set(n,o),Cx(n)?n.forEach(function(_){o.add(fl(_,e,t,_,n,s))}):xx(n)&&n.forEach(function(_,m){o.set(m,fl(_,e,t,m,n,s))});var g=u?l?Nb:$c:l?Nh:iu,p=c?void 0:g(n);return B1(p||n,function(_,m){p&&(m=_,_=n[m]),Mh(o,m,fl(_,e,t,m,n,s))}),o}var qx=4;function Jf(n){return fl(n,qx)}var Jx="__lodash_hash_undefined__";function Qx(n){return this.__data__.set(n,Jx),this}function eE(n){return this.__data__.has(n)}function Tl(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Xi;++e<t;)this.add(n[e])}Tl.prototype.add=Tl.prototype.push=Qx;Tl.prototype.has=eE;function tE(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function nE(n,e){return n.has(e)}var iE=1,rE=2;function z0(n,e,t,i,r,s){var o=t&iE,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(n),c=s.get(e);if(u&&c)return u==e&&c==n;var h=-1,d=!0,f=t&rE?new Tl:void 0;for(s.set(n,e),s.set(e,n);++h<a;){var g=n[h],p=e[h];if(i)var _=o?i(p,g,h,e,n,s):i(g,p,h,n,e,s);if(_!==void 0){if(_)continue;d=!1;break}if(f){if(!tE(e,function(m,b){if(!nE(f,b)&&(g===m||r(g,m,t,i,s)))return f.push(b)})){d=!1;break}}else if(!(g===p||r(g,p,t,i,s))){d=!1;break}}return s.delete(n),s.delete(e),d}function sE(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function oE(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var aE=1,lE=2,uE="[object Boolean]",cE="[object Date]",hE="[object Error]",dE="[object Map]",fE="[object Number]",gE="[object RegExp]",pE="[object Set]",mE="[object String]",_E="[object Symbol]",vE="[object ArrayBuffer]",yE="[object DataView]",Qf=Ln?Ln.prototype:void 0,Yu=Qf?Qf.valueOf:void 0;function bE(n,e,t,i,r,s,o){switch(t){case yE:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case vE:return!(n.byteLength!=e.byteLength||!s(new Cl(n),new Cl(e)));case uE:case cE:case fE:return Ah(+n,+e);case hE:return n.name==e.name&&n.message==e.message;case gE:case mE:return n==e+"";case dE:var a=sE;case pE:var l=i&aE;if(a||(a=oE),n.size!=e.size&&!l)return!1;var u=o.get(n);if(u)return u==e;i|=lE,o.set(n,e);var c=z0(a(n),a(e),i,r,s,o);return o.delete(n),c;case _E:if(Yu)return Yu.call(n)==Yu.call(e)}return!1}var xE=1,EE=Object.prototype,wE=EE.hasOwnProperty;function CE(n,e,t,i,r,s){var o=t&xE,a=$c(n),l=a.length,u=$c(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:wE.call(e,d)))return!1}var f=s.get(n),g=s.get(e);if(f&&g)return f==e&&g==n;var p=!0;s.set(n,e),s.set(e,n);for(var _=o;++h<l;){d=a[h];var m=n[d],b=e[d];if(i)var y=o?i(b,m,d,e,n,s):i(m,b,d,n,e,s);if(!(y===void 0?m===b||r(m,b,t,i,s):y)){p=!1;break}_||(_=d=="constructor")}if(p&&!_){var x=n.constructor,E=e.constructor;x!=E&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof E=="function"&&E instanceof E)&&(p=!1)}return s.delete(n),s.delete(e),p}var TE=1,eg="[object Arguments]",tg="[object Array]",Fa="[object Object]",SE=Object.prototype,ng=SE.hasOwnProperty;function RE(n,e,t,i,r,s){var o=An(n),a=An(e),l=o?tg:Wn(n),u=a?tg:Wn(e);l=l==eg?Fa:l,u=u==eg?Fa:u;var c=l==Fa,h=u==Fa,d=l==u;if(d&&wl(n)){if(!wl(e))return!1;o=!0,c=!1}if(d&&!c)return s||(s=new gi),o||A0(n)?z0(n,e,t,i,r,s):bE(n,e,l,t,i,r,s);if(!(t&TE)){var f=c&&ng.call(n,"__wrapped__"),g=h&&ng.call(e,"__wrapped__");if(f||g){var p=f?n.value():n,_=g?e.value():e;return s||(s=new gi),r(p,_,t,i,s)}}return d?(s||(s=new gi),CE(n,e,t,i,r,s)):!1}function au(n,e,t,i,r){return n===e?!0:n==null||e==null||!_r(n)&&!_r(e)?n!==n&&e!==e:RE(n,e,t,i,au,r)}var PE=1,IE=2;function LE(n,e,t,i){var r=t.length,s=r;if(n==null)return!s;for(n=Object(n);r--;){var o=t[r];if(o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++r<s;){o=t[r];var a=o[0],l=n[a],u=o[1];if(o[2]){if(l===void 0&&!(a in n))return!1}else{var c=new gi,h;if(!(h===void 0?au(u,l,PE|IE,i,c):h))return!1}}return!0}function j0(n){return n===n&&!Zn(n)}function AE(n){for(var e=iu(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,j0(r)]}return e}function W0(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function ME(n){var e=AE(n);return e.length==1&&e[0][2]?W0(e[0][0],e[0][1]):function(t){return t===n||LE(t,n,e)}}function OE(n,e){return n!=null&&e in Object(n)}function FE(n,e,t){e=ou(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var o=fa(e[i]);if(!(s=n!=null&&t(n,o)))break;n=n[o]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&Oh(r)&&Lh(o,r)&&(An(n)||kh(n)))}function U0(n,e){return n!=null&&FE(n,e,OE)}var kE=1,DE=2;function NE(n,e){return $h(n)&&j0(e)?W0(fa(n),e):function(t){var i=ui(t,n);return i===void 0&&i===e?U0(t,n):au(e,i,kE|DE)}}function $E(n){return function(e){return e==null?void 0:e[n]}}function BE(n){return function(e){return Gh(e,n)}}function GE(n){return $h(n)?$E(fa(n)):BE(n)}function VE(n){return typeof n=="function"?n:n==null?C0:typeof n=="object"?An(n)?NE(n[0],n[1]):ME(n):GE(n)}var Zu=function(){return Qn.Date.now()},zE="Expected a function",jE=Math.max,WE=Math.min;function UE(n,e,t){var i,r,s,o,a,l,u=0,c=!1,h=!1,d=!0;if(typeof n!="function")throw new TypeError(zE);e=Lf(e)||0,Zn(t)&&(c=!!t.leading,h="maxWait"in t,s=h?jE(Lf(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function f(C){var S=i,P=r;return i=r=void 0,u=C,o=n.apply(P,S),o}function g(C){return u=C,a=setTimeout(m,e),c?f(C):o}function p(C){var S=C-l,P=C-u,D=e-S;return h?WE(D,s-P):D}function _(C){var S=C-l,P=C-u;return l===void 0||S>=e||S<0||h&&P>=s}function m(){var C=Zu();if(_(C))return b(C);a=setTimeout(m,p(C))}function b(C){return a=void 0,d&&i?f(C):(i=r=void 0,o)}function y(){a!==void 0&&clearTimeout(a),u=0,i=l=r=a=void 0}function x(){return a===void 0?o:b(Zu())}function E(){var C=Zu(),S=_(C);if(i=arguments,r=this,l=C,S){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(m,e),f(l)}return a===void 0&&(a=setTimeout(m,e)),o}return E.cancel=y,E.flush=x,E}function HE(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=i-1;return G1(n,VE(e),r)}function Sl(n){for(var e=-1,t=n==null?0:n.length,i={};++e<t;){var r=n[e];i[r[0]]=r[1]}return i}function zc(n,e){return au(n,e)}function Oi(n){return n==null}function XE(n){return n===void 0}function H0(n,e,t,i){if(!Zn(n))return n;e=ou(e,n);for(var r=-1,s=e.length,o=s-1,a=n;a!=null&&++r<s;){var l=fa(e[r]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=o){var c=a[l];u=void 0,u===void 0&&(u=Zn(c)?c:Lh(e[r+1])?[]:{})}Mh(a,l,u),a=a[l]}return n}function KE(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var o=e[i],a=Gh(n,o);t(a,o)&&H0(s,ou(o,n),a)}return s}function YE(n,e){return KE(n,e,function(t,i){return U0(n,i)})}var ZE=bb(function(n,e){return n==null?{}:YE(n,e)});function qE(n,e,t){return n==null?n:H0(n,e,t)}const Mi=n=>n===void 0,lu=n=>typeof n=="boolean",Be=n=>typeof n=="number",Vr=n=>typeof Element>"u"?!1:n instanceof Element,JE=n=>Qt(n)?!Number.isNaN(Number(n)):!1,QE=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),ig=n=>Object.keys(n),qu=(n,e,t)=>({get value(){return ui(n,e,t)},set value(i){qE(n,e,i)}});class ew extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Wh(n,e){throw new ew(`[${n}] ${e}`)}const X0=(n="")=>n.split(" ").filter(e=>!!e.trim()),rg=(n,e)=>{!n||!e.trim()||n.classList.add(...X0(e))},Rl=(n,e)=>{!n||!e.trim()||n.classList.remove(...X0(e))},xo=(n,e)=>{var t;if(!rt||!n||!e)return"";let i=ey(e);i==="float"&&(i="cssFloat");try{const r=n.style[i];if(r)return r;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return s?s[i]:""}catch{return n.style[i]}};function Xr(n,e="px"){if(!n)return"";if(Be(n)||JE(n))return`${n}${e}`;if(Qt(n))return n}function tw(n,e){if(!rt)return;if(!e){n.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&n!==i&&n.contains(i);)t.push(i),i=i.offsetParent;const r=e.offsetTop+t.reduce((l,u)=>l+u.offsetTop,0),s=r+e.offsetHeight,o=n.scrollTop,a=o+n.clientHeight;r<o?n.scrollTop=r:s>a&&(n.scrollTop=s-n.clientHeight)}/*! Element Plus Icons Vue v2.3.1 */var nw=F({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),K0=nw,iw=F({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),rw=iw,sw=F({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),I("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),ow=sw,aw=F({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),Y0=aw,lw=F({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),I("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),Uh=lw,uw=F({name:"CloseBold",__name:"close-bold",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"})]))}}),cw=uw,hw=F({name:"Close",__name:"close",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),jc=hw,dw=F({name:"Hide",__name:"hide",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),I("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),fw=dw,gw=F({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),Z0=gw,pw=F({name:"Loading",__name:"loading",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),q0=pw,mw=F({name:"Minus",__name:"minus",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),_w=mw,vw=F({name:"Plus",__name:"plus",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),yw=vw,bw=F({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),J0=bw,xw=F({name:"View",__name:"view",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Ew=xw,ww=F({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(w(),R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[I("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Q0=ww;const em="__epPropKey",de=n=>n,Cw=n=>qt(n)&&!!n[em],uu=(n,e)=>{if(!qt(n)||Cw(n))return n;const{values:t,required:i,default:r,type:s,validator:o}=n,l={type:s,required:!!i,validator:t||o?u=>{let c=!1,h=[];if(t&&(h=Array.from(t),pf(n,"default")&&h.push(r),c||(c=h.includes(u))),o&&(c||(c=o(u))),!c&&h.length>0){const d=[...new Set(h)].map(f=>JSON.stringify(f)).join(", ");ty(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[em]:!0};return pf(n,"default")&&(l.default=r),l},De=n=>Sl(Object.entries(n).map(([e,t])=>[e,uu(t,e)])),Kr=de([String,Object,Function]),Tw={Close:jc,SuccessFilled:J0,InfoFilled:Z0,WarningFilled:Q0,CircleCloseFilled:Y0},sg={success:J0,warning:Q0,error:Y0,info:Z0},tm={validating:q0,success:ow,error:Uh},nn=(n,e)=>{if(n.install=t=>{for(const i of[n,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))n[t]=i;return n},Sw=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),cu=n=>(n.install=zo,n),zs={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},ln="update:modelValue",hu="change",gl="input",du=["","default","small","large"],Rw=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n),Fr=n=>n,Pw=["class","style"],Iw=/^on[A-Z]/,Lw=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,i=T(()=>((t==null?void 0:t.value)||[]).concat(Pw)),r=en();return r?T(()=>{var s;return Sl(Object.entries((s=r.proxy)==null?void 0:s.$attrs).filter(([o])=>!i.value.includes(o)&&!(e&&Iw.test(o))))}):T(()=>({}))},Aw=({from:n,replacement:e,scope:t,version:i,ref:r,type:s="API"},o)=>{ee(()=>v(o),a=>{},{immediate:!0})};var Mw={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const Ow=n=>(e,t)=>Fw(e,t,v(n)),Fw=(n,e,t)=>ui(t,n,n).replace(/\{(\w+)\}/g,(i,r)=>{var s;return`${(s=e==null?void 0:e[r])!=null?s:`{${r}}`}`}),kw=n=>{const e=T(()=>v(n).name),t=f0(n)?n:B(n);return{lang:e,locale:t,t:Ow(n)}},nm=Symbol("localeContextKey"),Hh=n=>{const e=n||pe(nm,B());return kw(T(()=>e.value||Mw))},pl="el",Dw="is-",Ir=(n,e,t,i,r)=>{let s=`${n}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),r&&(s+=`--${r}`),s},im=Symbol("namespaceContextKey"),Xh=n=>{const e=n||(en()?pe(im,B(pl)):B(pl));return T(()=>v(e)||pl)},$e=(n,e)=>{const t=Xh(e);return{namespace:t,b:(p="")=>Ir(t.value,n,p,"",""),e:p=>p?Ir(t.value,n,"",p,""):"",m:p=>p?Ir(t.value,n,"","",p):"",be:(p,_)=>p&&_?Ir(t.value,n,p,_,""):"",em:(p,_)=>p&&_?Ir(t.value,n,"",p,_):"",bm:(p,_)=>p&&_?Ir(t.value,n,p,"",_):"",bem:(p,_,m)=>p&&_&&m?Ir(t.value,n,p,_,m):"",is:(p,..._)=>{const m=_.length>=1?_[0]:!0;return p&&m?`${Dw}${p}`:""},cssVar:p=>{const _={};for(const m in p)p[m]&&(_[`--${t.value}-${m}`]=p[m]);return _},cssVarName:p=>`--${t.value}-${p}`,cssVarBlock:p=>{const _={};for(const m in p)p[m]&&(_[`--${t.value}-${n}-${m}`]=p[m]);return _},cssVarBlockName:p=>`--${t.value}-${n}-${p}`}},Nw=uu({type:de(Boolean),default:null}),$w=uu({type:de(Function)}),rm=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,i=[e],r={[n]:Nw,[t]:$w};return{useModelToggle:({indicator:o,toggleReason:a,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:h})=>{const d=en(),{emit:f}=d,g=d.props,p=T(()=>nt(g[t])),_=T(()=>g[n]===null),m=S=>{o.value!==!0&&(o.value=!0,a&&(a.value=S),nt(c)&&c(S))},b=S=>{o.value!==!1&&(o.value=!1,a&&(a.value=S),nt(h)&&h(S))},y=S=>{if(g.disabled===!0||nt(u)&&!u())return;const P=p.value&&rt;P&&f(e,!0),(_.value||!P)&&m(S)},x=S=>{if(g.disabled===!0||!rt)return;const P=p.value&&rt;P&&f(e,!1),(_.value||!P)&&b(S)},E=S=>{lu(S)&&(g.disabled&&S?p.value&&f(e,!1):o.value!==S&&(S?m():b()))},C=()=>{o.value?x():y()};return ee(()=>g[n],E),l&&d.appContext.config.globalProperties.$route!==void 0&&ee(()=>({...d.proxy.$route}),()=>{l.value&&o.value&&x()}),Ge(()=>{E(g[n])}),{hide:x,show:y,toggle:C,hasUpdateHandler:p}},useModelToggleProps:r,useModelToggleEmits:i}};rm("modelValue");const sm=n=>{const e=en();return T(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[n]})};var hn="top",Mn="bottom",On="right",dn="left",Kh="auto",ga=[hn,Mn,On,dn],js="start",Ho="end",Bw="clippingParents",om="viewport",Eo="popper",Gw="reference",og=ga.reduce(function(n,e){return n.concat([e+"-"+js,e+"-"+Ho])},[]),fu=[].concat(ga,[Kh]).reduce(function(n,e){return n.concat([e,e+"-"+js,e+"-"+Ho])},[]),Vw="beforeRead",zw="read",jw="afterRead",Ww="beforeMain",Uw="main",Hw="afterMain",Xw="beforeWrite",Kw="write",Yw="afterWrite",Zw=[Vw,zw,jw,Ww,Uw,Hw,Xw,Kw,Yw];function vi(n){return n?(n.nodeName||"").toLowerCase():null}function ei(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Ws(n){var e=ei(n).Element;return n instanceof e||n instanceof Element}function Rn(n){var e=ei(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Yh(n){if(typeof ShadowRoot>"u")return!1;var e=ei(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function qw(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!Rn(s)||!vi(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Jw(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Rn(r)||!vi(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var am={name:"applyStyles",enabled:!0,phase:"write",fn:qw,effect:Jw,requires:["computeStyles"]};function pi(n){return n.split("-")[0]}var zr=Math.max,Pl=Math.min,Us=Math.round;function Hs(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),i=1,r=1;if(Rn(n)&&e){var s=n.offsetHeight,o=n.offsetWidth;o>0&&(i=Us(t.width)/o||1),s>0&&(r=Us(t.height)/s||1)}return{width:t.width/i,height:t.height/r,top:t.top/r,right:t.right/i,bottom:t.bottom/r,left:t.left/i,x:t.left/i,y:t.top/r}}function Zh(n){var e=Hs(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function lm(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Yh(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $i(n){return ei(n).getComputedStyle(n)}function Qw(n){return["table","td","th"].indexOf(vi(n))>=0}function Er(n){return((Ws(n)?n.ownerDocument:n.document)||window.document).documentElement}function gu(n){return vi(n)==="html"?n:n.assignedSlot||n.parentNode||(Yh(n)?n.host:null)||Er(n)}function ag(n){return!Rn(n)||$i(n).position==="fixed"?null:n.offsetParent}function eC(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Rn(n)){var i=$i(n);if(i.position==="fixed")return null}var r=gu(n);for(Yh(r)&&(r=r.host);Rn(r)&&["html","body"].indexOf(vi(r))<0;){var s=$i(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function pa(n){for(var e=ei(n),t=ag(n);t&&Qw(t)&&$i(t).position==="static";)t=ag(t);return t&&(vi(t)==="html"||vi(t)==="body"&&$i(t).position==="static")?e:t||eC(n)||e}function qh(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Fo(n,e,t){return zr(n,Pl(e,t))}function tC(n,e,t){var i=Fo(n,e,t);return i>t?t:i}function um(){return{top:0,right:0,bottom:0,left:0}}function cm(n){return Object.assign({},um(),n)}function hm(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var nC=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,cm(typeof n!="number"?n:hm(n,ga))};function iC(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=pi(t.placement),l=qh(a),u=[dn,On].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var h=nC(r.padding,t),d=Zh(s),f=l==="y"?hn:dn,g=l==="y"?Mn:On,p=t.rects.reference[c]+t.rects.reference[l]-o[l]-t.rects.popper[c],_=o[l]-t.rects.reference[l],m=pa(s),b=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,y=p/2-_/2,x=h[f],E=b-d[c]-h[g],C=b/2-d[c]/2+y,S=Fo(x,C,E),P=l;t.modifiersData[i]=(e={},e[P]=S,e.centerOffset=S-C,e)}}function rC(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!lm(e.elements.popper,r)||(e.elements.arrow=r))}var sC={name:"arrow",enabled:!0,phase:"main",fn:iC,effect:rC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xs(n){return n.split("-")[1]}var oC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aC(n){var e=n.x,t=n.y,i=window,r=i.devicePixelRatio||1;return{x:Us(e*r)/r||0,y:Us(t*r)/r||0}}function lg(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,h=n.isFixed,d=o.x,f=d===void 0?0:d,g=o.y,p=g===void 0?0:g,_=typeof c=="function"?c({x:f,y:p}):{x:f,y:p};f=_.x,p=_.y;var m=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),y=dn,x=hn,E=window;if(u){var C=pa(t),S="clientHeight",P="clientWidth";if(C===ei(t)&&(C=Er(t),$i(C).position!=="static"&&a==="absolute"&&(S="scrollHeight",P="scrollWidth")),C=C,r===hn||(r===dn||r===On)&&s===Ho){x=Mn;var D=h&&C===E&&E.visualViewport?E.visualViewport.height:C[S];p-=D-i.height,p*=l?1:-1}if(r===dn||(r===hn||r===Mn)&&s===Ho){y=On;var N=h&&C===E&&E.visualViewport?E.visualViewport.width:C[P];f-=N-i.width,f*=l?1:-1}}var Y=Object.assign({position:a},u&&oC),K=c===!0?aC({x:f,y:p}):{x:f,y:p};if(f=K.x,p=K.y,l){var G;return Object.assign({},Y,(G={},G[x]=b?"0":"",G[y]=m?"0":"",G.transform=(E.devicePixelRatio||1)<=1?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",G))}return Object.assign({},Y,(e={},e[x]=b?p+"px":"",e[y]=m?f+"px":"",e.transform="",e))}function lC(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,u={placement:pi(e.placement),variation:Xs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,lg(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,lg(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var dm={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:lC,data:{}},ka={passive:!0};function uC(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=ei(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",t.update,ka)}),a&&l.addEventListener("resize",t.update,ka),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",t.update,ka)}),a&&l.removeEventListener("resize",t.update,ka)}}var fm={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:uC,data:{}},cC={left:"right",right:"left",bottom:"top",top:"bottom"};function ml(n){return n.replace(/left|right|bottom|top/g,function(e){return cC[e]})}var hC={start:"end",end:"start"};function ug(n){return n.replace(/start|end/g,function(e){return hC[e]})}function Jh(n){var e=ei(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function Qh(n){return Hs(Er(n)).left+Jh(n).scrollLeft}function dC(n){var e=ei(n),t=Er(n),i=e.visualViewport,r=t.clientWidth,s=t.clientHeight,o=0,a=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:r,height:s,x:o+Qh(n),y:a}}function fC(n){var e,t=Er(n),i=Jh(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=zr(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=zr(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Qh(n),l=-i.scrollTop;return $i(r||t).direction==="rtl"&&(a+=zr(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function ed(n){var e=$i(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function gm(n){return["html","body","#document"].indexOf(vi(n))>=0?n.ownerDocument.body:Rn(n)&&ed(n)?n:gm(gu(n))}function ko(n,e){var t;e===void 0&&(e=[]);var i=gm(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=ei(i),o=r?[s].concat(s.visualViewport||[],ed(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(ko(gu(o)))}function Wc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function gC(n){var e=Hs(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function cg(n,e){return e===om?Wc(dC(n)):Ws(e)?gC(e):Wc(fC(Er(n)))}function pC(n){var e=ko(gu(n)),t=["absolute","fixed"].indexOf($i(n).position)>=0,i=t&&Rn(n)?pa(n):n;return Ws(i)?e.filter(function(r){return Ws(r)&&lm(r,i)&&vi(r)!=="body"}):[]}function mC(n,e,t){var i=e==="clippingParents"?pC(n):[].concat(e),r=[].concat(i,[t]),s=r[0],o=r.reduce(function(a,l){var u=cg(n,l);return a.top=zr(u.top,a.top),a.right=Pl(u.right,a.right),a.bottom=Pl(u.bottom,a.bottom),a.left=zr(u.left,a.left),a},cg(n,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function pm(n){var e=n.reference,t=n.element,i=n.placement,r=i?pi(i):null,s=i?Xs(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(r){case hn:l={x:o,y:e.y-t.height};break;case Mn:l={x:o,y:e.y+e.height};break;case On:l={x:e.x+e.width,y:a};break;case dn:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var u=r?qh(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case js:l[u]=l[u]-(e[c]/2-t[c]/2);break;case Ho:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function Xo(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.boundary,o=s===void 0?Bw:s,a=t.rootBoundary,l=a===void 0?om:a,u=t.elementContext,c=u===void 0?Eo:u,h=t.altBoundary,d=h===void 0?!1:h,f=t.padding,g=f===void 0?0:f,p=cm(typeof g!="number"?g:hm(g,ga)),_=c===Eo?Gw:Eo,m=n.rects.popper,b=n.elements[d?_:c],y=mC(Ws(b)?b:b.contextElement||Er(n.elements.popper),o,l),x=Hs(n.elements.reference),E=pm({reference:x,element:m,strategy:"absolute",placement:r}),C=Wc(Object.assign({},m,E)),S=c===Eo?C:x,P={top:y.top-S.top+p.top,bottom:S.bottom-y.bottom+p.bottom,left:y.left-S.left+p.left,right:S.right-y.right+p.right},D=n.modifiersData.offset;if(c===Eo&&D){var N=D[r];Object.keys(P).forEach(function(Y){var K=[On,Mn].indexOf(Y)>=0?1:-1,G=[hn,Mn].indexOf(Y)>=0?"y":"x";P[Y]+=N[G]*K})}return P}function _C(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?fu:l,c=Xs(i),h=c?a?og:og.filter(function(g){return Xs(g)===c}):ga,d=h.filter(function(g){return u.indexOf(g)>=0});d.length===0&&(d=h);var f=d.reduce(function(g,p){return g[p]=Xo(n,{placement:p,boundary:r,rootBoundary:s,padding:o})[pi(p)],g},{});return Object.keys(f).sort(function(g,p){return f[g]-f[p]})}function vC(n){if(pi(n)===Kh)return[];var e=ml(n);return[ug(n),e,ug(e)]}function yC(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,u=t.padding,c=t.boundary,h=t.rootBoundary,d=t.altBoundary,f=t.flipVariations,g=f===void 0?!0:f,p=t.allowedAutoPlacements,_=e.options.placement,m=pi(_),b=m===_,y=l||(b||!g?[ml(_)]:vC(_)),x=[_].concat(y).reduce(function(ce,ve){return ce.concat(pi(ve)===Kh?_C(e,{placement:ve,boundary:c,rootBoundary:h,padding:u,flipVariations:g,allowedAutoPlacements:p}):ve)},[]),E=e.rects.reference,C=e.rects.popper,S=new Map,P=!0,D=x[0],N=0;N<x.length;N++){var Y=x[N],K=pi(Y),G=Xs(Y)===js,ie=[hn,Mn].indexOf(K)>=0,A=ie?"width":"height",M=Xo(e,{placement:Y,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),$=ie?G?On:dn:G?Mn:hn;E[A]>C[A]&&($=ml($));var Z=ml($),J=[];if(s&&J.push(M[K]<=0),a&&J.push(M[$]<=0,M[Z]<=0),J.every(function(ce){return ce})){D=Y,P=!1;break}S.set(Y,J)}if(P)for(var oe=g?3:1,Ee=function(ce){var ve=x.find(function(Ze){var fe=S.get(Ze);if(fe)return fe.slice(0,ce).every(function(Q){return Q})});if(ve)return D=ve,"break"},j=oe;j>0;j--){var _e=Ee(j);if(_e==="break")break}e.placement!==D&&(e.modifiersData[i]._skip=!0,e.placement=D,e.reset=!0)}}var bC={name:"flip",enabled:!0,phase:"main",fn:yC,requiresIfExists:["offset"],data:{_skip:!1}};function hg(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function dg(n){return[hn,On,Mn,dn].some(function(e){return n[e]>=0})}function xC(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Xo(e,{elementContext:"reference"}),a=Xo(e,{altBoundary:!0}),l=hg(o,i),u=hg(a,r,s),c=dg(l),h=dg(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}var EC={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xC};function wC(n,e,t){var i=pi(n),r=[dn,hn].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[dn,On].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function CC(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,o=fu.reduce(function(c,h){return c[h]=wC(h,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}var TC={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:CC};function SC(n){var e=n.state,t=n.name;e.modifiersData[t]=pm({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var mm={name:"popperOffsets",enabled:!0,phase:"read",fn:SC,data:{}};function RC(n){return n==="x"?"y":"x"}function PC(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,h=t.padding,d=t.tether,f=d===void 0?!0:d,g=t.tetherOffset,p=g===void 0?0:g,_=Xo(e,{boundary:l,rootBoundary:u,padding:h,altBoundary:c}),m=pi(e.placement),b=Xs(e.placement),y=!b,x=qh(m),E=RC(x),C=e.modifiersData.popperOffsets,S=e.rects.reference,P=e.rects.popper,D=typeof p=="function"?p(Object.assign({},e.rects,{placement:e.placement})):p,N=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),Y=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,K={x:0,y:0};if(C){if(s){var G,ie=x==="y"?hn:dn,A=x==="y"?Mn:On,M=x==="y"?"height":"width",$=C[x],Z=$+_[ie],J=$-_[A],oe=f?-P[M]/2:0,Ee=b===js?S[M]:P[M],j=b===js?-P[M]:-S[M],_e=e.elements.arrow,ce=f&&_e?Zh(_e):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:um(),Ze=ve[ie],fe=ve[A],Q=Fo(0,S[M],ce[M]),me=y?S[M]/2-oe-Q-Ze-N.mainAxis:Ee-Q-Ze-N.mainAxis,Ie=y?-S[M]/2+oe+Q+fe+N.mainAxis:j+Q+fe+N.mainAxis,Le=e.elements.arrow&&pa(e.elements.arrow),Xe=Le?x==="y"?Le.clientTop||0:Le.clientLeft||0:0,ht=(G=Y==null?void 0:Y[x])!=null?G:0,jt=$+me-ht-Xe,wn=$+Ie-ht,At=Fo(f?Pl(Z,jt):Z,$,f?zr(J,wn):J);C[x]=At,K[x]=At-$}if(a){var rn,Cn=x==="x"?hn:dn,gn=x==="x"?Mn:On,dt=C[E],Tn=E==="y"?"height":"width",qe=dt+_[Cn],at=dt-_[gn],lt=[hn,dn].indexOf(m)!==-1,H=(rn=Y==null?void 0:Y[E])!=null?rn:0,we=lt?qe:dt-S[Tn]-P[Tn]-H+N.altAxis,ut=lt?dt+S[Tn]+P[Tn]-H-N.altAxis:at,St=f&&lt?tC(we,dt,ut):Fo(f?we:qe,dt,f?ut:at);C[E]=St,K[E]=St-dt}e.modifiersData[i]=K}}var IC={name:"preventOverflow",enabled:!0,phase:"main",fn:PC,requiresIfExists:["offset"]};function LC(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function AC(n){return n===ei(n)||!Rn(n)?Jh(n):LC(n)}function MC(n){var e=n.getBoundingClientRect(),t=Us(e.width)/n.offsetWidth||1,i=Us(e.height)/n.offsetHeight||1;return t!==1||i!==1}function OC(n,e,t){t===void 0&&(t=!1);var i=Rn(e),r=Rn(e)&&MC(e),s=Er(e),o=Hs(n,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((vi(e)!=="body"||ed(s))&&(a=AC(e)),Rn(e)?(l=Hs(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Qh(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function FC(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function kC(n){var e=FC(n);return Zw.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function DC(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function NC(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var fg={placement:"bottom",modifiers:[],strategy:"absolute"};function gg(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function td(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?fg:r;return function(o,a,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},fg,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},c=[],h=!1,d={state:u,setOptions:function(p){var _=typeof p=="function"?p(u.options):p;g(),u.options=Object.assign({},s,u.options,_),u.scrollParents={reference:Ws(o)?ko(o):o.contextElement?ko(o.contextElement):[],popper:ko(a)};var m=kC(NC([].concat(i,u.options.modifiers)));return u.orderedModifiers=m.filter(function(b){return b.enabled}),f(),d.update()},forceUpdate:function(){if(!h){var p=u.elements,_=p.reference,m=p.popper;if(gg(_,m)){u.rects={reference:OC(_,pa(m),u.options.strategy==="fixed"),popper:Zh(m)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var y=u.orderedModifiers[b],x=y.fn,E=y.options,C=E===void 0?{}:E,S=y.name;typeof x=="function"&&(u=x({state:u,options:C,name:S,instance:d})||u)}}}},update:DC(function(){return new Promise(function(p){d.forceUpdate(),p(u)})}),destroy:function(){g(),h=!0}};if(!gg(o,a))return d;d.setOptions(l).then(function(p){!h&&l.onFirstUpdate&&l.onFirstUpdate(p)});function f(){u.orderedModifiers.forEach(function(p){var _=p.name,m=p.options,b=m===void 0?{}:m,y=p.effect;if(typeof y=="function"){var x=y({state:u,name:_,instance:d,options:b}),E=function(){};c.push(x||E)}})}function g(){c.forEach(function(p){return p()}),c=[]}return d}}td();var $C=[fm,mm,dm,am];td({defaultModifiers:$C});var BC=[fm,mm,dm,am,TC,bC,IC,sC,EC],GC=td({defaultModifiers:BC});const VC=(n,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=zC(l);Object.assign(o.value,u)},requires:["computeStyles"]},r=T(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:h}=v(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...h||[],i,{name:"applyStyles",enabled:!1}]}}),s=Xt(),o=B({styles:{popper:{position:v(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return ee(r,l=>{const u=v(s);u&&u.setOptions(l)},{deep:!0}),ee([n,e],([l,u])=>{a(),!(!l||!u)&&(s.value=GC(l,u,v(r)))}),Fn(()=>{a()}),{state:T(()=>{var l;return{...((l=v(s))==null?void 0:l.state)||{}}}),styles:T(()=>v(o).styles),attributes:T(()=>v(o).attributes),update:()=>{var l;return(l=v(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=v(s))==null?void 0:l.forceUpdate()},instanceRef:T(()=>v(s))}};function zC(n){const e=Object.keys(n.elements),t=Sl(e.map(r=>[r,n.styles[r]||{}])),i=Sl(e.map(r=>[r,n.attributes[r]]));return{styles:t,attributes:i}}function pg(){let n;const e=(i,r)=>{t(),n=window.setTimeout(i,r)},t=()=>window.clearTimeout(n);return da(()=>t()),{registerTimeout:e,cancelTimeout:t}}const mg={prefix:Math.floor(Math.random()*1e4),current:0},jC=Symbol("elIdInjection"),_m=()=>en()?pe(jC,mg):mg,ma=n=>{const e=_m(),t=Xh();return T(()=>v(n)||`${t.value}-id-${e.prefix}-${e.current++}`)};let Rs=[];const _g=n=>{const e=n;e.key===zs.esc&&Rs.forEach(t=>t(e))},WC=n=>{Ge(()=>{Rs.length===0&&document.addEventListener("keydown",_g),rt&&Rs.push(n)}),Fn(()=>{Rs=Rs.filter(e=>e!==n),Rs.length===0&&rt&&document.removeEventListener("keydown",_g)})};let vg;const vm=()=>{const n=Xh(),e=_m(),t=T(()=>`${n.value}-popper-container-${e.prefix}`),i=T(()=>`#${t.value}`);return{id:t,selector:i}},UC=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},HC=()=>{const{id:n,selector:e}=vm();return ny(()=>{rt&&!vg&&!document.body.querySelector(e.value)&&(vg=UC(n.value))}),{id:n,selector:e}},XC=De({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),KC=({showAfter:n,hideAfter:e,autoClose:t,open:i,close:r})=>{const{registerTimeout:s}=pg(),{registerTimeout:o,cancelTimeout:a}=pg();return{onOpen:c=>{s(()=>{i(c);const h=v(t);Be(h)&&h>0&&o(()=>{r(c)},h)},v(n))},onClose:c=>{a(),s(()=>{r(c)},v(e))}}},ym=Symbol("elForwardRef"),YC=n=>{st(ym,{setForwardRef:t=>{n.value=t}})},ZC=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),yg={current:0},bg=B(0),bm=2e3,xg=Symbol("elZIndexContextKey"),xm=Symbol("zIndexContextKey"),Em=n=>{const e=en()?pe(xg,yg):yg,t=n||(en()?pe(xm,void 0):void 0),i=T(()=>{const o=v(t);return Be(o)?o:bm}),r=T(()=>i.value+bg.value),s=()=>(e.current++,bg.value=e.current,r.value);return!rt&&pe(xg),{initialZIndex:i,currentZIndex:r,nextZIndex:s}};function qC(n){let e;function t(){if(n.value==null)return;const{selectionStart:r,selectionEnd:s,value:o}=n.value;if(r==null||s==null)return;const a=o.slice(0,Math.max(0,r)),l=o.slice(Math.max(0,s));e={selectionStart:r,selectionEnd:s,value:o,beforeTxt:a,afterTxt:l}}function i(){if(n.value==null||e==null)return;const{value:r}=n.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e;if(s==null||o==null||a==null)return;let l=r.length;if(r.endsWith(o))l=r.length-o.length;else if(r.startsWith(s))l=s.length;else{const u=s[a-1],c=r.indexOf(u,a-1);c!==-1&&(l=c+1)}n.value.setSelectionRange(l,l)}return[t,i]}const pu=uu({type:String,values:du,required:!1}),wm=Symbol("size"),JC=()=>{const n=pe(wm,{});return T(()=>v(n.size)||"")};function Cm(n,{beforeFocus:e,afterFocus:t,beforeBlur:i,afterBlur:r}={}){const s=en(),{emit:o}=s,a=Xt(),l=B(!1),u=d=>{nt(e)&&e(d)||l.value||(l.value=!0,o("focus",d),t==null||t())},c=d=>{var f;nt(i)&&i(d)||d.relatedTarget&&((f=a.value)!=null&&f.contains(d.relatedTarget))||(l.value=!1,o("blur",d),r==null||r())},h=()=>{var d,f;(d=a.value)!=null&&d.contains(document.activeElement)&&a.value!==document.activeElement||(f=n.value)==null||f.focus()};return ee(a,d=>{d&&d.setAttribute("tabindex","-1")}),fi(a,"focus",u,!0),fi(a,"blur",c,!0),fi(a,"click",h,!0),{isFocused:l,wrapperRef:a,handleFocus:u,handleBlur:c}}function Tm({afterComposition:n,emit:e}){const t=B(!1),i=a=>{e==null||e("compositionstart",a),t.value=!0},r=a=>{var l;e==null||e("compositionupdate",a);const u=(l=a.target)==null?void 0:l.value,c=u[u.length-1]||"";t.value=!Rw(c)},s=a=>{e==null||e("compositionend",a),t.value&&(t.value=!1,He(()=>n(a)))};return{isComposing:t,handleComposition:a=>{a.type==="compositionend"?s(a):r(a)},handleCompositionStart:i,handleCompositionUpdate:r,handleCompositionEnd:s}}const Sm=Symbol("emptyValuesContextKey"),QC=["",void 0,null],eT=void 0,tT=De({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>nt(n)?!n():!n}}),nT=(n,e)=>{const t=en()?pe(Sm,B({})):B({}),i=T(()=>n.emptyValues||t.value.emptyValues||QC),r=T(()=>nt(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:nt(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:eT),s=o=>i.value.includes(o);return i.value.includes(r.value),{emptyValues:i,valueOnClear:r,isEmptyValue:s}},iT=De({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),ao=n=>ZE(iT,n),Rm=Symbol(),Il=B();function nd(n,e=void 0){const t=en()?pe(Rm,Il):Il;return n?T(()=>{var i,r;return(r=(i=t.value)==null?void 0:i[n])!=null?r:e}):t}function Pm(n,e){const t=nd(),i=$e(n,T(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||pl})),r=Hh(T(()=>{var a;return(a=t.value)==null?void 0:a.locale})),s=Em(T(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||bm})),o=T(()=>{var a;return v(e)||((a=t.value)==null?void 0:a.size)||""});return rT(T(()=>v(t)||{})),{ns:i,locale:r,zIndex:s,size:o}}const rT=(n,e,t=!1)=>{var i;const r=!!en(),s=r?nd():void 0,o=(i=void 0)!=null?i:r?st:void 0;if(!o)return;const a=T(()=>{const l=v(n);return s!=null&&s.value?sT(s.value,l):l});return o(Rm,a),o(nm,T(()=>a.value.locale)),o(im,T(()=>a.value.namespace)),o(xm,T(()=>a.value.zIndex)),o(wm,{size:T(()=>a.value.size||"")}),o(Sm,T(()=>({emptyValues:a.value.emptyValues,valueOnClear:a.value.valueOnClear}))),(t||!Il.value)&&(Il.value=a.value),a},sT=(n,e)=>{const t=[...new Set([...ig(n),...ig(e)])],i={};for(const r of t)i[r]=e[r]!==void 0?e[r]:n[r];return i},Eg={};var Ne=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};const oT=De({size:{type:de([Number,String])},color:{type:String}}),aT=F({name:"ElIcon",inheritAttrs:!1}),lT=F({...aT,props:oT,setup(n){const e=n,t=$e("icon"),i=T(()=>{const{size:r,color:s}=e;return!r&&!s?{}:{fontSize:Mi(r)?void 0:Xr(r),"--color":s}});return(r,s)=>(w(),R("i",Bt({class:v(t).b(),style:v(i)},r.$attrs),[L(r.$slots,"default")],16))}});var uT=Ne(lT,[["__file","icon.vue"]]);const Kt=nn(uT),lo=Symbol("formContextKey"),Yr=Symbol("formItemContextKey"),rs=(n,e={})=>{const t=B(void 0),i=e.prop?t:sm("size"),r=e.global?t:JC(),s=e.form?{size:void 0}:pe(lo,void 0),o=e.formItem?{size:void 0}:pe(Yr,void 0);return T(()=>i.value||v(n)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||r.value||"")},mu=n=>{const e=sm("disabled"),t=pe(lo,void 0);return T(()=>e.value||v(n)||(t==null?void 0:t.disabled)||!1)},_u=()=>{const n=pe(lo,void 0),e=pe(Yr,void 0);return{form:n,formItem:e}},Im=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=B(!1)),i||(i=B(!1));const r=B();let s;const o=T(()=>{var a;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Ge(()=>{s=ee([Xn(n,"id"),t],([a,l])=>{const u=a??(l?void 0:ma().value);u!==r.value&&(e!=null&&e.removeInputId&&(r.value&&e.removeInputId(r.value),!(i!=null&&i.value)&&!l&&u&&e.addInputId(u)),r.value=u)},{immediate:!0})}),Tt(()=>{s&&s(),e!=null&&e.removeInputId&&r.value&&e.removeInputId(r.value)}),{isLabeledByFormItem:o,inputId:r}},cT=De({size:{type:String,values:du},disabled:Boolean}),hT=De({...cT,model:Object,rules:{type:de(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),dT={validate:(n,e,t)=>(Li(n)||Qt(n))&&lu(e)&&Qt(t)};function fT(){const n=B([]),e=T(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const o=n.value.indexOf(s);return o===-1&&e.value,o}function i(s,o){if(s&&o){const a=t(o);n.value.splice(a,1,s)}else s&&n.value.push(s)}function r(s){const o=t(s);o>-1&&n.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const Da=(n,e)=>{const t=Un(e);return t.length>0?n.filter(i=>i.prop&&t.includes(i.prop)):n},gT="ElForm",pT=F({name:gT}),mT=F({...pT,props:hT,emits:dT,setup(n,{expose:e,emit:t}){const i=n,r=[],s=rs(),o=$e("form"),a=T(()=>{const{labelPosition:y,inline:x}=i;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${y}`)]:y,[o.m("inline")]:x}]}),l=y=>r.find(x=>x.prop===y),u=y=>{r.push(y)},c=y=>{y.prop&&r.splice(r.indexOf(y),1)},h=(y=[])=>{i.model&&Da(r,y).forEach(x=>x.resetField())},d=(y=[])=>{Da(r,y).forEach(x=>x.clearValidate())},f=T(()=>!!i.model),g=y=>{if(r.length===0)return[];const x=Da(r,y);return x.length?x:[]},p=async y=>m(void 0,y),_=async(y=[])=>{if(!f.value)return!1;const x=g(y);if(x.length===0)return!0;let E={};for(const C of x)try{await C.validate("")}catch(S){E={...E,...S}}return Object.keys(E).length===0?!0:Promise.reject(E)},m=async(y=[],x)=>{const E=!nt(x);try{const C=await _(y);return C===!0&&await(x==null?void 0:x(C)),C}catch(C){if(C instanceof Error)throw C;const S=C;return i.scrollToError&&b(Object.keys(S)[0]),await(x==null?void 0:x(!1,S)),E&&Promise.reject(S)}},b=y=>{var x;const E=Da(r,y)[0];E&&((x=E.$el)==null||x.scrollIntoView(i.scrollIntoViewOptions))};return ee(()=>i.rules,()=>{i.validateOnRuleChange&&p().catch(y=>void 0)},{deep:!0}),st(lo,Jn({...tn(i),emit:t,resetFields:h,clearValidate:d,validateField:m,getField:l,addField:u,removeField:c,...fT()})),e({validate:p,validateField:m,resetFields:h,clearValidate:d,scrollToField:b,fields:r}),(y,x)=>(w(),R("form",{class:W(v(a))},[L(y.$slots,"default")],2))}});var _T=Ne(mT,[["__file","form.vue"]]);function Dr(){return Dr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dr.apply(this,arguments)}function vT(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Ko(n,e)}function Uc(n){return Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uc(n)}function Ko(n,e){return Ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Ko(n,e)}function yT(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _l(n,e,t){return yT()?_l=Reflect.construct.bind():_l=function(r,s,o){var a=[null];a.push.apply(a,s);var l=Function.bind.apply(r,a),u=new l;return o&&Ko(u,o.prototype),u},_l.apply(null,arguments)}function bT(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Hc(n){var e=typeof Map=="function"?new Map:void 0;return Hc=function(i){if(i===null||!bT(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return _l(i,arguments,Uc(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ko(r,i)},Hc(n)}var xT=/%[sdj%]/g,ET=function(){};function Xc(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function yn(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var o=n.replace(xT,function(a){if(a==="%%")return"%";if(r>=s)return a;switch(a){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return a}});return o}return n}function wT(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function vt(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||wT(e)&&typeof n=="string"&&!n)}function CT(n,e,t){var i=[],r=0,s=n.length;function o(a){i.push.apply(i,a||[]),r++,r===s&&t(i)}n.forEach(function(a){e(a,o)})}function wg(n,e,t){var i=0,r=n.length;function s(o){if(o&&o.length){t(o);return}var a=i;i=i+1,a<r?e(n[a],s):t([])}s([])}function TT(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var Cg=function(n){vT(e,n);function e(t,i){var r;return r=n.call(this,"Async Validation Error")||this,r.errors=t,r.fields=i,r}return e}(Hc(Error));function ST(n,e,t,i,r){if(e.first){var s=new Promise(function(d,f){var g=function(m){return i(m),m.length?f(new Cg(m,Xc(m))):d(r)},p=TT(n);wg(p,t,g)});return s.catch(function(d){return d}),s}var o=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),l=a.length,u=0,c=[],h=new Promise(function(d,f){var g=function(_){if(c.push.apply(c,_),u++,u===l)return i(c),c.length?f(new Cg(c,Xc(c))):d(r)};a.length||(i(c),d(r)),a.forEach(function(p){var _=n[p];o.indexOf(p)!==-1?wg(_,t,g):CT(_,t,g)})});return h.catch(function(d){return d}),h}function RT(n){return!!(n&&n.message!==void 0)}function PT(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function Tg(n,e){return function(t){var i;return n.fullFields?i=PT(e,n.fullFields):i=e[t.field||n.fullField],RT(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function Sg(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=Dr({},n[t],i):n[t]=i}}return n}var Lm=function(e,t,i,r,s,o){e.required&&(!i.hasOwnProperty(e.field)||vt(t,o||e.type))&&r.push(yn(s.messages.required,e.fullField))},IT=function(e,t,i,r,s){(/^\s+$/.test(t)||t==="")&&r.push(yn(s.messages.whitespace,e.fullField))},Na,LT=function(){if(Na)return Na;var n="[a-fA-F\\d:]",e=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+r+"$"),l=function(x){return x&&x.exact?s:new RegExp("(?:"+e(x)+t+e(x)+")|(?:"+e(x)+r+e(x)+")","g")};l.v4=function(y){return y&&y.exact?o:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?a:new RegExp(""+e(y)+r+e(y),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",h=l.v4().source,d=l.v6().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",g="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",p="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",_="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',b="(?:"+u+"|www\\.)"+c+"(?:localhost|"+h+"|"+d+"|"+f+g+p+")"+_+m;return Na=new RegExp("(?:^"+b+"$)","i"),Na},Rg={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Io={integer:function(e){return Io.number(e)&&parseInt(e,10)===e},float:function(e){return Io.number(e)&&!Io.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!Io.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Rg.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(LT())},hex:function(e){return typeof e=="string"&&!!e.match(Rg.hex)}},AT=function(e,t,i,r,s){if(e.required&&t===void 0){Lm(e,t,i,r,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?Io[a](t)||r.push(yn(s.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(yn(s.messages.types[a],e.fullField,e.type))},MT=function(e,t,i,r,s){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,h=null,d=typeof t=="number",f=typeof t=="string",g=Array.isArray(t);if(d?h="number":f?h="string":g&&(h="array"),!h)return!1;g&&(c=t.length),f&&(c=t.replace(u,"_").length),o?c!==e.len&&r.push(yn(s.messages[h].len,e.fullField,e.len)):a&&!l&&c<e.min?r.push(yn(s.messages[h].min,e.fullField,e.min)):l&&!a&&c>e.max?r.push(yn(s.messages[h].max,e.fullField,e.max)):a&&l&&(c<e.min||c>e.max)&&r.push(yn(s.messages[h].range,e.fullField,e.min,e.max))},ms="enum",OT=function(e,t,i,r,s){e[ms]=Array.isArray(e[ms])?e[ms]:[],e[ms].indexOf(t)===-1&&r.push(yn(s.messages[ms],e.fullField,e[ms].join(", ")))},FT=function(e,t,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(yn(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(t)||r.push(yn(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Se={required:Lm,whitespace:IT,type:AT,range:MT,enum:OT,pattern:FT},kT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t,"string")&&!e.required)return i();Se.required(e,t,r,o,s,"string"),vt(t,"string")||(Se.type(e,t,r,o,s),Se.range(e,t,r,o,s),Se.pattern(e,t,r,o,s),e.whitespace===!0&&Se.whitespace(e,t,r,o,s))}i(o)},DT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&Se.type(e,t,r,o,s)}i(o)},NT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&(Se.type(e,t,r,o,s),Se.range(e,t,r,o,s))}i(o)},$T=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&Se.type(e,t,r,o,s)}i(o)},BT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),vt(t)||Se.type(e,t,r,o,s)}i(o)},GT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&(Se.type(e,t,r,o,s),Se.range(e,t,r,o,s))}i(o)},VT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&(Se.type(e,t,r,o,s),Se.range(e,t,r,o,s))}i(o)},zT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return i();Se.required(e,t,r,o,s,"array"),t!=null&&(Se.type(e,t,r,o,s),Se.range(e,t,r,o,s))}i(o)},jT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&Se.type(e,t,r,o,s)}i(o)},WT="enum",UT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s),t!==void 0&&Se[WT](e,t,r,o,s)}i(o)},HT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t,"string")&&!e.required)return i();Se.required(e,t,r,o,s),vt(t,"string")||Se.pattern(e,t,r,o,s)}i(o)},XT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t,"date")&&!e.required)return i();if(Se.required(e,t,r,o,s),!vt(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),Se.type(e,l,r,o,s),l&&Se.range(e,l.getTime(),r,o,s)}}i(o)},KT=function(e,t,i,r,s){var o=[],a=Array.isArray(t)?"array":typeof t;Se.required(e,t,r,o,s,a),i(o)},Ju=function(e,t,i,r,s){var o=e.type,a=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(vt(t,o)&&!e.required)return i();Se.required(e,t,r,a,s,o),vt(t,o)||Se.type(e,t,r,a,s)}i(a)},YT=function(e,t,i,r,s){var o=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(vt(t)&&!e.required)return i();Se.required(e,t,r,o,s)}i(o)},Do={string:kT,method:DT,number:NT,boolean:$T,regexp:BT,integer:GT,float:VT,array:zT,object:jT,enum:UT,pattern:HT,date:XT,url:Ju,hex:Ju,email:Ju,required:KT,any:YT};function Kc(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Yc=Kc(),_a=function(){function n(t){this.rules=null,this._messages=Yc,this.define(t)}var e=n.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var o=i[s];r.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(i){return i&&(this._messages=Sg(Kc(),i)),this._messages},e.validate=function(i,r,s){var o=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var a=i,l=r,u=s;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,a),Promise.resolve(a);function c(p){var _=[],m={};function b(x){if(Array.isArray(x)){var E;_=(E=_).concat.apply(E,x)}else _.push(x)}for(var y=0;y<p.length;y++)b(p[y]);_.length?(m=Xc(_),u(_,m)):u(null,a)}if(l.messages){var h=this.messages();h===Yc&&(h=Kc()),Sg(h,l.messages),l.messages=h}else l.messages=this.messages();var d={},f=l.keys||Object.keys(this.rules);f.forEach(function(p){var _=o.rules[p],m=a[p];_.forEach(function(b){var y=b;typeof y.transform=="function"&&(a===i&&(a=Dr({},a)),m=a[p]=y.transform(m)),typeof y=="function"?y={validator:y}:y=Dr({},y),y.validator=o.getValidationMethod(y),y.validator&&(y.field=p,y.fullField=y.fullField||p,y.type=o.getType(y),d[p]=d[p]||[],d[p].push({rule:y,value:m,source:a,field:p}))})});var g={};return ST(d,l,function(p,_){var m=p.rule,b=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");b=b&&(m.required||!m.required&&p.value),m.field=p.field;function y(C,S){return Dr({},S,{fullField:m.fullField+"."+C,fullFields:m.fullFields?[].concat(m.fullFields,[C]):[C]})}function x(C){C===void 0&&(C=[]);var S=Array.isArray(C)?C:[C];!l.suppressWarning&&S.length&&n.warning("async-validator:",S),S.length&&m.message!==void 0&&(S=[].concat(m.message));var P=S.map(Tg(m,a));if(l.first&&P.length)return g[m.field]=1,_(P);if(!b)_(P);else{if(m.required&&!p.value)return m.message!==void 0?P=[].concat(m.message).map(Tg(m,a)):l.error&&(P=[l.error(m,yn(l.messages.required,m.field))]),_(P);var D={};m.defaultField&&Object.keys(p.value).map(function(K){D[K]=m.defaultField}),D=Dr({},D,p.rule.fields);var N={};Object.keys(D).forEach(function(K){var G=D[K],ie=Array.isArray(G)?G:[G];N[K]=ie.map(y.bind(null,K))});var Y=new n(N);Y.messages(l.messages),p.rule.options&&(p.rule.options.messages=l.messages,p.rule.options.error=l.error),Y.validate(p.value,p.rule.options||l,function(K){var G=[];P&&P.length&&G.push.apply(G,P),K&&K.length&&G.push.apply(G,K),_(G.length?G:null)})}}var E;if(m.asyncValidator)E=m.asyncValidator(m,p.value,x,p.source,l);else if(m.validator){try{E=m.validator(m,p.value,x,p.source,l)}catch(C){console.error==null||console.error(C),l.suppressValidatorError||setTimeout(function(){throw C},0),x(C.message)}E===!0?x():E===!1?x(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):E instanceof Array?x(E):E instanceof Error&&x(E.message)}E&&E.then&&E.then(function(){return x()},function(C){return x(C)})},function(p){c(p)},a)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Do.hasOwnProperty(i.type))throw new Error(yn("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?Do.required:Do[this.getType(i)]||void 0},n}();_a.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Do[e]=t};_a.warning=ET;_a.messages=Yc;_a.validators=Do;const ZT=["","error","validating","success"],qT=De({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:de([String,Array])},required:{type:Boolean,default:void 0},rules:{type:de([Object,Array])},error:String,validateStatus:{type:String,values:ZT},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:du}}),Pg="ElLabelWrap";var JT=F({name:Pg,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=pe(lo,void 0),i=pe(Yr);i||Wh(Pg,"usage: <el-form-item><label-wrap /></el-form-item>");const r=$e("form"),s=B(),o=B(0),a=()=>{var c;if((c=s.value)!=null&&c.firstElementChild){const h=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(h))}else return 0},l=(c="update")=>{He(()=>{e.default&&n.isAutoWidth&&(c==="update"?o.value=a():c==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},u=()=>l("update");return Ge(()=>{u()}),Fn(()=>{l("remove")}),Zl(()=>u()),ee(o,(c,h)=>{n.updateAll&&(t==null||t.registerLabelWidth(c,h))}),jn(T(()=>{var c,h;return(h=(c=s.value)==null?void 0:c.firstElementChild)!=null?h:null}),u),()=>{var c,h;if(!e)return null;const{isAutoWidth:d}=n;if(d){const f=t==null?void 0:t.autoLabelWidth,g=i==null?void 0:i.hasLabel,p={};if(g&&f&&f!=="auto"){const _=Math.max(0,Number.parseInt(f,10)-o.value),b=(i.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";_&&(p[b]=`${_}px`)}return z("div",{ref:s,class:[r.be("item","label-wrap")],style:p},[(c=e.default)==null?void 0:c.call(e)])}else return z(Pe,{ref:s},[(h=e.default)==null?void 0:h.call(e)])}}});const QT=F({name:"ElFormItem"}),eS=F({...QT,props:qT,setup(n,{expose:e}){const t=n,i=ql(),r=pe(lo,void 0),s=pe(Yr,void 0),o=rs(void 0,{formItem:!1}),a=$e("form-item"),l=ma().value,u=B([]),c=B(""),h=Ly(c,100),d=B(""),f=B();let g,p=!1;const _=T(()=>t.labelPosition||(r==null?void 0:r.labelPosition)),m=T(()=>{if(_.value==="top")return{};const Q=Xr(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return Q?{width:Q}:{}}),b=T(()=>{if(_.value==="top"||r!=null&&r.inline)return{};if(!t.label&&!t.labelWidth&&N)return{};const Q=Xr(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return!t.label&&!i.label?{marginLeft:Q}:{}}),y=T(()=>[a.b(),a.m(o.value),a.is("error",c.value==="error"),a.is("validating",c.value==="validating"),a.is("success",c.value==="success"),a.is("required",A.value||t.required),a.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:r==null?void 0:r.statusIcon,[a.m(`label-${_.value}`)]:_.value}]),x=T(()=>lu(t.inlineMessage)?t.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),E=T(()=>[a.e("error"),{[a.em("error","inline")]:x.value}]),C=T(()=>t.prop?Qt(t.prop)?t.prop:t.prop.join("."):""),S=T(()=>!!(t.label||i.label)),P=T(()=>t.for||(u.value.length===1?u.value[0]:void 0)),D=T(()=>!P.value&&S.value),N=!!s,Y=T(()=>{const Q=r==null?void 0:r.model;if(!(!Q||!t.prop))return qu(Q,t.prop).value}),K=T(()=>{const{required:Q}=t,me=[];t.rules&&me.push(...Un(t.rules));const Ie=r==null?void 0:r.rules;if(Ie&&t.prop){const Le=qu(Ie,t.prop).value;Le&&me.push(...Un(Le))}if(Q!==void 0){const Le=me.map((Xe,ht)=>[Xe,ht]).filter(([Xe])=>Object.keys(Xe).includes("required"));if(Le.length>0)for(const[Xe,ht]of Le)Xe.required!==Q&&(me[ht]={...Xe,required:Q});else me.push({required:Q})}return me}),G=T(()=>K.value.length>0),ie=Q=>K.value.filter(Ie=>!Ie.trigger||!Q?!0:Array.isArray(Ie.trigger)?Ie.trigger.includes(Q):Ie.trigger===Q).map(({trigger:Ie,...Le})=>Le),A=T(()=>K.value.some(Q=>Q.required)),M=T(()=>{var Q;return h.value==="error"&&t.showMessage&&((Q=r==null?void 0:r.showMessage)!=null?Q:!0)}),$=T(()=>`${t.label||""}${(r==null?void 0:r.labelSuffix)||""}`),Z=Q=>{c.value=Q},J=Q=>{var me,Ie;const{errors:Le,fields:Xe}=Q;(!Le||!Xe)&&console.error(Q),Z("error"),d.value=Le?(Ie=(me=Le==null?void 0:Le[0])==null?void 0:me.message)!=null?Ie:`${t.prop} is required`:"",r==null||r.emit("validate",t.prop,!1,d.value)},oe=()=>{Z("success"),r==null||r.emit("validate",t.prop,!0,"")},Ee=async Q=>{const me=C.value;return new _a({[me]:Q}).validate({[me]:Y.value},{firstFields:!0}).then(()=>(oe(),!0)).catch(Le=>(J(Le),Promise.reject(Le)))},j=async(Q,me)=>{if(p||!t.prop)return!1;const Ie=nt(me);if(!G.value)return me==null||me(!1),!1;const Le=ie(Q);return Le.length===0?(me==null||me(!0),!0):(Z("validating"),Ee(Le).then(()=>(me==null||me(!0),!0)).catch(Xe=>{const{fields:ht}=Xe;return me==null||me(!1,ht),Ie?!1:Promise.reject(ht)}))},_e=()=>{Z(""),d.value="",p=!1},ce=async()=>{const Q=r==null?void 0:r.model;if(!Q||!t.prop)return;const me=qu(Q,t.prop);p=!0,me.value=Jf(g),await He(),_e(),p=!1},ve=Q=>{u.value.includes(Q)||u.value.push(Q)},Ze=Q=>{u.value=u.value.filter(me=>me!==Q)};ee(()=>t.error,Q=>{d.value=Q||"",Z(Q?"error":"")},{immediate:!0}),ee(()=>t.validateStatus,Q=>Z(Q||""));const fe=Jn({...tn(t),$el:f,size:o,validateState:c,labelId:l,inputIds:u,isGroup:D,hasLabel:S,fieldValue:Y,addInputId:ve,removeInputId:Ze,resetField:ce,clearValidate:_e,validate:j});return st(Yr,fe),Ge(()=>{t.prop&&(r==null||r.addField(fe),g=Jf(Y.value))}),Fn(()=>{r==null||r.removeField(fe)}),e({size:o,validateMessage:d,validateState:c,validate:j,clearValidate:_e,resetField:ce}),(Q,me)=>{var Ie;return w(),R("div",{ref_key:"formItemRef",ref:f,class:W(v(y)),role:v(D)?"group":void 0,"aria-labelledby":v(D)?v(l):void 0},[z(v(JT),{"is-auto-width":v(m).width==="auto","update-all":((Ie=v(r))==null?void 0:Ie.labelWidth)==="auto"},{default:O(()=>[v(S)?(w(),X(Qe(v(P)?"label":"div"),{key:0,id:v(l),for:v(P),class:W(v(a).e("label")),style:pt(v(m))},{default:O(()=>[L(Q.$slots,"label",{label:v($)},()=>[Lt(se(v($)),1)])]),_:3},8,["id","for","class","style"])):V("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),I("div",{class:W(v(a).e("content")),style:pt(v(b))},[L(Q.$slots,"default"),z(iy,{name:`${v(a).namespace.value}-zoom-in-top`},{default:O(()=>[v(M)?L(Q.$slots,"error",{key:0,error:d.value},()=>[I("div",{class:W(v(E))},se(d.value),3)]):V("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var Am=Ne(eS,[["__file","form-item.vue"]]);const yN=nn(_T,{FormItem:Am}),bN=cu(Am);let Bn;const tS=`
  height:0 !important;
  visibility:hidden !important;
  ${Hy()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,nS=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function iS(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),r=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:nS.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:i,borderSize:r,boxSizing:t}}function Ig(n,e=1,t){var i;Bn||(Bn=document.createElement("textarea"),document.body.appendChild(Bn));const{paddingSize:r,borderSize:s,boxSizing:o,contextStyle:a}=iS(n);Bn.setAttribute("style",`${a};${tS}`),Bn.value=n.value||n.placeholder||"";let l=Bn.scrollHeight;const u={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-r),Bn.value="";const c=Bn.scrollHeight-r;if(Be(e)){let h=c*e;o==="border-box"&&(h=h+r+s),l=Math.max(h,l),u.minHeight=`${h}px`}if(Be(t)){let h=c*t;o==="border-box"&&(h=h+r+s),l=Math.min(h,l)}return u.height=`${l}px`,(i=Bn.parentNode)==null||i.removeChild(Bn),Bn=void 0,u}const rS=De({id:{type:String,default:void 0},size:pu,disabled:Boolean,modelValue:{type:de([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:de([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Kr},prefixIcon:{type:Kr},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:de([Object,Array,String]),default:()=>Fr({})},autofocus:Boolean,rows:{type:Number,default:2},...ao(["ariaLabel"])}),sS={[ln]:n=>Qt(n),input:n=>Qt(n),change:n=>Qt(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},oS=F({name:"ElInput",inheritAttrs:!1}),aS=F({...oS,props:rS,emits:sS,setup(n,{expose:e,emit:t}){const i=n,r=ry(),s=ql(),o=T(()=>{const H={};return i.containerRole==="combobox"&&(H["aria-haspopup"]=r["aria-haspopup"],H["aria-owns"]=r["aria-owns"],H["aria-expanded"]=r["aria-expanded"]),H}),a=T(()=>[i.type==="textarea"?_.b():p.b(),p.m(f.value),p.is("disabled",g.value),p.is("exceed",_e.value),{[p.b("group")]:s.prepend||s.append,[p.m("prefix")]:s.prefix||i.prefixIcon,[p.m("suffix")]:s.suffix||i.suffixIcon||i.clearable||i.showPassword,[p.bm("suffix","password-clear")]:J.value&&oe.value,[p.b("hidden")]:i.type==="hidden"},r.class]),l=T(()=>[p.e("wrapper"),p.is("focus",D.value)]),u=Lw({excludeKeys:T(()=>Object.keys(o.value))}),{form:c,formItem:h}=_u(),{inputId:d}=Im(i,{formItemContext:h}),f=rs(),g=mu(),p=$e("input"),_=$e("textarea"),m=Xt(),b=Xt(),y=B(!1),x=B(!1),E=B(),C=Xt(i.inputStyle),S=T(()=>m.value||b.value),{wrapperRef:P,isFocused:D,handleFocus:N,handleBlur:Y}=Cm(S,{afterBlur(){var H;i.validateEvent&&((H=h==null?void 0:h.validate)==null||H.call(h,"blur").catch(we=>void 0))}}),K=T(()=>{var H;return(H=c==null?void 0:c.statusIcon)!=null?H:!1}),G=T(()=>(h==null?void 0:h.validateState)||""),ie=T(()=>G.value&&tm[G.value]),A=T(()=>x.value?Ew:fw),M=T(()=>[r.style]),$=T(()=>[i.inputStyle,C.value,{resize:i.resize}]),Z=T(()=>Oi(i.modelValue)?"":String(i.modelValue)),J=T(()=>i.clearable&&!g.value&&!i.readonly&&!!Z.value&&(D.value||y.value)),oe=T(()=>i.showPassword&&!g.value&&!i.readonly&&!!Z.value&&(!!Z.value||D.value)),Ee=T(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!g.value&&!i.readonly&&!i.showPassword),j=T(()=>Z.value.length),_e=T(()=>!!Ee.value&&j.value>Number(i.maxlength)),ce=T(()=>!!s.suffix||!!i.suffixIcon||J.value||i.showPassword||Ee.value||!!G.value&&K.value),[ve,Ze]=qC(m);jn(b,H=>{if(me(),!Ee.value||i.resize!=="both")return;const we=H[0],{width:ut}=we.contentRect;E.value={right:`calc(100% - ${ut+15+6}px)`}});const fe=()=>{const{type:H,autosize:we}=i;if(!(!rt||H!=="textarea"||!b.value))if(we){const ut=qt(we)?we.minRows:void 0,St=qt(we)?we.maxRows:void 0,Sn=Ig(b.value,ut,St);C.value={overflowY:"hidden",...Sn},He(()=>{b.value.offsetHeight,C.value=Sn})}else C.value={minHeight:Ig(b.value).minHeight}},me=(H=>{let we=!1;return()=>{var ut;if(we||!i.autosize)return;((ut=b.value)==null?void 0:ut.offsetParent)===null||(H(),we=!0)}})(fe),Ie=()=>{const H=S.value,we=i.formatter?i.formatter(Z.value):Z.value;!H||H.value===we||(H.value=we)},Le=async H=>{ve();let{value:we}=H.target;if(i.formatter&&(we=i.parser?i.parser(we):we),!ht.value){if(we===Z.value){Ie();return}t(ln,we),t("input",we),await He(),Ie(),Ze()}},Xe=H=>{t("change",H.target.value)},{isComposing:ht,handleCompositionStart:jt,handleCompositionUpdate:wn,handleCompositionEnd:At}=Tm({emit:t,afterComposition:Le}),rn=()=>{x.value=!x.value,Cn()},Cn=async()=>{var H;await He(),(H=S.value)==null||H.focus()},gn=()=>{var H;return(H=S.value)==null?void 0:H.blur()},dt=H=>{y.value=!1,t("mouseleave",H)},Tn=H=>{y.value=!0,t("mouseenter",H)},qe=H=>{t("keydown",H)},at=()=>{var H;(H=S.value)==null||H.select()},lt=()=>{t(ln,""),t("change",""),t("clear"),t("input","")};return ee(()=>i.modelValue,()=>{var H;He(()=>fe()),i.validateEvent&&((H=h==null?void 0:h.validate)==null||H.call(h,"change").catch(we=>void 0))}),ee(Z,()=>Ie()),ee(()=>i.type,async()=>{await He(),Ie(),fe()}),Ge(()=>{!i.formatter&&i.parser,Ie(),He(fe)}),e({input:m,textarea:b,ref:S,textareaStyle:$,autosize:Xn(i,"autosize"),isComposing:ht,focus:Cn,blur:gn,select:at,clear:lt,resizeTextarea:fe}),(H,we)=>(w(),R("div",Bt(v(o),{class:[v(a),{[v(p).bm("group","append")]:H.$slots.append,[v(p).bm("group","prepend")]:H.$slots.prepend}],style:v(M),role:H.containerRole,onMouseenter:Tn,onMouseleave:dt}),[V(" input "),H.type!=="textarea"?(w(),R(Pe,{key:0},[V(" prepend slot "),H.$slots.prepend?(w(),R("div",{key:0,class:W(v(p).be("group","prepend"))},[L(H.$slots,"prepend")],2)):V("v-if",!0),I("div",{ref_key:"wrapperRef",ref:P,class:W(v(l))},[V(" prefix slot "),H.$slots.prefix||H.prefixIcon?(w(),R("span",{key:0,class:W(v(p).e("prefix"))},[I("span",{class:W(v(p).e("prefix-inner"))},[L(H.$slots,"prefix"),H.prefixIcon?(w(),X(v(Kt),{key:0,class:W(v(p).e("icon"))},{default:O(()=>[(w(),X(Qe(H.prefixIcon)))]),_:1},8,["class"])):V("v-if",!0)],2)],2)):V("v-if",!0),I("input",Bt({id:v(d),ref_key:"input",ref:m,class:v(p).e("inner")},v(u),{minlength:H.minlength,maxlength:H.maxlength,type:H.showPassword?x.value?"text":"password":H.type,disabled:v(g),readonly:H.readonly,autocomplete:H.autocomplete,tabindex:H.tabindex,"aria-label":H.ariaLabel,placeholder:H.placeholder,style:H.inputStyle,form:H.form,autofocus:H.autofocus,onCompositionstart:v(jt),onCompositionupdate:v(wn),onCompositionend:v(At),onInput:Le,onChange:Xe,onKeydown:qe}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","onCompositionstart","onCompositionupdate","onCompositionend"]),V(" suffix slot "),v(ce)?(w(),R("span",{key:1,class:W(v(p).e("suffix"))},[I("span",{class:W(v(p).e("suffix-inner"))},[!v(J)||!v(oe)||!v(Ee)?(w(),R(Pe,{key:0},[L(H.$slots,"suffix"),H.suffixIcon?(w(),X(v(Kt),{key:0,class:W(v(p).e("icon"))},{default:O(()=>[(w(),X(Qe(H.suffixIcon)))]),_:1},8,["class"])):V("v-if",!0)],64)):V("v-if",!0),v(J)?(w(),X(v(Kt),{key:1,class:W([v(p).e("icon"),v(p).e("clear")]),onMousedown:bt(v(zo),["prevent"]),onClick:lt},{default:O(()=>[z(v(Uh))]),_:1},8,["class","onMousedown"])):V("v-if",!0),v(oe)?(w(),X(v(Kt),{key:2,class:W([v(p).e("icon"),v(p).e("password")]),onClick:rn},{default:O(()=>[(w(),X(Qe(v(A))))]),_:1},8,["class"])):V("v-if",!0),v(Ee)?(w(),R("span",{key:3,class:W(v(p).e("count"))},[I("span",{class:W(v(p).e("count-inner"))},se(v(j))+" / "+se(H.maxlength),3)],2)):V("v-if",!0),v(G)&&v(ie)&&v(K)?(w(),X(v(Kt),{key:4,class:W([v(p).e("icon"),v(p).e("validateIcon"),v(p).is("loading",v(G)==="validating")])},{default:O(()=>[(w(),X(Qe(v(ie))))]),_:1},8,["class"])):V("v-if",!0)],2)],2)):V("v-if",!0)],2),V(" append slot "),H.$slots.append?(w(),R("div",{key:1,class:W(v(p).be("group","append"))},[L(H.$slots,"append")],2)):V("v-if",!0)],64)):(w(),R(Pe,{key:1},[V(" textarea "),I("textarea",Bt({id:v(d),ref_key:"textarea",ref:b,class:[v(_).e("inner"),v(p).is("focus",v(D))]},v(u),{minlength:H.minlength,maxlength:H.maxlength,tabindex:H.tabindex,disabled:v(g),readonly:H.readonly,autocomplete:H.autocomplete,style:v($),"aria-label":H.ariaLabel,placeholder:H.placeholder,form:H.form,autofocus:H.autofocus,rows:H.rows,onCompositionstart:v(jt),onCompositionupdate:v(wn),onCompositionend:v(At),onInput:Le,onFocus:v(N),onBlur:v(Y),onChange:Xe,onKeydown:qe}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),v(Ee)?(w(),R("span",{key:0,style:pt(E.value),class:W(v(p).e("count"))},se(v(j))+" / "+se(H.maxlength),7)):V("v-if",!0)],64))],16,["role"]))}});var lS=Ne(aS,[["__file","input.vue"]]);const uS=nn(lS),_s=4,cS={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},hS=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),id=Symbol("scrollbarContextKey"),dS=De({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),fS="Thumb",gS=F({__name:"thumb",props:dS,setup(n){const e=n,t=pe(id),i=$e("scrollbar");t||Wh(fS,"can not inject scrollbar context");const r=B(),s=B(),o=B({}),a=B(!1);let l=!1,u=!1,c=rt?document.onselectstart:null;const h=T(()=>cS[e.vertical?"vertical":"horizontal"]),d=T(()=>hS({size:e.size,move:e.move,bar:h.value})),f=T(()=>r.value[h.value.offset]**2/t.wrapElement[h.value.scrollSize]/e.ratio/s.value[h.value.offset]),g=C=>{var S;if(C.stopPropagation(),C.ctrlKey||[1,2].includes(C.button))return;(S=window.getSelection())==null||S.removeAllRanges(),_(C);const P=C.currentTarget;P&&(o.value[h.value.axis]=P[h.value.offset]-(C[h.value.client]-P.getBoundingClientRect()[h.value.direction]))},p=C=>{if(!s.value||!r.value||!t.wrapElement)return;const S=Math.abs(C.target.getBoundingClientRect()[h.value.direction]-C[h.value.client]),P=s.value[h.value.offset]/2,D=(S-P)*100*f.value/r.value[h.value.offset];t.wrapElement[h.value.scroll]=D*t.wrapElement[h.value.scrollSize]/100},_=C=>{C.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",m),document.addEventListener("mouseup",b),c=document.onselectstart,document.onselectstart=()=>!1},m=C=>{if(!r.value||!s.value||l===!1)return;const S=o.value[h.value.axis];if(!S)return;const P=(r.value.getBoundingClientRect()[h.value.direction]-C[h.value.client])*-1,D=s.value[h.value.offset]-S,N=(P-D)*100*f.value/r.value[h.value.offset];t.wrapElement[h.value.scroll]=N*t.wrapElement[h.value.scrollSize]/100},b=()=>{l=!1,o.value[h.value.axis]=0,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",b),E(),u&&(a.value=!1)},y=()=>{u=!1,a.value=!!e.size},x=()=>{u=!0,a.value=l};Fn(()=>{E(),document.removeEventListener("mouseup",b)});const E=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return fi(Xn(t,"scrollbarElement"),"mousemove",y),fi(Xn(t,"scrollbarElement"),"mouseleave",x),(C,S)=>(w(),X(Wi,{name:v(i).b("fade"),persisted:""},{default:O(()=>[Et(I("div",{ref_key:"instance",ref:r,class:W([v(i).e("bar"),v(i).is(v(h).key)]),onMousedown:p},[I("div",{ref_key:"thumb",ref:s,class:W(v(i).e("thumb")),style:pt(v(d)),onMousedown:g},null,38)],34),[[vn,C.always||a.value]])]),_:1},8,["name"]))}});var Lg=Ne(gS,[["__file","thumb.vue"]]);const pS=De({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),mS=F({__name:"bar",props:pS,setup(n,{expose:e}){const t=n,i=pe(id),r=B(0),s=B(0),o=B(""),a=B(""),l=B(1),u=B(1);return e({handleScroll:d=>{if(d){const f=d.offsetHeight-_s,g=d.offsetWidth-_s;s.value=d.scrollTop*100/f*l.value,r.value=d.scrollLeft*100/g*u.value}},update:()=>{const d=i==null?void 0:i.wrapElement;if(!d)return;const f=d.offsetHeight-_s,g=d.offsetWidth-_s,p=f**2/d.scrollHeight,_=g**2/d.scrollWidth,m=Math.max(p,t.minSize),b=Math.max(_,t.minSize);l.value=p/(f-p)/(m/(f-m)),u.value=_/(g-_)/(b/(g-b)),a.value=m+_s<f?`${m}px`:"",o.value=b+_s<g?`${b}px`:""}}),(d,f)=>(w(),R(Pe,null,[z(Lg,{move:r.value,ratio:u.value,size:o.value,always:d.always},null,8,["move","ratio","size","always"]),z(Lg,{move:s.value,ratio:l.value,size:a.value,vertical:"",always:d.always},null,8,["move","ratio","size","always"])],64))}});var _S=Ne(mS,[["__file","bar.vue"]]);const vS=De({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:de([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,...ao(["ariaLabel","ariaOrientation"])}),yS={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(Be)},bS="ElScrollbar",xS=F({name:bS}),ES=F({...xS,props:vS,emits:yS,setup(n,{expose:e,emit:t}){const i=n,r=$e("scrollbar");let s,o,a=0,l=0;const u=B(),c=B(),h=B(),d=B(),f=T(()=>{const E={};return i.height&&(E.height=Xr(i.height)),i.maxHeight&&(E.maxHeight=Xr(i.maxHeight)),[i.wrapStyle,E]}),g=T(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),p=T(()=>[r.e("view"),i.viewClass]),_=()=>{var E;c.value&&((E=d.value)==null||E.handleScroll(c.value),a=c.value.scrollTop,l=c.value.scrollLeft,t("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function m(E,C){qt(E)?c.value.scrollTo(E):Be(E)&&Be(C)&&c.value.scrollTo(E,C)}const b=E=>{Be(E)&&(c.value.scrollTop=E)},y=E=>{Be(E)&&(c.value.scrollLeft=E)},x=()=>{var E;(E=d.value)==null||E.update()};return ee(()=>i.noresize,E=>{E?(s==null||s(),o==null||o()):({stop:s}=jn(h,x),o=fi("resize",x))},{immediate:!0}),ee(()=>[i.maxHeight,i.height],()=>{i.native||He(()=>{var E;x(),c.value&&((E=d.value)==null||E.handleScroll(c.value))})}),st(id,Jn({scrollbarElement:u,wrapElement:c})),sy(()=>{c.value.scrollTop=a,c.value.scrollLeft=l}),Ge(()=>{i.native||He(()=>{x()})}),Zl(()=>x()),e({wrapRef:c,update:x,scrollTo:m,setScrollTop:b,setScrollLeft:y,handleScroll:_}),(E,C)=>(w(),R("div",{ref_key:"scrollbarRef",ref:u,class:W(v(r).b())},[I("div",{ref_key:"wrapRef",ref:c,class:W(v(g)),style:pt(v(f)),onScroll:_},[(w(),X(Qe(E.tag),{id:E.id,ref_key:"resizeRef",ref:h,class:W(v(p)),style:pt(E.viewStyle),role:E.role,"aria-label":E.ariaLabel,"aria-orientation":E.ariaOrientation},{default:O(()=>[L(E.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),E.native?V("v-if",!0):(w(),X(_S,{key:0,ref_key:"barRef",ref:d,always:E.always,"min-size":E.minSize},null,8,["always","min-size"]))],2))}});var wS=Ne(ES,[["__file","scrollbar.vue"]]);const CS=nn(wS),rd=Symbol("popper"),Mm=Symbol("popperContent"),TS=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],Om=De({role:{type:String,values:TS,default:"tooltip"}}),SS=F({name:"ElPopper",inheritAttrs:!1}),RS=F({...SS,props:Om,setup(n,{expose:e}){const t=n,i=B(),r=B(),s=B(),o=B(),a=T(()=>t.role),l={triggerRef:i,popperInstanceRef:r,contentRef:s,referenceRef:o,role:a};return e(l),st(rd,l),(u,c)=>L(u.$slots,"default")}});var PS=Ne(RS,[["__file","popper.vue"]]);const Fm=De({arrowOffset:{type:Number,default:5}}),IS=F({name:"ElPopperArrow",inheritAttrs:!1}),LS=F({...IS,props:Fm,setup(n,{expose:e}){const t=n,i=$e("popper"),{arrowOffset:r,arrowRef:s,arrowStyle:o}=pe(Mm,void 0);return ee(()=>t.arrowOffset,a=>{r.value=a}),Fn(()=>{s.value=void 0}),e({arrowRef:s}),(a,l)=>(w(),R("span",{ref_key:"arrowRef",ref:s,class:W(v(i).e("arrow")),style:pt(v(o)),"data-popper-arrow":""},null,6))}});var AS=Ne(LS,[["__file","arrow.vue"]]);const MS="ElOnlyChild",OS=F({name:MS,setup(n,{slots:e,attrs:t}){var i;const r=pe(ym),s=ZC((i=r==null?void 0:r.setForwardRef)!=null?i:zo);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const l=km(a);return l?Et(oy(l,t),[[s]]):null}}});function km(n){if(!n)return null;const e=n;for(const t of e){if(qt(t))switch(t.type){case ay:continue;case g0:case"svg":return Ag(t);case Pe:return km(t.children);default:return t}return Ag(t)}return null}function Ag(n){const e=$e("only-child");return z("span",{class:e.e("content")},[n])}const Dm=De({virtualRef:{type:de(Object)},virtualTriggering:Boolean,onMouseenter:{type:de(Function)},onMouseleave:{type:de(Function)},onClick:{type:de(Function)},onKeydown:{type:de(Function)},onFocus:{type:de(Function)},onBlur:{type:de(Function)},onContextmenu:{type:de(Function)},id:String,open:Boolean}),FS=F({name:"ElPopperTrigger",inheritAttrs:!1}),kS=F({...FS,props:Dm,setup(n,{expose:e}){const t=n,{role:i,triggerRef:r}=pe(rd,void 0);YC(r);const s=T(()=>a.value?t.id:void 0),o=T(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=T(()=>{if(i&&i.value!=="tooltip")return i.value}),l=T(()=>a.value?`${t.open}`:void 0);let u;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Ge(()=>{ee(()=>t.virtualRef,h=>{h&&(r.value=Ai(h))},{immediate:!0}),ee(r,(h,d)=>{u==null||u(),u=void 0,Vr(h)&&(c.forEach(f=>{var g;const p=t[f];p&&(h.addEventListener(f.slice(2).toLowerCase(),p),(g=d==null?void 0:d.removeEventListener)==null||g.call(d,f.slice(2).toLowerCase(),p))}),u=ee([s,o,a,l],f=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((g,p)=>{Oi(f[p])?h.removeAttribute(g):h.setAttribute(g,f[p])})},{immediate:!0})),Vr(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(f=>d.removeAttribute(f))},{immediate:!0})}),Fn(()=>{if(u==null||u(),u=void 0,r.value&&Vr(r.value)){const h=r.value;c.forEach(d=>{const f=t[d];f&&h.removeEventListener(d.slice(2).toLowerCase(),f)}),r.value=void 0}}),e({triggerRef:r}),(h,d)=>h.virtualTriggering?V("v-if",!0):(w(),X(v(OS),Bt({key:0},h.$attrs,{"aria-controls":v(s),"aria-describedby":v(o),"aria-expanded":v(l),"aria-haspopup":v(a)}),{default:O(()=>[L(h.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var DS=Ne(kS,[["__file","trigger.vue"]]);const Qu="focus-trap.focus-after-trapped",ec="focus-trap.focus-after-released",NS="focus-trap.focusout-prevented",Mg={cancelable:!0,bubbles:!1},$S={cancelable:!0,bubbles:!1},Og="focusAfterTrapped",Fg="focusAfterReleased",BS=Symbol("elFocusTrap"),sd=B(),vu=B(0),od=B(0);let $a=0;const Nm=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},kg=(n,e)=>{for(const t of n)if(!GS(t,e))return t},GS=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},VS=n=>{const e=Nm(n),t=kg(e,n),i=kg(e.reverse(),n);return[t,i]},zS=n=>n instanceof HTMLInputElement&&"select"in n,sr=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),od.value=window.performance.now(),n!==t&&zS(n)&&e&&n.select()}};function Dg(n,e){const t=[...n],i=n.indexOf(e);return i!==-1&&t.splice(i,1),t}const jS=()=>{let n=[];return{push:i=>{const r=n[0];r&&i!==r&&r.pause(),n=Dg(n,i),n.unshift(i)},remove:i=>{var r,s;n=Dg(n,i),(s=(r=n[0])==null?void 0:r.resume)==null||s.call(r)}}},WS=(n,e=!1)=>{const t=document.activeElement;for(const i of n)if(sr(i,e),document.activeElement!==t)return},Ng=jS(),US=()=>vu.value>od.value,Ba=()=>{sd.value="pointer",vu.value=window.performance.now()},$g=()=>{sd.value="keyboard",vu.value=window.performance.now()},HS=()=>(Ge(()=>{$a===0&&(document.addEventListener("mousedown",Ba),document.addEventListener("touchstart",Ba),document.addEventListener("keydown",$g)),$a++}),Fn(()=>{$a--,$a<=0&&(document.removeEventListener("mousedown",Ba),document.removeEventListener("touchstart",Ba),document.removeEventListener("keydown",$g))}),{focusReason:sd,lastUserFocusTimestamp:vu,lastAutomatedFocusTimestamp:od}),Ga=n=>new CustomEvent(NS,{...$S,detail:n}),XS=F({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[Og,Fg,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=B();let i,r;const{focusReason:s}=HS();WC(g=>{n.trapped&&!o.paused&&e("release-requested",g)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=g=>{if(!n.loop&&!n.trapped||o.paused)return;const{key:p,altKey:_,ctrlKey:m,metaKey:b,currentTarget:y,shiftKey:x}=g,{loop:E}=n,C=p===zs.tab&&!_&&!m&&!b,S=document.activeElement;if(C&&S){const P=y,[D,N]=VS(P);if(D&&N){if(!x&&S===N){const K=Ga({focusReason:s.value});e("focusout-prevented",K),K.defaultPrevented||(g.preventDefault(),E&&sr(D,!0))}else if(x&&[D,P].includes(S)){const K=Ga({focusReason:s.value});e("focusout-prevented",K),K.defaultPrevented||(g.preventDefault(),E&&sr(N,!0))}}else if(S===P){const K=Ga({focusReason:s.value});e("focusout-prevented",K),K.defaultPrevented||g.preventDefault()}}};st(BS,{focusTrapRef:t,onKeydown:a}),ee(()=>n.focusTrapEl,g=>{g&&(t.value=g)},{immediate:!0}),ee([t],([g],[p])=>{g&&(g.addEventListener("keydown",a),g.addEventListener("focusin",c),g.addEventListener("focusout",h)),p&&(p.removeEventListener("keydown",a),p.removeEventListener("focusin",c),p.removeEventListener("focusout",h))});const l=g=>{e(Og,g)},u=g=>e(Fg,g),c=g=>{const p=v(t);if(!p)return;const _=g.target,m=g.relatedTarget,b=_&&p.contains(_);n.trapped||m&&p.contains(m)||(i=m),b&&e("focusin",g),!o.paused&&n.trapped&&(b?r=_:sr(r,!0))},h=g=>{const p=v(t);if(!(o.paused||!p))if(n.trapped){const _=g.relatedTarget;!Oi(_)&&!p.contains(_)&&setTimeout(()=>{if(!o.paused&&n.trapped){const m=Ga({focusReason:s.value});e("focusout-prevented",m),m.defaultPrevented||sr(r,!0)}},0)}else{const _=g.target;_&&p.contains(_)||e("focusout",g)}};async function d(){await He();const g=v(t);if(g){Ng.push(o);const p=g.contains(document.activeElement)?i:document.activeElement;if(i=p,!g.contains(p)){const m=new Event(Qu,Mg);g.addEventListener(Qu,l),g.dispatchEvent(m),m.defaultPrevented||He(()=>{let b=n.focusStartEl;Qt(b)||(sr(b),document.activeElement!==b&&(b="first")),b==="first"&&WS(Nm(g),!0),(document.activeElement===p||b==="container")&&sr(g)})}}}function f(){const g=v(t);if(g){g.removeEventListener(Qu,l);const p=new CustomEvent(ec,{...Mg,detail:{focusReason:s.value}});g.addEventListener(ec,u),g.dispatchEvent(p),!p.defaultPrevented&&(s.value=="keyboard"||!US()||g.contains(document.activeElement))&&sr(i??document.body),g.removeEventListener(ec,u),Ng.remove(o)}}return Ge(()=>{n.trapped&&d(),ee(()=>n.trapped,g=>{g?d():f()})}),Fn(()=>{n.trapped&&f(),t.value&&(t.value.removeEventListener("keydown",a),t.value.removeEventListener("focusin",c),t.value.removeEventListener("focusout",h),t.value=void 0)}),{onKeydown:a}}});function KS(n,e,t,i,r,s){return L(n.$slots,"default",{handleKeydown:n.onKeydown})}var YS=Ne(XS,[["render",KS],["__file","focus-trap.vue"]]);const ZS=["fixed","absolute"],qS=De({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:de(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:fu,default:"bottom"},popperOptions:{type:de(Object),default:()=>({})},strategy:{type:String,values:ZS,default:"absolute"}}),$m=De({...qS,id:String,style:{type:de([String,Array,Object])},className:{type:de([String,Array,Object])},effect:{type:de(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:de([String,Array,Object])},popperStyle:{type:de([String,Array,Object])},referenceEl:{type:de(Object)},triggerTargetEl:{type:de(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...ao(["ariaLabel"])}),JS={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},QS=(n,e=[])=>{const{placement:t,strategy:i,popperOptions:r}=n,s={placement:t,strategy:i,...r,modifiers:[...tR(n),...e]};return nR(s,r==null?void 0:r.modifiers),s},eR=n=>{if(rt)return Ai(n)};function tR(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function nR(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const iR=0,rR=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:r}=pe(rd,void 0),s=B(),o=B(),a=T(()=>({name:"eventListeners",enabled:!!n.visible})),l=T(()=>{var m;const b=v(s),y=(m=v(o))!=null?m:iR;return{name:"arrow",enabled:!XE(b),options:{element:b,padding:y}}}),u=T(()=>({onFirstUpdate:()=>{g()},...QS(n,[v(l),v(a)])})),c=T(()=>eR(n.referenceEl)||v(i)),{attributes:h,state:d,styles:f,update:g,forceUpdate:p,instanceRef:_}=VC(c,t,u);return ee(_,m=>e.value=m),Ge(()=>{ee(()=>{var m;return(m=v(c))==null?void 0:m.getBoundingClientRect()},()=>{g()})}),{attributes:h,arrowRef:s,contentRef:t,instanceRef:_,state:d,styles:f,role:r,forceUpdate:p,update:g}},sR=(n,{attributes:e,styles:t,role:i})=>{const{nextZIndex:r}=Em(),s=$e("popper"),o=T(()=>v(e).popper),a=B(Be(n.zIndex)?n.zIndex:r()),l=T(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),u=T(()=>[{zIndex:v(a)},v(t).popper,n.popperStyle||{}]),c=T(()=>i.value==="dialog"?"false":void 0),h=T(()=>v(t).arrow||{});return{ariaModal:c,arrowStyle:h,contentAttrs:o,contentClass:l,contentStyle:u,contentZIndex:a,updateZIndex:()=>{a.value=Be(n.zIndex)?n.zIndex:r()}}},oR=(n,e)=>{const t=B(!1),i=B();return{focusStartRef:i,trapped:t,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{n.visible&&!t.value&&(u.target&&(i.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{n.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},aR=F({name:"ElPopperContent"}),lR=F({...aR,props:$m,emits:JS,setup(n,{expose:e,emit:t}){const i=n,{focusStartRef:r,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=oR(i,t),{attributes:h,arrowRef:d,contentRef:f,styles:g,instanceRef:p,role:_,update:m}=rR(i),{ariaModal:b,arrowStyle:y,contentAttrs:x,contentClass:E,contentStyle:C,updateZIndex:S}=sR(i,{styles:g,attributes:h,role:_}),P=pe(Yr,void 0),D=B();st(Mm,{arrowStyle:y,arrowRef:d,arrowOffset:D}),P&&st(Yr,{...P,addInputId:zo,removeInputId:zo});let N;const Y=(G=!0)=>{m(),G&&S()},K=()=>{Y(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Ge(()=>{ee(()=>i.triggerTargetEl,(G,ie)=>{N==null||N(),N=void 0;const A=v(G||f.value),M=v(ie||f.value);Vr(A)&&(N=ee([_,()=>i.ariaLabel,b,()=>i.id],$=>{["role","aria-label","aria-modal","id"].forEach((Z,J)=>{Oi($[J])?A.removeAttribute(Z):A.setAttribute(Z,$[J])})},{immediate:!0})),M!==A&&Vr(M)&&["role","aria-label","aria-modal","id"].forEach($=>{M.removeAttribute($)})},{immediate:!0}),ee(()=>i.visible,K,{immediate:!0})}),Fn(()=>{N==null||N(),N=void 0}),e({popperContentRef:f,popperInstanceRef:p,updatePopper:Y,contentStyle:C}),(G,ie)=>(w(),R("div",Bt({ref_key:"contentRef",ref:f},v(x),{style:v(C),class:v(E),tabindex:"-1",onMouseenter:A=>G.$emit("mouseenter",A),onMouseleave:A=>G.$emit("mouseleave",A)}),[z(v(YS),{trapped:v(s),"trap-on-focus-in":!0,"focus-trap-el":v(f),"focus-start-el":v(r),onFocusAfterTrapped:v(a),onFocusAfterReleased:v(o),onFocusin:v(l),onFocusoutPrevented:v(u),onReleaseRequested:v(c)},{default:O(()=>[L(G.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var uR=Ne(lR,[["__file","content.vue"]]);const cR=nn(PS),ad=Symbol("elTooltip"),ld=De({...XC,...$m,appendTo:{type:de([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:de(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...ao(["ariaLabel"])}),Bm=De({...Dm,disabled:Boolean,trigger:{type:de([String,Array]),default:"hover"},triggerKeys:{type:de(Array),default:()=>[zs.enter,zs.space]}}),{useModelToggleProps:hR,useModelToggleEmits:dR,useModelToggle:fR}=rm("visible"),gR=De({...Om,...hR,...ld,...Bm,...Fm,showArrow:{type:Boolean,default:!0}}),pR=[...dR,"before-show","before-hide","show","hide","open","close"],mR=(n,e)=>Li(n)?n.includes(e):n===e,vs=(n,e,t)=>i=>{mR(v(n),e)&&t(i)},_R=F({name:"ElTooltipTrigger"}),vR=F({..._R,props:Bm,setup(n,{expose:e}){const t=n,i=$e("tooltip"),{controlled:r,id:s,open:o,onOpen:a,onClose:l,onToggle:u}=pe(ad,void 0),c=B(null),h=()=>{if(v(r)||t.disabled)return!0},d=Xn(t,"trigger"),f=Ri(h,vs(d,"hover",a)),g=Ri(h,vs(d,"hover",l)),p=Ri(h,vs(d,"click",x=>{x.button===0&&u(x)})),_=Ri(h,vs(d,"focus",a)),m=Ri(h,vs(d,"focus",l)),b=Ri(h,vs(d,"contextmenu",x=>{x.preventDefault(),u(x)})),y=Ri(h,x=>{const{code:E}=x;t.triggerKeys.includes(E)&&(x.preventDefault(),u(x))});return e({triggerRef:c}),(x,E)=>(w(),X(v(DS),{id:v(s),"virtual-ref":x.virtualRef,open:v(o),"virtual-triggering":x.virtualTriggering,class:W(v(i).e("trigger")),onBlur:v(m),onClick:v(p),onContextmenu:v(b),onFocus:v(_),onMouseenter:v(f),onMouseleave:v(g),onKeydown:v(y)},{default:O(()=>[L(x.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var yR=Ne(vR,[["__file","trigger.vue"]]);const bR=De({to:{type:de([String,Object]),required:!0},disabled:Boolean}),xR=F({__name:"teleport",props:bR,setup(n){return(e,t)=>e.disabled?L(e.$slots,"default",{key:0}):(w(),X(ly,{key:1,to:e.to},[L(e.$slots,"default")],8,["to"]))}});var ER=Ne(xR,[["__file","teleport.vue"]]);const wR=nn(ER),CR=F({name:"ElTooltipContent",inheritAttrs:!1}),TR=F({...CR,props:ld,setup(n,{expose:e}){const t=n,{selector:i}=vm(),r=$e("tooltip"),s=B(null);let o;const{controlled:a,id:l,open:u,trigger:c,onClose:h,onOpen:d,onShow:f,onHide:g,onBeforeShow:p,onBeforeHide:_}=pe(ad,void 0),m=T(()=>t.transition||`${r.namespace.value}-fade-in-linear`),b=T(()=>t.persistent);Fn(()=>{o==null||o()});const y=T(()=>v(b)?!0:v(u)),x=T(()=>t.disabled?!1:v(u)),E=T(()=>t.appendTo||i.value),C=T(()=>{var M;return(M=t.style)!=null?M:{}}),S=T(()=>!v(u)),P=()=>{g()},D=()=>{if(v(a))return!0},N=Ri(D,()=>{t.enterable&&v(c)==="hover"&&d()}),Y=Ri(D,()=>{v(c)==="hover"&&h()}),K=()=>{var M,$;($=(M=s.value)==null?void 0:M.updatePopper)==null||$.call(M),p==null||p()},G=()=>{_==null||_()},ie=()=>{f(),o=Oy(T(()=>{var M;return(M=s.value)==null?void 0:M.popperContentRef}),()=>{if(v(a))return;v(c)!=="hover"&&h()})},A=()=>{t.virtualTriggering||h()};return ee(()=>v(u),M=>{M||o==null||o()},{flush:"post"}),ee(()=>t.content,()=>{var M,$;($=(M=s.value)==null?void 0:M.updatePopper)==null||$.call(M)}),e({contentRef:s}),(M,$)=>(w(),X(v(wR),{disabled:!M.teleported,to:v(E)},{default:O(()=>[z(Wi,{name:v(m),onAfterLeave:P,onBeforeEnter:K,onAfterEnter:ie,onBeforeLeave:G},{default:O(()=>[v(y)?Et((w(),X(v(uR),Bt({key:0,id:v(l),ref_key:"contentRef",ref:s},M.$attrs,{"aria-label":M.ariaLabel,"aria-hidden":v(S),"boundaries-padding":M.boundariesPadding,"fallback-placements":M.fallbackPlacements,"gpu-acceleration":M.gpuAcceleration,offset:M.offset,placement:M.placement,"popper-options":M.popperOptions,strategy:M.strategy,effect:M.effect,enterable:M.enterable,pure:M.pure,"popper-class":M.popperClass,"popper-style":[M.popperStyle,v(C)],"reference-el":M.referenceEl,"trigger-target-el":M.triggerTargetEl,visible:v(x),"z-index":M.zIndex,onMouseenter:v(N),onMouseleave:v(Y),onBlur:A,onClose:v(h)}),{default:O(()=>[L(M.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vn,v(x)]]):V("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var SR=Ne(TR,[["__file","content.vue"]]);const RR=F({name:"ElTooltip"}),PR=F({...RR,props:gR,emits:pR,setup(n,{expose:e,emit:t}){const i=n;HC();const r=ma(),s=B(),o=B(),a=()=>{var m;const b=v(s);b&&((m=b.popperInstanceRef)==null||m.update())},l=B(!1),u=B(),{show:c,hide:h,hasUpdateHandler:d}=fR({indicator:l,toggleReason:u}),{onOpen:f,onClose:g}=KC({showAfter:Xn(i,"showAfter"),hideAfter:Xn(i,"hideAfter"),autoClose:Xn(i,"autoClose"),open:c,close:h}),p=T(()=>lu(i.visible)&&!d.value);st(ad,{controlled:p,id:r,open:Rh(l),trigger:Xn(i,"trigger"),onOpen:m=>{f(m)},onClose:m=>{g(m)},onToggle:m=>{v(l)?g(m):f(m)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:a}),ee(()=>i.disabled,m=>{m&&l.value&&(l.value=!1)});const _=m=>{var b,y;const x=(y=(b=o.value)==null?void 0:b.contentRef)==null?void 0:y.popperContentRef,E=(m==null?void 0:m.relatedTarget)||document.activeElement;return x&&x.contains(E)};return uy(()=>l.value&&h()),e({popperRef:s,contentRef:o,isFocusInsideContent:_,updatePopper:a,onOpen:f,onClose:g,hide:h}),(m,b)=>(w(),X(v(cR),{ref_key:"popperRef",ref:s,role:m.role},{default:O(()=>[z(yR,{disabled:m.disabled,trigger:m.trigger,"trigger-keys":m.triggerKeys,"virtual-ref":m.virtualRef,"virtual-triggering":m.virtualTriggering},{default:O(()=>[m.$slots.default?L(m.$slots,"default",{key:0}):V("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),z(SR,{ref_key:"contentRef",ref:o,"aria-label":m.ariaLabel,"boundaries-padding":m.boundariesPadding,content:m.content,disabled:m.disabled,effect:m.effect,enterable:m.enterable,"fallback-placements":m.fallbackPlacements,"hide-after":m.hideAfter,"gpu-acceleration":m.gpuAcceleration,offset:m.offset,persistent:m.persistent,"popper-class":m.popperClass,"popper-style":m.popperStyle,placement:m.placement,"popper-options":m.popperOptions,pure:m.pure,"raw-content":m.rawContent,"reference-el":m.referenceEl,"trigger-target-el":m.triggerTargetEl,"show-after":m.showAfter,strategy:m.strategy,teleported:m.teleported,transition:m.transition,"virtual-triggering":m.virtualTriggering,"z-index":m.zIndex,"append-to":m.appendTo},{default:O(()=>[L(m.$slots,"content",{},()=>[m.rawContent?(w(),R("span",{key:0,innerHTML:m.content},null,8,["innerHTML"])):(w(),R("span",{key:1},se(m.content),1))]),m.showArrow?(w(),X(v(AS),{key:0,"arrow-offset":m.arrowOffset},null,8,["arrow-offset"])):V("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var IR=Ne(PR,[["__file","tooltip.vue"]]);const LR=nn(IR),AR=De({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:de([String,Object,Array])},offset:{type:de(Array),default:[0,0]},badgeClass:{type:String}}),MR=F({name:"ElBadge"}),OR=F({...MR,props:AR,setup(n,{expose:e}){const t=n,i=$e("badge"),r=T(()=>t.isDot?"":Be(t.value)&&Be(t.max)?t.max<t.value?`${t.max}+`:t.value===0&&!t.showZero?"":`${t.value}`:`${t.value}`),s=T(()=>{var o,a,l,u,c;return[{backgroundColor:t.color,marginRight:Xr(-((a=(o=t.offset)==null?void 0:o[0])!=null?a:0)),marginTop:Xr((u=(l=t.offset)==null?void 0:l[1])!=null?u:0)},(c=t.badgeStyle)!=null?c:{}]});return e({content:r}),(o,a)=>(w(),R("div",{class:W(v(i).b())},[L(o.$slots,"default"),z(Wi,{name:`${v(i).namespace.value}-zoom-in-center`,persisted:""},{default:O(()=>[Et(I("sup",{class:W([v(i).e("content"),v(i).em("content",o.type),v(i).is("fixed",!!o.$slots.default),v(i).is("dot",o.isDot),o.badgeClass]),style:pt(v(s)),textContent:se(v(r))},null,14,["textContent"]),[[vn,!o.hidden&&(v(r)||o.isDot)]])]),_:1},8,["name"])],2))}});var FR=Ne(OR,[["__file","badge.vue"]]);const kR=nn(FR),Gm=Symbol("buttonGroupContextKey"),DR=(n,e)=>{Aw({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},T(()=>n.type==="text"));const t=pe(Gm,void 0),i=nd("button"),{form:r}=_u(),s=rs(T(()=>t==null?void 0:t.size)),o=mu(),a=B(),l=ql(),u=T(()=>n.type||(t==null?void 0:t.type)||""),c=T(()=>{var g,p,_;return(_=(p=n.autoInsertSpace)!=null?p:(g=i.value)==null?void 0:g.autoInsertSpace)!=null?_:!1}),h=T(()=>n.tag==="button"?{ariaDisabled:o.value||n.loading,disabled:o.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),d=T(()=>{var g;const p=(g=l.default)==null?void 0:g.call(l);if(c.value&&(p==null?void 0:p.length)===1){const _=p[0];if((_==null?void 0:_.type)===g0){const m=_.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(m.trim())}}return!1});return{_disabled:o,_size:s,_type:u,_ref:a,_props:h,shouldAddSpace:d,handleClick:g=>{if(o.value||n.loading){g.stopPropagation();return}n.nativeType==="reset"&&(r==null||r.resetFields()),e("click",g)}}},NR=["default","primary","success","warning","info","danger","text",""],$R=["button","submit","reset"],Zc=De({size:pu,disabled:Boolean,type:{type:String,values:NR,default:""},icon:{type:Kr},nativeType:{type:String,values:$R,default:"button"},loading:Boolean,loadingIcon:{type:Kr,default:()=>q0},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:de([String,Object]),default:"button"}}),BR={click:n=>n instanceof MouseEvent};function It(n,e){GR(n)&&(n="100%");var t=VR(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function Va(n){return Math.min(1,Math.max(0,n))}function GR(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function VR(n){return typeof n=="string"&&n.indexOf("%")!==-1}function Vm(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function za(n){return n<=1?"".concat(Number(n)*100,"%"):n}function Nr(n){return n.length===1?"0"+n:String(n)}function zR(n,e,t){return{r:It(n,255)*255,g:It(e,255)*255,b:It(t,255)*255}}function Bg(n,e,t){n=It(n,255),e=It(e,255),t=It(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=0,a=(i+r)/2;if(i===r)o=0,s=0;else{var l=i-r;switch(o=a>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function tc(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function jR(n,e,t){var i,r,s;if(n=It(n,360),e=It(e,100),t=It(t,100),e===0)r=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=tc(a,o,n+1/3),r=tc(a,o,n),s=tc(a,o,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function Gg(n,e,t){n=It(n,255),e=It(e,255),t=It(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,o=i,a=i-r,l=i===0?0:a/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-n)/a+2;break;case t:s=(n-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function WR(n,e,t){n=It(n,360)*6,e=It(e,100),t=It(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=i%6,u=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],h=[s,s,a,t,t,o][l];return{r:u*255,g:c*255,b:h*255}}function Vg(n,e,t,i){var r=[Nr(Math.round(n).toString(16)),Nr(Math.round(e).toString(16)),Nr(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function UR(n,e,t,i,r){var s=[Nr(Math.round(n).toString(16)),Nr(Math.round(e).toString(16)),Nr(Math.round(t).toString(16)),Nr(HR(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function HR(n){return Math.round(parseFloat(n)*255).toString(16)}function zg(n){return pn(n)/255}function pn(n){return parseInt(n,16)}function XR(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var qc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function KR(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,o=!1,a=!1;return typeof n=="string"&&(n=qR(n)),typeof n=="object"&&(Ei(n.r)&&Ei(n.g)&&Ei(n.b)?(e=zR(n.r,n.g,n.b),o=!0,a=String(n.r).substr(-1)==="%"?"prgb":"rgb"):Ei(n.h)&&Ei(n.s)&&Ei(n.v)?(i=za(n.s),r=za(n.v),e=WR(n.h,i,r),o=!0,a="hsv"):Ei(n.h)&&Ei(n.s)&&Ei(n.l)&&(i=za(n.s),s=za(n.l),e=jR(n.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=Vm(t),{ok:o,format:n.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var YR="[-\\+]?\\d+%?",ZR="[-\\+]?\\d*\\.\\d+%?",ur="(?:".concat(ZR,")|(?:").concat(YR,")"),nc="[\\s|\\(]+(".concat(ur,")[,|\\s]+(").concat(ur,")[,|\\s]+(").concat(ur,")\\s*\\)?"),ic="[\\s|\\(]+(".concat(ur,")[,|\\s]+(").concat(ur,")[,|\\s]+(").concat(ur,")[,|\\s]+(").concat(ur,")\\s*\\)?"),Vn={CSS_UNIT:new RegExp(ur),rgb:new RegExp("rgb"+nc),rgba:new RegExp("rgba"+ic),hsl:new RegExp("hsl"+nc),hsla:new RegExp("hsla"+ic),hsv:new RegExp("hsv"+nc),hsva:new RegExp("hsva"+ic),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qR(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(qc[n])n=qc[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Vn.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Vn.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Vn.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Vn.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Vn.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Vn.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Vn.hex8.exec(n),t?{r:pn(t[1]),g:pn(t[2]),b:pn(t[3]),a:zg(t[4]),format:e?"name":"hex8"}:(t=Vn.hex6.exec(n),t?{r:pn(t[1]),g:pn(t[2]),b:pn(t[3]),format:e?"name":"hex"}:(t=Vn.hex4.exec(n),t?{r:pn(t[1]+t[1]),g:pn(t[2]+t[2]),b:pn(t[3]+t[3]),a:zg(t[4]+t[4]),format:e?"name":"hex8"}:(t=Vn.hex3.exec(n),t?{r:pn(t[1]+t[1]),g:pn(t[2]+t[2]),b:pn(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function Ei(n){return!!Vn.CSS_UNIT.exec(String(n))}var JR=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=XR(e)),this.originalInput=e;var r=KR(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?r=a/12.92:r=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=Vm(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=Gg(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=Gg(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=Bg(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=Bg(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),Vg(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),UR(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(It(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(It(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Vg(this.r,this.g,this.b,!1),t=0,i=Object.entries(qc);t<i.length;t++){var r=i[t],s=r[0],o=r[1];if(e===o)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Va(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Va(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Va(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Va(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,o={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(o)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new n({h:i,s:r,v:s})),s=(s+a)%1;return o},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,o=1;o<e;o++)r.push(new n({h:(i+o*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function er(n,e=20){return n.mix("#141414",e).toString()}function QR(n){const e=mu(),t=$e("button");return T(()=>{let i={},r=n.color;if(r){const s=r.match(/var\((.*?)\)/);s&&(r=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const o=new JR(r),a=n.dark?o.tint(20).toString():er(o,20);if(n.plain)i=t.cssVarBlock({"bg-color":n.dark?er(o,90):o.tint(90).toString(),"text-color":r,"border-color":n.dark?er(o,50):o.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":r,"hover-border-color":r,"active-bg-color":a,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":a}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=n.dark?er(o,90):o.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=n.dark?er(o,50):o.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=n.dark?er(o,80):o.tint(80).toString());else{const l=n.dark?er(o,30):o.tint(30).toString(),u=o.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":r,"text-color":u,"border-color":r,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":a,"active-border-color":a}),e.value){const c=n.dark?er(o,50):o.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=c,i[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=c}}}return i})}const eP=F({name:"ElButton"}),tP=F({...eP,props:Zc,emits:BR,setup(n,{expose:e,emit:t}){const i=n,r=QR(i),s=$e("button"),{_ref:o,_size:a,_type:l,_disabled:u,_props:c,shouldAddSpace:h,handleClick:d}=DR(i,t),f=T(()=>[s.b(),s.m(l.value),s.m(a.value),s.is("disabled",u.value),s.is("loading",i.loading),s.is("plain",i.plain),s.is("round",i.round),s.is("circle",i.circle),s.is("text",i.text),s.is("link",i.link),s.is("has-bg",i.bg)]);return e({ref:o,size:a,type:l,disabled:u,shouldAddSpace:h}),(g,p)=>(w(),X(Qe(g.tag),Bt({ref_key:"_ref",ref:o},v(c),{class:v(f),style:v(r),onClick:v(d)}),{default:O(()=>[g.loading?(w(),R(Pe,{key:0},[g.$slots.loading?L(g.$slots,"loading",{key:0}):(w(),X(v(Kt),{key:1,class:W(v(s).is("loading"))},{default:O(()=>[(w(),X(Qe(g.loadingIcon)))]),_:1},8,["class"]))],64)):g.icon||g.$slots.icon?(w(),X(v(Kt),{key:1},{default:O(()=>[g.icon?(w(),X(Qe(g.icon),{key:0})):L(g.$slots,"icon",{key:1})]),_:3})):V("v-if",!0),g.$slots.default?(w(),R("span",{key:2,class:W({[v(s).em("text","expand")]:v(h)})},[L(g.$slots,"default")],2)):V("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var nP=Ne(tP,[["__file","button.vue"]]);const iP={size:Zc.size,type:Zc.type},rP=F({name:"ElButtonGroup"}),sP=F({...rP,props:iP,setup(n){const e=n;st(Gm,Jn({size:Xn(e,"size"),type:Xn(e,"type")}));const t=$e("button");return(i,r)=>(w(),R("div",{class:W(v(t).b("group"))},[L(i.$slots,"default")],2))}});var zm=Ne(sP,[["__file","button-group.vue"]]);const xN=nn(nP,{ButtonGroup:zm});cu(zm);const or=new Map;if(rt){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of or.values())for(const{documentHandler:i}of t)i(e,n);n=void 0}})}function jg(n,e){let t=[];return Array.isArray(e.arg)?t=e.arg:Vr(e.arg)&&t.push(e.arg),function(i,r){const s=e.instance.popperRef,o=i.target,a=r==null?void 0:r.target,l=!e||!e.instance,u=!o||!a,c=n.contains(o)||n.contains(a),h=n===o,d=t.length&&t.some(g=>g==null?void 0:g.contains(o))||t.length&&t.includes(a),f=s&&(s.contains(o)||s.contains(a));l||u||c||h||d||f||e.value(i,r)}}const oP={beforeMount(n,e){or.has(n)||or.set(n,[]),or.get(n).push({documentHandler:jg(n,e),bindingFn:e.value})},updated(n,e){or.has(n)||or.set(n,[]);const t=or.get(n),i=t.findIndex(s=>s.bindingFn===e.oldValue),r={documentHandler:jg(n,e),bindingFn:e.value};i>=0?t.splice(i,1,r):t.push(r)},unmounted(n){or.delete(n)}},aP=100,lP=600,Wg={beforeMount(n,e){const t=e.value,{interval:i=aP,delay:r=lP}=nt(t)?{}:t;let s,o;const a=()=>nt(t)?t():t.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};n.addEventListener("mousedown",u=>{u.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{a()},i)},r))})}},uP=De({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:de([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),cP=F({name:"ElCard"}),hP=F({...cP,props:uP,setup(n){const e=$e("card");return(t,i)=>(w(),R("div",{class:W([v(e).b(),v(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(w(),R("div",{key:0,class:W(v(e).e("header"))},[L(t.$slots,"header",{},()=>[Lt(se(t.header),1)])],2)):V("v-if",!0),I("div",{class:W([v(e).e("body"),t.bodyClass]),style:pt(t.bodyStyle)},[L(t.$slots,"default")],6),t.$slots.footer||t.footer?(w(),R("div",{key:1,class:W(v(e).e("footer"))},[L(t.$slots,"footer",{},()=>[Lt(se(t.footer),1)])],2)):V("v-if",!0)],2))}});var dP=Ne(hP,[["__file","card.vue"]]);const fP=nn(dP),Jc=De({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:du},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),gP={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},pP=F({name:"ElTag"}),mP=F({...pP,props:Jc,emits:gP,setup(n,{emit:e}){const t=n,i=rs(),r=$e("tag"),s=T(()=>{const{type:l,hit:u,effect:c,closable:h,round:d}=t;return[r.b(),r.is("closable",h),r.m(l||"primary"),r.m(i.value),r.m(c),r.is("hit",u),r.is("round",d)]}),o=l=>{e("close",l)},a=l=>{e("click",l)};return(l,u)=>l.disableTransitions?(w(),R("span",{key:0,class:W(v(s)),style:pt({backgroundColor:l.color}),onClick:a},[I("span",{class:W(v(r).e("content"))},[L(l.$slots,"default")],2),l.closable?(w(),X(v(Kt),{key:0,class:W(v(r).e("close")),onClick:bt(o,["stop"])},{default:O(()=>[z(v(jc))]),_:1},8,["class","onClick"])):V("v-if",!0)],6)):(w(),X(Wi,{key:1,name:`${v(r).namespace.value}-zoom-in-center`,appear:""},{default:O(()=>[I("span",{class:W(v(s)),style:pt({backgroundColor:l.color}),onClick:a},[I("span",{class:W(v(r).e("content"))},[L(l.$slots,"default")],2),l.closable?(w(),X(v(Kt),{key:0,class:W(v(r).e("close")),onClick:bt(o,["stop"])},{default:O(()=>[z(v(jc))]),_:1},8,["class","onClick"])):V("v-if",!0)],6)]),_:3},8,["name"]))}});var _P=Ne(mP,[["__file","tag.vue"]]);const vP=nn(_P),jm=Symbol("rowContextKey"),yP=["start","center","end","space-around","space-between","space-evenly"],bP=["top","middle","bottom"],xP=De({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:yP,default:"start"},align:{type:String,values:bP}}),EP=F({name:"ElRow"}),wP=F({...EP,props:xP,setup(n){const e=n,t=$e("row"),i=T(()=>e.gutter);st(jm,{gutter:i});const r=T(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),s=T(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(o,a)=>(w(),X(Qe(o.tag),{class:W(v(s)),style:pt(v(r))},{default:O(()=>[L(o.$slots,"default")]),_:3},8,["class","style"]))}});var CP=Ne(wP,[["__file","row.vue"]]);const EN=nn(CP),TP=De({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:de([Number,Object]),default:()=>Fr({})},sm:{type:de([Number,Object]),default:()=>Fr({})},md:{type:de([Number,Object]),default:()=>Fr({})},lg:{type:de([Number,Object]),default:()=>Fr({})},xl:{type:de([Number,Object]),default:()=>Fr({})}}),SP=F({name:"ElCol"}),RP=F({...SP,props:TP,setup(n){const e=n,{gutter:t}=pe(jm,{gutter:T(()=>0)}),i=$e("col"),r=T(()=>{const o={};return t.value&&(o.paddingLeft=o.paddingRight=`${t.value/2}px`),o}),s=T(()=>{const o=[];return["span","offset","pull","push"].forEach(u=>{const c=e[u];Be(c)&&(u==="span"?o.push(i.b(`${e[u]}`)):c>0&&o.push(i.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{Be(e[u])?o.push(i.b(`${u}-${e[u]}`)):qt(e[u])&&Object.entries(e[u]).forEach(([c,h])=>{o.push(c!=="span"?i.b(`${u}-${c}-${h}`):i.b(`${u}-${h}`))})}),t.value&&o.push(i.is("guttered")),[i.b(),o]});return(o,a)=>(w(),X(Qe(o.tag),{class:W(v(s)),style:pt(v(r))},{default:O(()=>[L(o.$slots,"default")]),_:3},8,["class","style"]))}});var PP=Ne(RP,[["__file","col.vue"]]);const wN=nn(PP),IP=De({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:pu,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||Be(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...ao(["ariaLabel"])}),LP={[hu]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[gl]:n=>Be(n)||Oi(n),[ln]:n=>Be(n)||Oi(n)},AP=F({name:"ElInputNumber"}),MP=F({...AP,props:IP,emits:LP,setup(n,{expose:e,emit:t}){const i=n,{t:r}=Hh(),s=$e("input-number"),o=B(),a=Jn({currentValue:i.modelValue,userInput:null}),{formItem:l}=_u(),u=T(()=>Be(i.modelValue)&&i.modelValue<=i.min),c=T(()=>Be(i.modelValue)&&i.modelValue>=i.max),h=T(()=>{const A=m(i.step);return Mi(i.precision)?Math.max(m(i.modelValue),A):(A>i.precision,i.precision)}),d=T(()=>i.controls&&i.controlsPosition==="right"),f=rs(),g=mu(),p=T(()=>{if(a.userInput!==null)return a.userInput;let A=a.currentValue;if(Oi(A))return"";if(Be(A)){if(Number.isNaN(A))return"";Mi(i.precision)||(A=A.toFixed(i.precision))}return A}),_=(A,M)=>{if(Mi(M)&&(M=h.value),M===0)return Math.round(A);let $=String(A);const Z=$.indexOf(".");if(Z===-1||!$.replace(".","").split("")[Z+M])return A;const Ee=$.length;return $.charAt(Ee-1)==="5"&&($=`${$.slice(0,Math.max(0,Ee-1))}6`),Number.parseFloat(Number($).toFixed(M))},m=A=>{if(Oi(A))return 0;const M=A.toString(),$=M.indexOf(".");let Z=0;return $!==-1&&(Z=M.length-$-1),Z},b=(A,M=1)=>Be(A)?_(A+i.step*M):a.currentValue,y=()=>{if(i.readonly||g.value||c.value)return;const A=Number(p.value)||0,M=b(A);C(M),t(gl,a.currentValue),G()},x=()=>{if(i.readonly||g.value||u.value)return;const A=Number(p.value)||0,M=b(A,-1);C(M),t(gl,a.currentValue),G()},E=(A,M)=>{const{max:$,min:Z,step:J,precision:oe,stepStrictly:Ee,valueOnClear:j}=i;$<Z&&Wh("InputNumber","min should not be greater than max.");let _e=Number(A);if(Oi(A)||Number.isNaN(_e))return null;if(A===""){if(j===null)return null;_e=Qt(j)?{min:Z,max:$}[j]:j}return Ee&&(_e=_(Math.round(_e/J)*J,oe)),Mi(oe)||(_e=_(_e,oe)),(_e>$||_e<Z)&&(_e=_e>$?$:Z,M&&t(ln,_e)),_e},C=(A,M=!0)=>{var $;const Z=a.currentValue,J=E(A);if(!M){t(ln,J);return}Z===J&&A||(a.userInput=null,t(ln,J),Z!==J&&t(hu,J,Z),i.validateEvent&&(($=l==null?void 0:l.validate)==null||$.call(l,"change").catch(oe=>void 0)),a.currentValue=J)},S=A=>{a.userInput=A;const M=A===""?null:Number(A);t(gl,M),C(M,!1)},P=A=>{const M=A!==""?Number(A):"";(Be(M)&&!Number.isNaN(M)||A==="")&&C(M),G(),a.userInput=null},D=()=>{var A,M;(M=(A=o.value)==null?void 0:A.focus)==null||M.call(A)},N=()=>{var A,M;(M=(A=o.value)==null?void 0:A.blur)==null||M.call(A)},Y=A=>{t("focus",A)},K=A=>{var M;a.userInput=null,t("blur",A),i.validateEvent&&((M=l==null?void 0:l.validate)==null||M.call(l,"blur").catch($=>void 0))},G=()=>{a.currentValue!==i.modelValue&&(a.currentValue=i.modelValue)},ie=A=>{document.activeElement===A.target&&A.preventDefault()};return ee(()=>i.modelValue,(A,M)=>{const $=E(A,!0);a.userInput===null&&$!==M&&(a.currentValue=$)},{immediate:!0}),Ge(()=>{var A;const{min:M,max:$,modelValue:Z}=i,J=(A=o.value)==null?void 0:A.input;if(J.setAttribute("role","spinbutton"),Number.isFinite($)?J.setAttribute("aria-valuemax",String($)):J.removeAttribute("aria-valuemax"),Number.isFinite(M)?J.setAttribute("aria-valuemin",String(M)):J.removeAttribute("aria-valuemin"),J.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),J.setAttribute("aria-disabled",String(g.value)),!Be(Z)&&Z!=null){let oe=Number(Z);Number.isNaN(oe)&&(oe=null),t(ln,oe)}J.addEventListener("wheel",ie,{passive:!1})}),Zl(()=>{var A,M;const $=(A=o.value)==null?void 0:A.input;$==null||$.setAttribute("aria-valuenow",`${(M=a.currentValue)!=null?M:""}`)}),e({focus:D,blur:N}),(A,M)=>(w(),R("div",{class:W([v(s).b(),v(s).m(v(f)),v(s).is("disabled",v(g)),v(s).is("without-controls",!A.controls),v(s).is("controls-right",v(d))]),onDragstart:bt(()=>{},["prevent"])},[A.controls?Et((w(),R("span",{key:0,role:"button","aria-label":v(r)("el.inputNumber.decrease"),class:W([v(s).e("decrease"),v(s).is("disabled",v(u))]),onKeydown:li(x,["enter"])},[L(A.$slots,"decrease-icon",{},()=>[z(v(Kt),null,{default:O(()=>[v(d)?(w(),X(v(K0),{key:0})):(w(),X(v(_w),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[v(Wg),x]]):V("v-if",!0),A.controls?Et((w(),R("span",{key:1,role:"button","aria-label":v(r)("el.inputNumber.increase"),class:W([v(s).e("increase"),v(s).is("disabled",v(c))]),onKeydown:li(y,["enter"])},[L(A.$slots,"increase-icon",{},()=>[z(v(Kt),null,{default:O(()=>[v(d)?(w(),X(v(rw),{key:0})):(w(),X(v(yw),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[v(Wg),y]]):V("v-if",!0),z(v(uS),{id:A.id,ref_key:"input",ref:o,type:"number",step:A.step,"model-value":v(p),placeholder:A.placeholder,readonly:A.readonly,disabled:v(g),size:v(f),max:A.max,min:A.min,name:A.name,"aria-label":A.ariaLabel,"validate-event":!1,onKeydown:[li(bt(y,["prevent"]),["up"]),li(bt(x,["prevent"]),["down"])],onBlur:K,onFocus:Y,onInput:S,onChange:P},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var OP=Ne(MP,[["__file","input-number.vue"]]);const CN=nn(OP),Wm=Symbol("ElSelectGroup"),yu=Symbol("ElSelect");function FP(n,e){const t=pe(yu),i=pe(Wm,{disabled:!1}),r=T(()=>c(Un(t.props.modelValue),n.value)),s=T(()=>{var f;if(t.props.multiple){const g=Un((f=t.props.modelValue)!=null?f:[]);return!r.value&&g.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),o=T(()=>n.label||(qt(n.value)?"":n.value)),a=T(()=>n.value||n.label||""),l=T(()=>n.disabled||e.groupDisabled||s.value),u=en(),c=(f=[],g)=>{if(qt(n.value)){const p=t.props.valueKey;return f&&f.some(_=>Ph(ui(_,p))===ui(g,p))}else return f&&f.includes(g)},h=()=>{!n.disabled&&!i.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(u.proxy))},d=f=>{const g=new RegExp(QE(f),"i");e.visible=g.test(o.value)||n.created};return ee(()=>o.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),ee(()=>n.value,(f,g)=>{const{remote:p,valueKey:_}=t.props;if(f!==g&&(t.onOptionDestroy(g,u.proxy),t.onOptionCreate(u.proxy)),!n.created&&!p){if(_&&qt(f)&&qt(g)&&f[_]===g[_])return;t.setSelected()}}),ee(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:t,currentLabel:o,currentValue:a,itemSelected:r,isDisabled:l,hoverItem:h,updateOption:d}}const kP=F({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=$e("select"),t=ma(),i=T(()=>[e.be("dropdown","item"),e.is("disabled",v(a)),e.is("selected",v(o)),e.is("hovering",v(d))]),r=Jn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:o,isDisabled:a,select:l,hoverItem:u,updateOption:c}=FP(n,r),{visible:h,hover:d}=tn(r),f=en().proxy;l.onOptionCreate(f),Fn(()=>{const p=f.value,{selected:_}=l.states,b=(l.props.multiple?_:[_]).some(y=>y.value===f.value);He(()=>{l.states.cachedOptions.get(p)===f&&!b&&l.states.cachedOptions.delete(p)}),l.onOptionDestroy(p,f)});function g(){a.value||l.handleOptionSelect(f)}return{ns:e,id:t,containerKls:i,currentLabel:s,itemSelected:o,isDisabled:a,select:l,hoverItem:u,updateOption:c,visible:h,hover:d,selectOptionClick:g,states:r}}});function DP(n,e,t,i,r,s){return Et((w(),R("li",{id:n.id,class:W(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMouseenter:n.hoverItem,onClick:bt(n.selectOptionClick,["stop"])},[L(n.$slots,"default",{},()=>[I("span",null,se(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"])),[[vn,n.visible]])}var ud=Ne(kP,[["render",DP],["__file","option.vue"]]);const NP=F({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=pe(yu),e=$e("select"),t=T(()=>n.props.popperClass),i=T(()=>n.props.multiple),r=T(()=>n.props.fitInputWidth),s=B("");function o(){var a;s.value=`${(a=n.selectRef)==null?void 0:a.offsetWidth}px`}return Ge(()=>{o(),jn(n.selectRef,o)}),{ns:e,minWidth:s,popperClass:t,isMultiple:i,isFitInputWidth:r}}});function $P(n,e,t,i,r,s){return w(),R("div",{class:W([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:pt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(w(),R("div",{key:0,class:W(n.ns.be("dropdown","header"))},[L(n.$slots,"header")],2)):V("v-if",!0),L(n.$slots,"default"),n.$slots.footer?(w(),R("div",{key:1,class:W(n.ns.be("dropdown","footer"))},[L(n.$slots,"footer")],2)):V("v-if",!0)],6)}var BP=Ne(NP,[["render",$P],["__file","select-dropdown.vue"]]);const GP=11,VP=(n,e)=>{const{t}=Hh(),i=ma(),r=$e("select"),s=$e("input"),o=Jn({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:n.multiple?[]:{},selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),a=B(null),l=B(null),u=B(null),c=B(null),h=B(null),d=B(null),f=B(null),g=B(null),p=B(null),_=B(null),m=B(null),b=B(null),{isComposing:y,handleCompositionStart:x,handleCompositionUpdate:E,handleCompositionEnd:C}=Tm({afterComposition:k=>St(k)}),{wrapperRef:S,isFocused:P,handleBlur:D}=Cm(h,{afterFocus(){n.automaticDropdown&&!N.value&&(N.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(k){var q,Ce;return((q=u.value)==null?void 0:q.isFocusInsideContent(k))||((Ce=c.value)==null?void 0:Ce.isFocusInsideContent(k))},afterBlur(){N.value=!1,o.menuVisibleOnFocus=!1}}),N=B(!1),Y=B(),{form:K,formItem:G}=_u(),{inputId:ie}=Im(n,{formItemContext:G}),{valueOnClear:A,isEmptyValue:M}=nT(n),$=T(()=>n.disabled||(K==null?void 0:K.disabled)),Z=T(()=>Li(n.modelValue)?n.modelValue.length>0:!M(n.modelValue)),J=T(()=>n.clearable&&!$.value&&o.inputHovering&&Z.value),oe=T(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),Ee=T(()=>r.is("reverse",oe.value&&N.value)),j=T(()=>(G==null?void 0:G.validateState)||""),_e=T(()=>tm[j.value]),ce=T(()=>n.remote?300:0),ve=T(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!o.inputValue&&o.options.size===0?!1:n.filterable&&o.inputValue&&o.options.size>0&&Ze.value===0?n.noMatchText||t("el.select.noMatch"):o.options.size===0?n.noDataText||t("el.select.noData"):null),Ze=T(()=>fe.value.filter(k=>k.visible).length),fe=T(()=>{const k=Array.from(o.options.values()),q=[];return o.optionValues.forEach(Ce=>{const Ve=k.findIndex(Qi=>Qi.value===Ce);Ve>-1&&q.push(k[Ve])}),q.length>=k.length?q:k}),Q=T(()=>Array.from(o.cachedOptions.values())),me=T(()=>{const k=fe.value.filter(q=>!q.created).some(q=>q.currentLabel===o.inputValue);return n.filterable&&n.allowCreate&&o.inputValue!==""&&!k}),Ie=()=>{n.filterable&&nt(n.filterMethod)||n.filterable&&n.remote&&nt(n.remoteMethod)||fe.value.forEach(k=>{var q;(q=k.updateOption)==null||q.call(k,o.inputValue)})},Le=rs(),Xe=T(()=>["small"].includes(Le.value)?"small":"default"),ht=T({get(){return N.value&&ve.value!==!1},set(k){N.value=k}}),jt=T(()=>{if(n.multiple&&!Mi(n.modelValue))return Un(n.modelValue).length===0&&!o.inputValue;const k=Li(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||Mi(k)?!o.inputValue:!0}),wn=T(()=>{var k;const q=(k=n.placeholder)!=null?k:t("el.select.placeholder");return n.multiple||!Z.value?q:o.selectedLabel}),At=T(()=>Dc?null:"mouseenter");ee(()=>n.modelValue,(k,q)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(o.inputValue="",rn("")),gn(),!zc(k,q)&&n.validateEvent&&(G==null||G.validate("change").catch(Ce=>void 0))},{flush:"post",deep:!0}),ee(()=>N.value,k=>{k?rn(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",k)}),ee(()=>o.options.entries(),()=>{var k;if(!rt)return;const q=((k=a.value)==null?void 0:k.querySelectorAll("input"))||[];(!n.filterable&&!n.defaultFirstOption&&!Mi(n.modelValue)||!Array.from(q).includes(document.activeElement))&&gn(),n.defaultFirstOption&&(n.filterable||n.remote)&&Ze.value&&Cn()},{flush:"post"}),ee(()=>o.hoveringIndex,k=>{Be(k)&&k>-1?Y.value=fe.value[k]||{}:Y.value={},fe.value.forEach(q=>{q.hover=Y.value===q})}),Ui(()=>{o.isBeforeHide||Ie()});const rn=k=>{o.previousQuery===k||y.value||(o.previousQuery=k,n.filterable&&nt(n.filterMethod)?n.filterMethod(k):n.filterable&&n.remote&&nt(n.remoteMethod)&&n.remoteMethod(k),n.defaultFirstOption&&(n.filterable||n.remote)&&Ze.value?He(Cn):He(Tn))},Cn=()=>{const k=fe.value.filter(Ve=>Ve.visible&&!Ve.disabled&&!Ve.states.groupDisabled),q=k.find(Ve=>Ve.created),Ce=k[0];o.hoveringIndex=_o(fe.value,q||Ce)},gn=()=>{if(n.multiple)o.selectedLabel="";else{const q=Li(n.modelValue)?n.modelValue[0]:n.modelValue,Ce=dt(q);o.selectedLabel=Ce.currentLabel,o.selected=Ce;return}const k=[];Mi(n.modelValue)||Un(n.modelValue).forEach(q=>{k.push(dt(q))}),o.selected=k},dt=k=>{let q;const Ce=Hu(k).toLowerCase()==="object",Ve=Hu(k).toLowerCase()==="null",Qi=Hu(k).toLowerCase()==="undefined";for(let Pr=o.cachedOptions.size-1;Pr>=0;Pr--){const si=Q.value[Pr];if(Ce?ui(si.value,n.valueKey)===ui(k,n.valueKey):si.value===k){q={value:k,currentLabel:si.currentLabel,get isDisabled(){return si.isDisabled}};break}}if(q)return q;const ps=Ce?k.label:!Ve&&!Qi?k:"";return{value:k,currentLabel:ps}},Tn=()=>{n.multiple?o.hoveringIndex=fe.value.findIndex(k=>o.selected.some(q=>ft(q)===ft(k))):o.hoveringIndex=fe.value.findIndex(k=>ft(k)===ft(o.selected))},qe=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},at=()=>{o.calculatorWidth=d.value.getBoundingClientRect().width},lt=()=>{o.collapseItemWidth=m.value.getBoundingClientRect().width},H=()=>{var k,q;(q=(k=u.value)==null?void 0:k.updatePopper)==null||q.call(k)},we=()=>{var k,q;(q=(k=c.value)==null?void 0:k.updatePopper)==null||q.call(k)},ut=()=>{o.inputValue.length>0&&!N.value&&(N.value=!0),rn(o.inputValue)},St=k=>{if(o.inputValue=k.target.value,n.remote)Sn();else return ut()},Sn=UE(()=>{ut()},ce.value),ii=k=>{zc(n.modelValue,k)||e(hu,k)},Rt=k=>HE(k,q=>!o.disabledOptions.has(q)),po=k=>{if(n.multiple&&k.code!==zs.delete&&k.target.value.length<=0){const q=Un(n.modelValue).slice(),Ce=Rt(q);if(Ce<0)return;const Ve=q[Ce];q.splice(Ce,1),e(ln,q),ii(q),e("remove-tag",Ve)}},Wu=(k,q)=>{const Ce=o.selected.indexOf(q);if(Ce>-1&&!$.value){const Ve=Un(n.modelValue).slice();Ve.splice(Ce,1),e(ln,Ve),ii(Ve),e("remove-tag",q.value)}k.stopPropagation(),ri()},Ia=k=>{k.stopPropagation();const q=n.multiple?[]:A.value;if(n.multiple)for(const Ce of o.selected)Ce.isDisabled&&q.push(Ce.value);e(ln,q),ii(q),o.hoveringIndex=-1,N.value=!1,e("clear"),ri()},mo=k=>{var q;if(n.multiple){const Ce=Un((q=n.modelValue)!=null?q:[]).slice(),Ve=_o(Ce,k.value);Ve>-1?Ce.splice(Ve,1):(n.multipleLimit<=0||Ce.length<n.multipleLimit)&&Ce.push(k.value),e(ln,Ce),ii(Ce),k.created&&rn(""),n.filterable&&!n.reserveKeyword&&(o.inputValue="")}else e(ln,k.value),ii(k.value),N.value=!1;ri(),!N.value&&He(()=>{qi(k)})},_o=(k=[],q)=>{if(!qt(q))return k.indexOf(q);const Ce=n.valueKey;let Ve=-1;return k.some((Qi,ps)=>Ph(ui(Qi,Ce))===ui(q,Ce)?(Ve=ps,!0):!1),Ve},qi=k=>{var q,Ce,Ve,Qi,ps;const Oa=Li(k)?k[0]:k;let Pr=null;if(Oa!=null&&Oa.value){const si=fe.value.filter(gf=>gf.value===Oa.value);si.length>0&&(Pr=si[0].$el)}if(u.value&&Pr){const si=(Qi=(Ve=(Ce=(q=u.value)==null?void 0:q.popperRef)==null?void 0:Ce.contentRef)==null?void 0:Ve.querySelector)==null?void 0:Qi.call(Ve,`.${r.be("dropdown","wrap")}`);si&&tw(si,Pr)}(ps=b.value)==null||ps.handleScroll()},La=k=>{o.options.set(k.value,k),o.cachedOptions.set(k.value,k),k.disabled&&o.disabledOptions.set(k.value,k)},vo=(k,q)=>{o.options.get(k)===q&&o.options.delete(k)},Sr=T(()=>{var k,q;return(q=(k=u.value)==null?void 0:k.popperRef)==null?void 0:q.contentRef}),Rr=()=>{o.isBeforeHide=!1,He(()=>qi(o.selected))},ri=()=>{var k;(k=h.value)==null||k.focus()},Aa=()=>{Mt()},Ma=k=>{Ia(k)},Mt=k=>{if(N.value=!1,P.value){const q=new FocusEvent("focus",k);He(()=>D(q))}},Ji=()=>{o.inputValue.length>0?o.inputValue="":N.value=!1},Wt=()=>{$.value||(Dc&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:N.value=!N.value)},Nn=()=>{N.value?fe.value[o.hoveringIndex]&&mo(fe.value[o.hoveringIndex]):Wt()},ft=k=>qt(k.value)?ui(k.value,n.valueKey):k.value,fs=T(()=>fe.value.filter(k=>k.visible).every(k=>k.disabled)),gs=T(()=>n.multiple?n.collapseTags?o.selected.slice(0,n.maxCollapseTags):o.selected:[]),Ot=T(()=>n.multiple?n.collapseTags?o.selected.slice(n.maxCollapseTags):[]:[]),Ut=k=>{if(!N.value){N.value=!0;return}if(!(o.options.size===0||o.filteredOptionsCount===0||y.value)&&!fs.value){k==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):k==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const q=fe.value[o.hoveringIndex];(q.disabled===!0||q.states.groupDisabled===!0||!q.visible)&&Ut(k),He(()=>qi(Y.value))}},$n=()=>{if(!l.value)return 0;const k=window.getComputedStyle(l.value);return Number.parseFloat(k.gap||"6px")},Uu=T(()=>{const k=$n();return{maxWidth:`${m.value&&n.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-k:o.selectionWidth}px`}}),Zv=T(()=>({maxWidth:`${o.selectionWidth}px`})),qv=T(()=>({width:`${Math.max(o.calculatorWidth,GP)}px`}));return jn(l,qe),jn(d,at),jn(p,H),jn(S,H),jn(_,we),jn(m,lt),Ge(()=>{gn()}),{inputId:ie,contentId:i,nsSelect:r,nsInput:s,states:o,isFocused:P,expanded:N,optionsArray:fe,hoverOption:Y,selectSize:Le,filteredOptionsCount:Ze,resetCalculatorWidth:at,updateTooltip:H,updateTagTooltip:we,debouncedOnInputChange:Sn,onInput:St,deletePrevTag:po,deleteTag:Wu,deleteSelected:Ia,handleOptionSelect:mo,scrollToOption:qi,hasModelValue:Z,shouldShowPlaceholder:jt,currentPlaceholder:wn,mouseEnterEventName:At,showClose:J,iconComponent:oe,iconReverse:Ee,validateState:j,validateIcon:_e,showNewOption:me,updateOptions:Ie,collapseTagSize:Xe,setSelected:gn,selectDisabled:$,emptyText:ve,handleCompositionStart:x,handleCompositionUpdate:E,handleCompositionEnd:C,onOptionCreate:La,onOptionDestroy:vo,handleMenuEnter:Rr,focus:ri,blur:Aa,handleClearClick:Ma,handleClickOutside:Mt,handleEsc:Ji,toggleMenu:Wt,selectOption:Nn,getValueKey:ft,navigateOptions:Ut,dropdownMenuVisible:ht,showTagList:gs,collapseTagList:Ot,tagStyle:Uu,collapseTagStyle:Zv,inputStyle:qv,popperRef:Sr,inputRef:h,tooltipRef:u,tagTooltipRef:c,calculatorRef:d,prefixRef:f,suffixRef:g,selectRef:a,wrapperRef:S,selectionRef:l,scrollbarRef:b,menuRef:p,tagMenuRef:_,collapseItemRef:m}};var zP=F({name:"ElOptions",setup(n,{slots:e}){const t=pe(yu);let i=[];return()=>{var r,s;const o=(r=e.default)==null?void 0:r.call(e),a=[];function l(u){Li(u)&&u.forEach(c=>{var h,d,f,g;const p=(h=(c==null?void 0:c.type)||{})==null?void 0:h.name;p==="ElOptionGroup"?l(!Qt(c.children)&&!Li(c.children)&&nt((d=c.children)==null?void 0:d.default)?(f=c.children)==null?void 0:f.default():c.children):p==="ElOption"?a.push((g=c.props)==null?void 0:g.value):Li(c.children)&&l(c.children)})}return o.length&&l((s=o[0])==null?void 0:s.children),zc(a,i)||(i=a,t&&(t.states.optionValues=a)),o}}});const jP=De({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:pu,effect:{type:de(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:de(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ld.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Kr,default:Uh},fitInputWidth:Boolean,suffixIcon:{type:Kr,default:K0},tagType:{...Jc.type,default:"info"},tagEffect:{...Jc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:de(String),values:fu,default:"bottom-start"},fallbackPlacements:{type:de(Array),default:["bottom-start","top-start","right","left"]},...tT,...ao(["ariaLabel"])}),Ug="ElSelect",WP=F({name:Ug,componentName:Ug,components:{ElSelectMenu:BP,ElOption:ud,ElOptions:zP,ElTag:vP,ElScrollbar:CS,ElTooltip:LR,ElIcon:Kt},directives:{ClickOutside:oP},props:jP,emits:[ln,hu,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=VP(n,e);return st(yu,Jn({props:n,states:t.states,optionsArray:t.optionsArray,handleOptionSelect:t.handleOptionSelect,onOptionCreate:t.onOptionCreate,onOptionDestroy:t.onOptionDestroy,selectRef:t.selectRef,setSelected:t.setSelected})),{...t}}});function UP(n,e,t,i,r,s){const o=Dt("el-tag"),a=Dt("el-tooltip"),l=Dt("el-icon"),u=Dt("el-option"),c=Dt("el-options"),h=Dt("el-scrollbar"),d=Dt("el-select-menu"),f=cy("click-outside");return Et((w(),R("div",{ref:"selectRef",class:W([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[dy(n.mouseEnterEventName)]:g=>n.states.inputHovering=!0,onMouseleave:g=>n.states.inputHovering=!1},[z(a,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,onBeforeShow:n.handleMenuEnter,onHide:g=>n.states.isBeforeHide=!1},{default:O(()=>{var g;return[I("div",{ref:"wrapperRef",class:W([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:bt(n.toggleMenu,["prevent"])},[n.$slots.prefix?(w(),R("div",{key:0,ref:"prefixRef",class:W(n.nsSelect.e("prefix"))},[L(n.$slots,"prefix")],2)):V("v-if",!0),I("div",{ref:"selectionRef",class:W([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?L(n.$slots,"tag",{key:0},()=>[(w(!0),R(Pe,null,Ct(n.showTagList,p=>(w(),R("div",{key:n.getValueKey(p),class:W(n.nsSelect.e("selected-item"))},[z(o,{closable:!n.selectDisabled&&!p.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:pt(n.tagStyle),onClose:_=>n.deleteTag(_,p)},{default:O(()=>[I("span",{class:W(n.nsSelect.e("tags-text"))},[L(n.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Lt(se(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(w(),X(a,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:O(()=>[I("div",{ref:"collapseItemRef",class:W(n.nsSelect.e("selected-item"))},[z(o,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:pt(n.collapseTagStyle)},{default:O(()=>[I("span",{class:W(n.nsSelect.e("tags-text"))}," + "+se(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:O(()=>[I("div",{ref:"tagMenuRef",class:W(n.nsSelect.e("selection"))},[(w(!0),R(Pe,null,Ct(n.collapseTagList,p=>(w(),R("div",{key:n.getValueKey(p),class:W(n.nsSelect.e("selected-item"))},[z(o,{class:"in-tooltip",closable:!n.selectDisabled&&!p.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:_=>n.deleteTag(_,p)},{default:O(()=>[I("span",{class:W(n.nsSelect.e("tags-text"))},[L(n.$slots,"label",{label:p.currentLabel,value:p.value},()=>[Lt(se(p.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):V("v-if",!0)]):V("v-if",!0),n.selectDisabled?V("v-if",!0):(w(),R("div",{key:1,class:W([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Et(I("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":p=>n.states.inputValue=p,type:"text",name:n.name,class:W([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:pt(n.inputStyle),role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((g=n.hoverOption)==null?void 0:g.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[li(bt(p=>n.navigateOptions("next"),["stop","prevent"]),["down"]),li(bt(p=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),li(bt(n.handleEsc,["stop","prevent"]),["esc"]),li(bt(n.selectOption,["stop","prevent"]),["enter"]),li(bt(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:bt(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[hy,n.states.inputValue]]),n.filterable?(w(),R("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:W(n.nsSelect.e("input-calculator")),textContent:se(n.states.inputValue)},null,10,["textContent"])):V("v-if",!0)],2)),n.shouldShowPlaceholder?(w(),R("div",{key:2,class:W([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?L(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[I("span",null,se(n.currentPlaceholder),1)]):(w(),R("span",{key:1},se(n.currentPlaceholder),1))],2)):V("v-if",!0)],2),I("div",{ref:"suffixRef",class:W(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(w(),X(l,{key:0,class:W([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:O(()=>[(w(),X(Qe(n.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),n.showClose&&n.clearIcon?(w(),X(l,{key:1,class:W([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:O(()=>[(w(),X(Qe(n.clearIcon)))]),_:1},8,["class","onClick"])):V("v-if",!0),n.validateState&&n.validateIcon?(w(),X(l,{key:2,class:W([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:O(()=>[(w(),X(Qe(n.validateIcon)))]),_:1},8,["class"])):V("v-if",!0)],2)],10,["onClick"])]}),content:O(()=>[z(d,{ref:"menuRef"},{default:O(()=>[n.$slots.header?(w(),R("div",{key:0,class:W(n.nsSelect.be("dropdown","header")),onClick:bt(()=>{},["stop"])},[L(n.$slots,"header")],10,["onClick"])):V("v-if",!0),Et(z(h,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:W([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:O(()=>[n.showNewOption?(w(),X(u,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):V("v-if",!0),z(c,null,{default:O(()=>[L(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[vn,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(w(),R("div",{key:1,class:W(n.nsSelect.be("dropdown","loading"))},[L(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(w(),R("div",{key:2,class:W(n.nsSelect.be("dropdown","empty"))},[L(n.$slots,"empty",{},()=>[I("span",null,se(n.emptyText),1)])],2)):V("v-if",!0),n.$slots.footer?(w(),R("div",{key:3,class:W(n.nsSelect.be("dropdown","footer")),onClick:bt(()=>{},["stop"])},[L(n.$slots,"footer")],10,["onClick"])):V("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","onBeforeShow","onHide"])],16,["onMouseleave"])),[[f,n.handleClickOutside,n.popperRef]])}var HP=Ne(WP,[["render",UP],["__file","select.vue"]]);const XP=F({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=$e("select"),t=B(null),i=en(),r=B([]);st(Wm,Jn({...tn(n)}));const s=T(()=>r.value.some(u=>u.visible===!0)),o=u=>{var c,h;return((c=u.type)==null?void 0:c.name)==="ElOption"&&!!((h=u.component)!=null&&h.proxy)},a=u=>{const c=Un(u),h=[];return c.forEach(d=>{var f,g;o(d)?h.push(d.component.proxy):(f=d.children)!=null&&f.length?h.push(...a(d.children)):(g=d.component)!=null&&g.subTree&&h.push(...a(d.component.subTree))}),h},l=()=>{r.value=a(i.subTree)};return Ge(()=>{l()}),Gy(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:s,ns:e}}});function KP(n,e,t,i,r,s){return Et((w(),R("ul",{ref:"groupRef",class:W(n.ns.be("group","wrap"))},[I("li",{class:W(n.ns.be("group","title"))},se(n.label),3),I("li",null,[I("ul",{class:W(n.ns.b("group"))},[L(n.$slots,"default")],2)])],2)),[[vn,n.visible]])}var Um=Ne(XP,[["render",KP],["__file","option-group.vue"]]);const TN=nn(HP,{Option:ud,OptionGroup:Um}),SN=cu(ud);cu(Um);function YP(n){let e;const t=B(!1),i=Jn({...n,originalPosition:"",originalOverflow:"",visible:!1});function r(d){i.text=d}function s(){const d=i.parent,f=h.ns;if(!d.vLoadingAddClassList){let g=d.getAttribute("loading-number");g=Number.parseInt(g)-1,g?d.setAttribute("loading-number",g.toString()):(Rl(d,f.bm("parent","relative")),d.removeAttribute("loading-number")),Rl(d,f.bm("parent","hidden"))}o(),c.unmount()}function o(){var d,f;(f=(d=h.$el)==null?void 0:d.parentNode)==null||f.removeChild(h.$el)}function a(){var d;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=setTimeout(l,400),i.visible=!1,(d=n.closed)==null||d.call(n))}function l(){if(!t.value)return;const d=i.parent;t.value=!1,d.vLoadingAddClassList=void 0,s()}const u=F({name:"ElLoading",setup(d,{expose:f}){const{ns:g,zIndex:p}=Pm("loading");return f({ns:g,zIndex:p}),()=>{const _=i.spinner||i.svg,m=yo("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",..._?{innerHTML:_}:{}},[yo("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=i.text?yo("p",{class:g.b("text")},[i.text]):void 0;return yo(Wi,{name:g.b("fade"),onAfterLeave:l},{default:O(()=>[Et(z("div",{style:{backgroundColor:i.background||""},class:[g.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[yo("div",{class:g.b("spinner")},[m,b])]),[[vn,i.visible]])])})}}}),c=fy(u),h=c.mount(document.createElement("div"));return{...tn(i),setText:r,removeElLoadingChild:o,close:a,handleAfterLeave:l,vm:h,get $el(){return h.$el}}}let ja;const ZP=function(n={}){if(!rt)return;const e=qP(n);if(e.fullscreen&&ja)return ja;const t=YP({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(ja=void 0)}});JP(e,e.parent,t),Hg(e,e.parent,t),e.parent.vLoadingAddClassList=()=>Hg(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),He(()=>t.visible.value=e.visible),e.fullscreen&&(ja=t),t},qP=n=>{var e,t,i,r;let s;return Qt(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(i=n.lock)!=null?i:!1,customClass:n.customClass||"",visible:(r=n.visible)!=null?r:!0,beforeClose:n.beforeClose,closed:n.closed,target:s}},JP=async(n,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,r={};if(n.fullscreen)t.originalPosition.value=xo(document.body,"position"),t.originalOverflow.value=xo(document.body,"overflow"),r.zIndex=i();else if(n.parent===document.body){t.originalPosition.value=xo(document.body,"position"),await He();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";r[s]=`${n.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(xo(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])r[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=xo(e,"position");for(const[s,o]of Object.entries(r))t.$el.style[s]=o},Hg=(n,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Rl(e,i.bm("parent","relative")):rg(e,i.bm("parent","relative")),n.fullscreen&&n.lock?rg(e,i.bm("parent","hidden")):Rl(e,i.bm("parent","hidden"))},vl=Symbol("ElLoading"),Xg=(n,e)=>{var t,i,r,s;const o=e.instance,a=d=>qt(e.value)?e.value[d]:void 0,l=d=>{const f=Qt(d)&&(o==null?void 0:o[d])||d;return f&&B(f)},u=d=>l(a(d)||n.getAttribute(`element-loading-${gy(d)}`)),c=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,h={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(i=a("target"))!=null?i:c?void 0:n,body:(r=a("body"))!=null?r:e.modifiers.body,lock:(s=a("lock"))!=null?s:e.modifiers.lock};n[vl]={options:h,instance:ZP(h)}},QP=(n,e)=>{for(const t of Object.keys(e))f0(e[t])&&(e[t].value=n[t])},RN={mounted(n,e){e.value&&Xg(n,e)},updated(n,e){const t=n[vl];e.oldValue!==e.value&&(e.value&&!e.oldValue?Xg(n,e):e.value&&e.oldValue?qt(e.value)&&QP(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[vl])==null||e.instance.close(),n[vl]=null}},Hm=["success","info","warning","error"],kt=Fr({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:rt?document.body:void 0}),e3=De({customClass:{type:String,default:kt.customClass},center:{type:Boolean,default:kt.center},dangerouslyUseHTMLString:{type:Boolean,default:kt.dangerouslyUseHTMLString},duration:{type:Number,default:kt.duration},icon:{type:Kr,default:kt.icon},id:{type:String,default:kt.id},message:{type:de([String,Object,Function]),default:kt.message},onClose:{type:de(Function),default:kt.onClose},showClose:{type:Boolean,default:kt.showClose},type:{type:String,values:Hm,default:kt.type},plain:{type:Boolean,default:kt.plain},offset:{type:Number,default:kt.offset},zIndex:{type:Number,default:kt.zIndex},grouping:{type:Boolean,default:kt.grouping},repeatNum:{type:Number,default:kt.repeatNum}}),t3={destroy:()=>!0},Kn=py([]),n3=n=>{const e=Kn.findIndex(r=>r.id===n),t=Kn[e];let i;return e>0&&(i=Kn[e-1]),{current:t,prev:i}},i3=n=>{const{prev:e}=n3(n);return e?e.vm.exposed.bottom.value:0},r3=(n,e)=>Kn.findIndex(i=>i.id===n)>0?16:e,s3=F({name:"ElMessage"}),o3=F({...s3,props:e3,emits:t3,setup(n,{expose:e}){const t=n,{Close:i}=Tw,{ns:r,zIndex:s}=Pm("message"),{currentZIndex:o,nextZIndex:a}=s,l=B(),u=B(!1),c=B(0);let h;const d=T(()=>t.type?t.type==="error"?"danger":t.type:"info"),f=T(()=>{const S=t.type;return{[r.bm("icon",S)]:S&&sg[S]}}),g=T(()=>t.icon||sg[t.type]||""),p=T(()=>i3(t.id)),_=T(()=>r3(t.id,t.offset)+p.value),m=T(()=>c.value+_.value),b=T(()=>({top:`${_.value}px`,zIndex:o.value}));function y(){t.duration!==0&&({stop:h}=My(()=>{E()},t.duration))}function x(){h==null||h()}function E(){u.value=!1}function C({code:S}){S===zs.esc&&E()}return Ge(()=>{y(),a(),u.value=!0}),ee(()=>t.repeatNum,()=>{x(),y()}),fi(document,"keydown",C),jn(l,()=>{c.value=l.value.getBoundingClientRect().height}),e({visible:u,bottom:m,close:E}),(S,P)=>(w(),X(Wi,{name:v(r).b("fade"),onBeforeLeave:S.onClose,onAfterLeave:D=>S.$emit("destroy"),persisted:""},{default:O(()=>[Et(I("div",{id:S.id,ref_key:"messageRef",ref:l,class:W([v(r).b(),{[v(r).m(S.type)]:S.type},v(r).is("center",S.center),v(r).is("closable",S.showClose),v(r).is("plain",S.plain),S.customClass]),style:pt(v(b)),role:"alert",onMouseenter:x,onMouseleave:y},[S.repeatNum>1?(w(),X(v(kR),{key:0,value:S.repeatNum,type:v(d),class:W(v(r).e("badge"))},null,8,["value","type","class"])):V("v-if",!0),v(g)?(w(),X(v(Kt),{key:1,class:W([v(r).e("icon"),v(f)])},{default:O(()=>[(w(),X(Qe(v(g))))]),_:1},8,["class"])):V("v-if",!0),L(S.$slots,"default",{},()=>[S.dangerouslyUseHTMLString?(w(),R(Pe,{key:1},[V(" Caution here, message could've been compromised, never use user's input as message "),I("p",{class:W(v(r).e("content")),innerHTML:S.message},null,10,["innerHTML"])],2112)):(w(),R("p",{key:0,class:W(v(r).e("content"))},se(S.message),3))]),S.showClose?(w(),X(v(Kt),{key:2,class:W(v(r).e("closeBtn")),onClick:bt(E,["stop"])},{default:O(()=>[z(v(i))]),_:1},8,["class","onClick"])):V("v-if",!0)],46,["id"]),[[vn,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var a3=Ne(o3,[["__file","message.vue"]]);let l3=1;const Xm=n=>{const e=!n||Qt(n)||p0(n)||nt(n)?{message:n}:n,t={...kt,...e};if(!t.appendTo)t.appendTo=document.body;else if(Qt(t.appendTo)){let i=document.querySelector(t.appendTo);Vr(i)||(i=document.body),t.appendTo=i}return t},u3=n=>{const e=Kn.indexOf(n);if(e===-1)return;Kn.splice(e,1);const{handler:t}=n;t.close()},c3=({appendTo:n,...e},t)=>{const i=`message_${l3++}`,r=e.onClose,s=document.createElement("div"),o={...e,id:i,onClose:()=>{r==null||r(),u3(c)},onDestroy:()=>{mf(null,s)}},a=z(a3,o,nt(o.message)||p0(o.message)?{default:nt(o.message)?o.message:()=>o.message}:null);a.appContext=t||Ks._context,mf(a,s),n.appendChild(s.firstElementChild);const l=a.component,c={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return c},Ks=(n={},e)=>{if(!rt)return{close:()=>{}};if(Be(Eg.max)&&Kn.length>=Eg.max)return{close:()=>{}};const t=Xm(n);if(t.grouping&&Kn.length){const r=Kn.find(({vnode:s})=>{var o;return((o=s.props)==null?void 0:o.message)===t.message});if(r)return r.props.repeatNum+=1,r.props.type=t.type,r.handler}const i=c3(t,e);return Kn.push(i),i.handler};Hm.forEach(n=>{Ks[n]=(e={},t)=>{const i=Xm(e);return Ks({...i,type:n},t)}});function h3(n){for(const e of Kn)(!n||n===e.props.type)&&e.handler.close()}Ks.closeAll=h3;Ks._context=null;const PN=Sw(Ks,"$message");class En{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function d3(n){n.stopPropagation()}const Zr={PROPERTYCHANGE:"propertychange"};class bu{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function f3(n,e,t){let i,r;t=t||vr;let s=0,o=n.length,a=!1;for(;s<o;)i=s+(o-s>>1),r=+t(n[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function vr(n,e){return n>e?1:n<e?-1:0}function cd(n,e,t){if(n[0]<=e)return 0;const i=n.length;if(e<=n[i-1])return i-1;if(typeof t=="function"){for(let r=1;r<i;++r){const s=n[r];if(s===e)return r;if(s<e)return t(e,n[r-1],s)>0?r-1:r}return i-1}if(t>0){for(let r=1;r<i;++r)if(n[r]<e)return r-1;return i-1}if(t<0){for(let r=1;r<i;++r)if(n[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(n[r]==e)return r;if(n[r]<e)return n[r-1]-e<e-n[r]?r-1:r}return i-1}function g3(n,e,t){for(;e<t;){const i=n[e];n[e]=n[t],n[t]=i,++e,--t}}function Pn(n,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let r=0;r<i;r++)n[n.length]=t[r]}function bi(n,e){const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function p3(n,e,t){const i=e||vr;return n.every(function(r,s){if(s===0)return!0;const o=i(n[s-1],r);return!(o>0||o===0)})}function Bi(){return!0}function ss(){return!1}function Ys(){}function Km(n){let e=!1,t,i,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!bi(s,i))&&(e=!0,r=this,i=s,t=n.apply(this,arguments)),t}}function os(n){for(const e in n)delete n[e]}function qr(n){let e;for(e in n)return!1;return!e}class xu extends bu{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new En(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,Ys);delete o[i]}return l}disposeInternal(){this.listeners_&&os(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=Ys,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const ue={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function he(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function Yo(n,e,t,i){return he(n,e,t,i,!0)}function Ae(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),os(n))}class va extends xu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ue.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=he(this,e[s],t);return r}return he(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=Yo(this,e[s],t)}else i=Yo(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)m3(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}va.prototype.on;va.prototype.once;va.prototype.un;function m3(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Ae(n[e]);else Ae(n)}function ge(){throw new Error("Unimplemented abstract method.")}let _3=0;function ne(n){return n.ol_uid||(n.ol_uid=String(++_3))}class Kg extends En{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class ti extends va{constructor(e){super(),this.on,this.once,this.un,ne(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Kg(i,e,t)),i=Zr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Kg(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],qr(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const ai={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},yr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",v3=yr.includes("firefox"),y3=yr.includes("safari")&&!yr.includes("chrom"),b3=y3&&(yr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(yr)),x3=yr.includes("webkit")&&!yr.includes("edge"),Ym=yr.includes("macintosh"),Zm=typeof devicePixelRatio<"u"?devicePixelRatio:1,hd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,qm=typeof Image<"u"&&Image.prototype.decode,Jm=function(){let n=!1;try{const e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n}();function Vt(n,e,t,i){let r;return t&&t.length?r=t.shift():hd?r=new OffscreenCanvas(n||300,e||300):r=document.createElement("canvas"),n&&(r.width=n),e&&(r.height=e),r.getContext("2d",i)}function Eu(n){const e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function E3(n){let e=n.offsetWidth;const t=getComputedStyle(n);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function w3(n){let e=n.offsetHeight;const t=getComputedStyle(n);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function Zs(n,e){const t=e.parentNode;t&&t.replaceChild(n,e)}function Ll(n){return n&&n.parentNode?n.parentNode.removeChild(n):null}function Qm(n){for(;n.lastChild;)n.removeChild(n.lastChild)}function C3(n,e){const t=n.childNodes;for(let i=0;;++i){const r=t[i],s=e[i];if(!r&&!s)break;if(r!==s){if(!r){n.appendChild(s);continue}if(!s){n.removeChild(r),--i;continue}n.insertBefore(s,r)}}}class xi extends ti{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Ll(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Ll(this.element);for(let t=0,i=this.listenerKeys.length;t<i;++t)Ae(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ys&&this.listenerKeys.push(he(e,ai.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const Wa="ol-hidden",T3="ol-selectable",yi="ol-unselectable",Yg="ol-unsupported",as="ol-control",Al="ol-collapsed",S3=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Zg=["style","variant","weight","size","lineHeight","family"],e_=function(n){const e=n.match(S3);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=Zg.length;i<r;++i){const s=e[i+1];s!==void 0&&(t[Zg[i]]=s)}return t.families=t.family.split(/,\s?/),t};class t_ extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1);const u=t+" "+yi+" "+as+(this.collapsed_&&this.collapsible_?" "+Al:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!bi(t,this.renderedAttributions_)){Qm(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Al),this.collapsed_?Zs(this.collapseLabel_,this.label_):Zs(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const tt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},qg=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Jg={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class R3 extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const r=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=r,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${yi} ${as}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Qg(t))if(ep(t))I3(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?P3(i):n_(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=ep(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Zs(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Jg.ENTERFULLSCREEN)):(Zs(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Jg.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(tt.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(tt.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,r=e.length;i<r;++i)Ae(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();Qg(i)?this.element.classList.remove(Yg):this.element.classList.add(Yg);for(let r=0,s=qg.length;r<s;++r)e.push(he(i,qg[r],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Qg(n){const e=n.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&n.fullscreenEnabled)}function ep(n){return!!(n.webkitIsFullScreen||n.fullscreenElement)}function n_(n){n.requestFullscreen?n.requestFullscreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()}function P3(n){n.webkitRequestFullscreen?n.webkitRequestFullscreen():n_(n)}function I3(n){n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen&&n.webkitExitFullscreen()}const L3=R3,ci={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},qs={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class i_{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||qs[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const ya=6378137,Ms=Math.PI*ya,A3=[-Ms,-Ms,Ms,Ms],M3=[-180,-85,180,85],Ua=ya*Math.log(Math.tan(Math.PI/2));class ys extends i_{constructor(e){super({code:e,units:"m",extent:A3,global:!0,worldExtent:M3,getPointResolution:function(t,i){return t/Math.cosh(i[1]/ya)}})}}const tp=[new ys("EPSG:3857"),new ys("EPSG:102100"),new ys("EPSG:102113"),new ys("EPSG:900913"),new ys("http://www.opengis.net/def/crs/EPSG/0/3857"),new ys("http://www.opengis.net/gml/srs/epsg.xml#3857")];function O3(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t){e[r]=Ms*n[r]/180;let s=ya*Math.log(Math.tan(Math.PI*(+n[r+1]+90)/360));s>Ua?s=Ua:s<-Ua&&(s=-Ua),e[r+1]=s}return e}function F3(n,e,t){const i=n.length;t=t>1?t:2,e===void 0&&(t>2?e=n.slice():e=new Array(i));for(let r=0;r<i;r+=t)e[r]=180*n[r]/Ms,e[r+1]=360*Math.atan(Math.exp(n[r+1]/ya))/Math.PI-90;return e}const k3=6378137,np=[-180,-90,180,90],D3=Math.PI*k3/180;class Lr extends i_{constructor(e,t){super({code:e,units:"degrees",extent:np,axisOrientation:t,global:!0,metersPerUnit:D3,worldExtent:np})}}const ip=[new Lr("CRS:84"),new Lr("EPSG:4326","neu"),new Lr("urn:ogc:def:crs:OGC:1.3:CRS84"),new Lr("urn:ogc:def:crs:OGC:2:84"),new Lr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Lr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Lr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Qc={};function N3(n){return Qc[n]||Qc[n.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function $3(n,e){Qc[n]=e}let Ns={};function Ml(n,e,t){const i=n.getCode(),r=e.getCode();i in Ns||(Ns[i]={}),Ns[i][r]=t}function B3(n,e){let t;return n in Ns&&e in Ns[n]&&(t=Ns[n][e]),t}const yt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ht(n){const e=zt();for(let t=0,i=n.length;t<i;++t)No(e,n[t]);return e}function ls(n,e,t){return t?(t[0]=n[0]-e,t[1]=n[1]-e,t[2]=n[2]+e,t[3]=n[3]+e,t):[n[0]-e,n[1]-e,n[2]+e,n[3]+e]}function r_(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n.slice()}function us(n,e,t){let i,r;return e<n[0]?i=n[0]-e:n[2]<e?i=e-n[2]:i=0,t<n[1]?r=n[1]-t:n[3]<t?r=t-n[3]:r=0,i*i+r*r}function wu(n,e){return dd(n,e[0],e[1])}function cr(n,e){return n[0]<=e[0]&&e[2]<=n[2]&&n[1]<=e[1]&&e[3]<=n[3]}function dd(n,e,t){return n[0]<=e&&e<=n[2]&&n[1]<=t&&t<=n[3]}function eh(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=e[0],a=e[1];let l=yt.UNKNOWN;return o<t?l=l|yt.LEFT:o>r&&(l=l|yt.RIGHT),a<i?l=l|yt.BELOW:a>s&&(l=l|yt.ABOVE),l===yt.UNKNOWN&&(l=yt.INTERSECTING),l}function zt(){return[1/0,1/0,-1/0,-1/0]}function Gi(n,e,t,i,r){return r?(r[0]=n,r[1]=e,r[2]=t,r[3]=i,r):[n,e,t,i]}function ba(n){return Gi(1/0,1/0,-1/0,-1/0,n)}function $s(n,e){const t=n[0],i=n[1];return Gi(t,i,t,i,e)}function fd(n,e,t,i,r){const s=ba(r);return s_(s,n,e,t,i)}function Jr(n,e){return n[0]==e[0]&&n[2]==e[2]&&n[1]==e[1]&&n[3]==e[3]}function gd(n,e){return e[0]<n[0]&&(n[0]=e[0]),e[2]>n[2]&&(n[2]=e[2]),e[1]<n[1]&&(n[1]=e[1]),e[3]>n[3]&&(n[3]=e[3]),n}function No(n,e){e[0]<n[0]&&(n[0]=e[0]),e[0]>n[2]&&(n[2]=e[0]),e[1]<n[1]&&(n[1]=e[1]),e[1]>n[3]&&(n[3]=e[1])}function s_(n,e,t,i,r){for(;t<i;t+=r)G3(n,e[t],e[t+1]);return n}function G3(n,e,t){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}function pd(n,e){let t;return t=e(Cu(n)),t||(t=e(xa(n)),t)||(t=e(Tu(n)),t)||(t=e(Ki(n)),t)?t:!1}function th(n){let e=0;return Su(n)||(e=ke(n)*fn(n)),e}function Cu(n){return[n[0],n[1]]}function xa(n){return[n[2],n[1]]}function Vi(n){return[(n[0]+n[2])/2,(n[1]+n[3])/2]}function V3(n,e){let t;if(e==="bottom-left")t=Cu(n);else if(e==="bottom-right")t=xa(n);else if(e==="top-left")t=Ki(n);else if(e==="top-right")t=Tu(n);else throw new Error("Invalid corner");return t}function nh(n,e,t,i,r){const[s,o,a,l,u,c,h,d]=ih(n,e,t,i);return Gi(Math.min(s,a,u,h),Math.min(o,l,c,d),Math.max(s,a,u,h),Math.max(o,l,c,d),r)}function ih(n,e,t,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,u=r*a,c=s*o,h=s*a,d=n[0],f=n[1];return[d-l+h,f-u-c,d-l-h,f-u+c,d+l-h,f+u+c,d+l+h,f+u-c,d-l+h,f-u-c]}function fn(n){return n[3]-n[1]}function $o(n,e,t){const i=t||zt();return Yt(n,e)?(n[0]>e[0]?i[0]=n[0]:i[0]=e[0],n[1]>e[1]?i[1]=n[1]:i[1]=e[1],n[2]<e[2]?i[2]=n[2]:i[2]=e[2],n[3]<e[3]?i[3]=n[3]:i[3]=e[3]):ba(i),i}function Ki(n){return[n[0],n[3]]}function Tu(n){return[n[2],n[3]]}function ke(n){return n[2]-n[0]}function Yt(n,e){return n[0]<=e[2]&&n[2]>=e[0]&&n[1]<=e[3]&&n[3]>=e[1]}function Su(n){return n[2]<n[0]||n[3]<n[1]}function z3(n,e){return e?(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e):n}function j3(n,e){const t=(n[2]-n[0])/2*(e-1),i=(n[3]-n[1])/2*(e-1);n[0]-=t,n[2]+=t,n[1]-=i,n[3]+=i}function W3(n,e,t){let i=!1;const r=eh(n,e),s=eh(n,t);if(r===yt.INTERSECTING||s===yt.INTERSECTING)i=!0;else{const o=n[0],a=n[1],l=n[2],u=n[3],c=e[0],h=e[1],d=t[0],f=t[1],g=(f-h)/(d-c);let p,_;s&yt.ABOVE&&!(r&yt.ABOVE)&&(p=d-(f-u)/g,i=p>=o&&p<=l),!i&&s&yt.RIGHT&&!(r&yt.RIGHT)&&(_=f-(d-l)*g,i=_>=a&&_<=u),!i&&s&yt.BELOW&&!(r&yt.BELOW)&&(p=d-(f-a)/g,i=p>=o&&p<=l),!i&&s&yt.LEFT&&!(r&yt.LEFT)&&(_=f-(d-o)*g,i=_>=a&&_<=u)}return i}function o_(n,e){const t=e.getExtent(),i=Vi(n);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const r=ke(t),o=Math.floor((i[0]-t[0])/r)*r;n[0]-=o,n[2]-=o}return n}function U3(n,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(n[0])||!isFinite(n[2]))return[[t[0],n[1],t[2],n[3]]];o_(n,e);const i=ke(t);if(ke(n)>i)return[[t[0],n[1],t[2],n[3]]];if(n[0]<t[0])return[[n[0]+i,n[1],t[2],n[3]],[t[0],n[1],n[2],n[3]]];if(n[2]>t[2])return[[n[0],n[1],t[2],n[3]],[t[0],n[1],n[2]-i,n[3]]]}return[n]}function Ke(n,e,t){return Math.min(Math.max(n,e),t)}function H3(n,e,t,i,r,s){const o=r-t,a=s-i;if(o!==0||a!==0){const l=((n-t)*o+(e-i)*a)/(o*o+a*a);l>1?(t=r,i=s):l>0&&(t+=o*l,i+=a*l)}return Fi(n,e,t,i)}function Fi(n,e,t,i){const r=t-n,s=i-e;return r*r+s*s}function X3(n){const e=n.length;for(let i=0;i<e;i++){let r=i,s=Math.abs(n[i][i]);for(let a=i+1;a<e;a++){const l=Math.abs(n[a][i]);l>s&&(s=l,r=a)}if(s===0)return null;const o=n[r];n[r]=n[i],n[i]=o;for(let a=i+1;a<e;a++){const l=-n[a][i]/n[i][i];for(let u=i;u<e+1;u++)i==u?n[a][u]=0:n[a][u]+=l*n[i][u]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=n[i][e]/n[i][i];for(let r=i-1;r>=0;r--)n[r][e]-=n[r][i]*t[i]}return t}function yl(n){return n*Math.PI/180}function jr(n,e){const t=n%e;return t*e<0?t+e:t}function _n(n,e,t){return n+t*(e-n)}function Ru(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function Ha(n,e){return Math.floor(Ru(n,e))}function Xa(n,e){return Math.ceil(Ru(n,e))}function a_(n,e){return n[0]+=+e[0],n[1]+=+e[1],n}function K3(n,e){const t=e.getRadius(),i=e.getCenter(),r=i[0],s=i[1],o=n[0],a=n[1];let l=o-r;const u=a-s;l===0&&u===0&&(l=1);const c=Math.sqrt(l*l+u*u),h=r+t*l/c,d=s+t*u/c;return[h,d]}function md(n,e){const t=n[0],i=n[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],u=s[1],c=l-o,h=u-a,d=c===0&&h===0?0:(c*(t-o)+h*(i-a))/(c*c+h*h||0);let f,g;return d<=0?(f=o,g=a):d>=1?(f=l,g=u):(f=o+d*c,g=a+d*h),[f,g]}function IN(n){return function(e){return q3(e,n)}}function Y3(n,e,t){return n?e.replace("{x}",n[0].toFixed(t)).replace("{y}",n[1].toFixed(t)):""}function zn(n,e){let t=!0;for(let i=n.length-1;i>=0;--i)if(n[i]!=e[i]){t=!1;break}return t}function _d(n,e){const t=Math.cos(e),i=Math.sin(e),r=n[0]*t-n[1]*i,s=n[1]*t+n[0]*i;return n[0]=r,n[1]=s,n}function l_(n,e){return n[0]*=e,n[1]*=e,n}function ki(n,e){const t=n[0]-e[0],i=n[1]-e[1];return t*t+i*i}function Ol(n,e){return Math.sqrt(ki(n,e))}function Z3(n,e){return ki(n,md(n,e))}function q3(n,e){return Y3(n,"{x}, {y}",e)}function vd(n,e){if(e.canWrapX()){const t=ke(e.getExtent()),i=J3(n,e,t);i&&(n[0]-=i*t)}return n}function J3(n,e,t){const i=e.getExtent();let r=0;return e.canWrapX()&&(n[0]<i[0]||n[0]>i[2])&&(t=t||ke(i),r=Math.floor((n[0]-i[0])/t)),r}const Q3=63710088e-1;function rp(n,e,t){t=t||Q3;const i=yl(n[1]),r=yl(e[1]),s=(r-i)/2,o=yl(e[0]-n[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function u_(...n){console.warn(...n)}let rh=!0;function e4(n){rh=!1}function yd(n,e){if(e!==void 0){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];e=e}else e=n.slice();return e}function bd(n,e){if(e!==void 0&&n!==e){for(let t=0,i=n.length;t<i;++t)e[t]=n[t];n=e}return n}function t4(n){$3(n.getCode(),n),Ml(n,n,yd)}function n4(n){n.forEach(t4)}function it(n){return typeof n=="string"?N3(n):n||null}function Fl(n,e,t,i){n=it(n);let r;const s=n.getPointResolutionFunc();if(s){if(r=s(e,t),i&&i!==n.getUnits()){const o=n.getMetersPerUnit();o&&(r=r*o/qs[i])}}else{const o=n.getUnits();if(o=="degrees"&&!i||i=="degrees")r=e;else{const a=Pu(n,it("EPSG:4326"));if(a===bd&&o!=="degrees")r=e*n.getMetersPerUnit();else{let u=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];u=a(u,u,2);const c=rp(u.slice(0,2),u.slice(2,4)),h=rp(u.slice(4,6),u.slice(6,8));r=(c+h)/2}const l=i?qs[i]:n.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function sp(n){n4(n),n.forEach(function(e){n.forEach(function(t){e!==t&&Ml(e,t,yd)})})}function i4(n,e,t,i){n.forEach(function(r){e.forEach(function(s){Ml(r,s,t),Ml(s,r,i)})})}function xd(n,e){return n?typeof n=="string"?it(n):n:it(e)}function kr(n,e){if(n===e)return!0;const t=n.getUnits()===e.getUnits();return(n.getCode()===e.getCode()||Pu(n,e)===yd)&&t}function Pu(n,e){const t=n.getCode(),i=e.getCode();let r=B3(t,i);return r||(r=bd),r}function Zo(n,e){const t=it(n),i=it(e);return Pu(t,i)}function r4(n,e,t){return Zo(e,t)(n,void 0,n.length)}function Qr(n,e){return n}function Ue(n,e){return rh&&!zn(n,[0,0])&&n[0]>=-180&&n[0]<=180&&n[1]>=-90&&n[1]<=90&&(rh=!1,u_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),n}function Iu(n,e){return n}function hr(n,e){return n}function s4(){sp(tp),sp(ip),i4(ip,tp,O3,F3)}s4();const rc="projection",op="coordinateFormat";class o4 extends xi{constructor(e){e=e||{};const t=document.createElement("div");t.className=e.className!==void 0?e.className:"ol-mouse-position",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(rc,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.renderOnMouseOut_=e.placeholder!==void 0,this.placeholder_=this.renderOnMouseOut_?e.placeholder:"&#160;",this.renderedHTML_=t.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=e.wrapX!==!1}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(op)}getProjection(){return this.get(rc)}handleMouseMove(e){const t=this.getMap();this.updateHTML_(t.getEventPixel(e))}handleMouseOut(e){this.updateHTML_(null)}setMap(e){if(super.setMap(e),e){const t=e.getViewport();this.listenerKeys.push(he(t,ci.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(he(t,ci.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(e){this.set(op,e)}setProjection(e){this.set(rc,it(e))}updateHTML_(e){let t=this.placeholder_;if(e&&this.mapProjection_){if(!this.transform_){const s=this.getProjection();s?this.transform_=Pu(this.mapProjection_,s):this.transform_=bd}const r=this.getMap().getCoordinateFromPixelInternal(e);if(r){if(this.transform_(r,r),this.wrapX_){const o=this.getProjection()||this.mapProjection_;vd(r,o)}const s=this.getCoordinateFormat();s?t=s(r):t=r.toString()}}(!this.renderedHTML_||t!==this.renderedHTML_)&&(this.element.innerHTML=t,this.renderedHTML_=t)}render(e){const t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}}const a4=o4,Je={ADD:"add",REMOVE:"remove"},ap={LENGTH:"length"};class Ka extends En{constructor(e,t,i){super(e),this.element=t,this.index=i}}class Jt extends ti{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(ap.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new Ka(Je.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,r=t.length;i<r;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Ka(Je.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new Ka(Je.REMOVE,r,e)),this.dispatchEvent(new Ka(Je.ADD,t,e))}updateLength_(){this.set(ap.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}function Re(n,e){if(!n)throw new Error(e)}const l4=new Array(6);function wt(){return[1,0,0,1,0,0]}function Ed(n,e){const t=n[0],i=n[1],r=n[2],s=n[3],o=n[4],a=n[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5];return n[0]=t*l+r*u,n[1]=i*l+s*u,n[2]=t*c+r*h,n[3]=i*c+s*h,n[4]=t*d+r*f+o,n[5]=i*d+s*f+a,n}function c_(n,e,t,i,r,s,o){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n[4]=s,n[5]=o,n}function u4(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function ct(n,e){const t=e[0],i=e[1];return e[0]=n[0]*t+n[2]*i+n[4],e[1]=n[1]*t+n[3]*i+n[5],e}function c4(n,e,t){return c_(n,e,0,0,t,0,0)}function h4(n,e,t){return Ed(n,c_(l4,1,0,0,1,e,t))}function qn(n,e,t,i,r,s,o,a){const l=Math.sin(s),u=Math.cos(s);return n[0]=i*u,n[1]=r*l,n[2]=-i*l,n[3]=r*u,n[4]=o*i*u-a*i*l+e,n[5]=o*r*l+a*r*u+t,n}function Lu(n,e){const t=d4(e);Re(t!==0,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return n[0]=o/t,n[1]=-r/t,n[2]=-s/t,n[3]=i/t,n[4]=(s*l-o*a)/t,n[5]=-(i*l-r*a)/t,n}function d4(n){return n[0]*n[3]-n[1]*n[2]}let lp;function h_(n){const e="matrix("+n.join(", ")+")";if(hd)return e;const t=lp||(lp=document.createElement("div"));return t.style.transform=e,t.style.transform}const qo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Pt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Pt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Pt.max=Pt.whitepoint[2].D65;Pt.rgb=function(n,e){e=e||Pt.whitepoint[2].E;var t=n[0]/e[0],i=n[1]/e[1],r=n[2]/e[2],s,o,a;return s=t*3.240969941904521+i*-1.537383177570093+r*-.498610760293,o=t*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=t*.055630079696993+i*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};qo.xyz=function(n,e){var t=n[0]/255,i=n[1]/255,r=n[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=t*.41239079926595+i*.35758433938387+r*.18048078840183,o=t*.21263900587151+i*.71516867876775+r*.072192315360733,a=t*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||Pt.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const wd={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(n,e,t){var i,r,s,o,a,l,u,c,h,d,f,g,p;if(s=n[0],o=n[1],a=n[2],s===0)return[0,0,0];var _=.0011070564598794539;return e=e||"D65",t=t||2,h=Pt.whitepoint[t][e][0],d=Pt.whitepoint[t][e][1],f=Pt.whitepoint[t][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),i=o/(13*s)+g||0,r=a/(13*s)+p||0,u=s>8?d*Math.pow((s+16)/116,3):d*s*_,l=u*9*i/(4*r)||0,c=u*(12-3*i-20*r)/(4*r)||0,[l,u,c]}};Pt.luv=function(n,e,t){var i,r,s,o,a,l,u,c,h,d,f,g,p,_=.008856451679035631,m=903.2962962962961;e=e||"D65",t=t||2,h=Pt.whitepoint[t][e][0],d=Pt.whitepoint[t][e][1],f=Pt.whitepoint[t][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),l=n[0],u=n[1],c=n[2],i=4*l/(l+15*u+3*c)||0,r=9*u/(l+15*u+3*c)||0;var b=u/d;return s=b<=_?m*b:116*Math.pow(b,1/3)-16,o=13*s*(i-g),a=13*s*(r-p),[s,o,a]};var d_={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(n){var e=n[0],t=n[1],i=n[2],r,s,o;return o=i/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o),[e,r,s]},xyz:function(n){return wd.xyz(d_.luv(n))}};wd.lchuv=function(n){var e=n[0],t=n[1],i=n[2],r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};Pt.lchuv=function(n){return wd.lchuv(Pt.luv(n))};const up={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var cp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function f4(n){var c,h;var e,t=[],i=1,r;if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(typeof n=="number")return{space:"rgb",values:[n>>>16,(n&65280)>>>8,n&255],alpha:1};if(n=String(n).toLowerCase(),up[n])t=up[n].slice(),r="rgb";else if(n==="transparent")i=0,r="rgb",t=[0,0,0];else if(n[0]==="#"){var s=n.slice(1),o=s.length,a=o<=4;i=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(i=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(i=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(n)){var l=e[1];r=l.replace(/a$/,"");var u=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:r==="rgb"?d*255:r[0]==="h"||r[0]==="l"&&!f?d*100:r==="lab"?d*125:r==="lch"?f<2?d*150:d*360:r[0]==="o"&&!f?d:r==="oklab"?d*.4:r==="oklch"?f<2?d*.4:d*360:d;if(r[f]==="h"||f===2&&r[r.length-1]==="h"){if(cp[d]!==void 0)return cp[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),i=t.length>u?t.pop():1}else/[0-9](?:\s|\/|,)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),r=((h=(c=n.match(/([a-z])/ig))==null?void 0:c.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:t,alpha:i}}const sc={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(n){var e=n[0]/360,t=n[1]/100,i=n[2]/100,r,s,o,a,l,u=0;if(t===0)return l=i*255,[l,l,l];for(s=i<.5?i*(1+t):i+t-i*t,r=2*i-s,a=[0,0,0];u<3;)o=e+1/3*-(u-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[u++]=l*255;return a}};qo.hsl=function(n){var e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=s-r,a,l,u;return s===r?a=0:e===s?a=(t-i)/o:t===s?a=2+(i-e)/o:i===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(r+s)/2,s===r?l=0:u<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,u*100]};function g4(n){Array.isArray(n)&&n.raw&&(n=String.raw(...arguments)),n instanceof Number&&(n=+n);var e,t=f4(n);if(!t.space)return[];const i=t.space[0]==="h"?sc.min:qo.min,r=t.space[0]==="h"?sc.max:qo.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],i[2]),r[2]),t.space[0]==="h"&&(e=sc.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function f_(n){return typeof n=="string"?n:p_(n)}const p4=1024,wo={};let oc=0;function m4(n){if(n.length===4)return n;const e=n.slice();return e[3]=1,e}function hp(n){const e=Pt.lchuv(qo.xyz(n));return e[3]=n[3],e}function _4(n){const e=Pt.rgb(d_.xyz(n));return e[3]=n[3],e}function Cd(n){if(wo.hasOwnProperty(n))return wo[n];if(oc>=p4){let t=0;for(const i in wo)t++&3||(delete wo[i],--oc)}const e=g4(n);if(e.length!==4)throw new Error('Failed to parse "'+n+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+n+'" as color');return g_(e),wo[n]=e,++oc,e}function Jo(n){return Array.isArray(n)?n:Cd(n)}function g_(n){return n[0]=Ke(n[0]+.5|0,0,255),n[1]=Ke(n[1]+.5|0,0,255),n[2]=Ke(n[2]+.5|0,0,255),n[3]=Ke(n[3],0,1),n}function p_(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let i=n[2];i!=(i|0)&&(i=i+.5|0);const r=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+e+","+t+","+i+","+r+")"}function v4(n){try{return Cd(n),!0}catch{return!1}}class y4{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,i){const r=dp(e,t,i);return r in this.cache_?this.cache_[r]:null}set(e,t,i,r){const s=dp(e,t,i);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function dp(n,e,t){const i=t?f_(t):"null";return e+":"+n+":"+i}const kl=new y4,Oe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class m_ extends ti{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Oe.OPACITY]=e.opacity!==void 0?e.opacity:1,Re(typeof t[Oe.OPACITY]=="number","Layer opacity must be a number"),t[Oe.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Oe.Z_INDEX]=e.zIndex,t[Oe.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Oe.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Oe.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Oe.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Ke(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ge()}getLayerStatesArray(e){return ge()}getExtent(){return this.get(Oe.EXTENT)}getMaxResolution(){return this.get(Oe.MAX_RESOLUTION)}getMinResolution(){return this.get(Oe.MIN_RESOLUTION)}getMinZoom(){return this.get(Oe.MIN_ZOOM)}getMaxZoom(){return this.get(Oe.MAX_ZOOM)}getOpacity(){return this.get(Oe.OPACITY)}getSourceState(){return ge()}getVisible(){return this.get(Oe.VISIBLE)}getZIndex(){return this.get(Oe.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Oe.EXTENT,e)}setMaxResolution(e){this.set(Oe.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Oe.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Oe.MAX_ZOOM,e)}setMinZoom(e){this.set(Oe.MIN_ZOOM,e)}setOpacity(e){Re(typeof e=="number","Layer opacity must be a number"),this.set(Oe.OPACITY,e)}setVisible(e){this.set(Oe.VISIBLE,e)}setZIndex(e){this.set(Oe.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Nt={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},xt={ANIMATING:0,INTERACTING:1},mn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},b4=42,Td=256;function fp(n,e,t){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,h=a?a[1]:0;let d=n[0]+l/2+c,f=n[2]-l/2+c,g=n[1]+u/2+h,p=n[3]-u/2+h;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let _=Ke(i[0],d,f),m=Ke(i[1],g,p);if(o&&t&&r){const b=30*r;_+=-b*Math.log(1+Math.max(0,d-i[0])/b)+b*Math.log(1+Math.max(0,i[0]-f)/b),m+=-b*Math.log(1+Math.max(0,g-i[1])/b)+b*Math.log(1+Math.max(0,i[1]-p)/b)}return[_,m]}}function x4(n){return n}function Sd(n,e,t,i){const r=ke(e)/t[0],s=fn(e)/t[1];return i?Math.min(n,Math.max(r,s)):Math.min(n,Math.min(r,s))}function Rd(n,e,t){let i=Math.min(n,e);const r=50;return i*=Math.log(1+r*Math.max(0,n/e-1))/r+1,t&&(i=Math.max(i,t),i/=Math.log(1+r*Math.max(0,t/n-1))/r+1),Ke(i,t/2,e*2)}function E4(n,e,t,i){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=n[0],u=n[n.length-1],c=t?Sd(l,t,o,i):l;if(a)return e?Rd(r,c,u):Ke(r,u,c);const h=Math.min(c,r),d=Math.floor(cd(n,h,s));return n[d]>c&&d<n.length-1?n[d+1]:n[d]}}}function w4(n,e,t,i,r,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(o,a,l,u){if(o!==void 0){const c=r?Sd(e,r,l,s):e;if(u)return i?Rd(o,c,t):Ke(o,t,c);const h=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(n)-h),f=-a*(.5-h)+.5,g=Math.min(c,o),p=Math.floor(Math.log(e/g)/Math.log(n)+f),_=Math.max(d,p),m=e/Math.pow(n,_);return Ke(m,t,c)}}}function gp(n,e,t,i,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const u=i?Sd(n,i,a,r):n;return!t||!l?Ke(s,e,u):Rd(s,u,e)}}}function Pd(n){if(n!==void 0)return 0}function pp(n){if(n!==void 0)return n}function C4(n){const e=2*Math.PI/n;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function T4(n){const e=yl(5);return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}function __(n){return Math.pow(n,3)}function cs(n){return 1-__(1-n)}function S4(n){return 3*n*n-2*n*n*n}function R4(n){return n}function pr(n,e,t,i,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=i){const l=n[a],u=n[a+1];s[o++]=r[0]*l+r[2]*u+r[4],s[o++]=r[1]*l+r[3]*u+r[5]}return s&&s.length!=o&&(s.length=o),s}function Id(n,e,t,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),u=s[0],c=s[1];let h=0;for(let d=e;d<t;d+=i){const f=n[d]-u,g=n[d+1]-c;o[h++]=u+f*a-g*l,o[h++]=c+f*l+g*a;for(let p=d+2;p<d+i;++p)o[h++]=n[p]}return o&&o.length!=h&&(o.length=h),o}function P4(n,e,t,i,r,s,o,a){a=a||[];const l=o[0],u=o[1];let c=0;for(let h=e;h<t;h+=i){const d=n[h]-l,f=n[h+1]-u;a[c++]=l+r*d,a[c++]=u+s*f;for(let g=h+2;g<h+i;++g)a[c++]=n[g]}return a&&a.length!=c&&(a.length=c),a}function I4(n,e,t,i,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=i){o[a++]=n[l]+r,o[a++]=n[l+1]+s;for(let u=l+2;u<l+i;++u)o[a++]=n[u]}return o&&o.length!=a&&(o.length=a),o}const mp=wt();class v_ extends ti{constructor(){super(),this.extent_=zt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Km((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ge()}closestPointXY(e,t,i,r){return ge()}containsXY(e,t){const i=this.getClosestPoint([e,t]);return i[0]===e&&i[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ge()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ba(t),this.extentRevision_=this.getRevision()}return z3(this.extent_,e)}rotate(e,t){ge()}scale(e,t,i){ge()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ge()}getType(){return ge()}applyTransform(e){ge()}intersectsExtent(e){return ge()}translate(e,t){ge()}transform(e,t){const i=it(e),r=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),u=i.getWorldExtent(),c=fn(u)/fn(l);return qn(mp,u[0],u[3],c,-c,0,0,0),pr(s,0,s.length,a,mp,o),Zo(i,t)(s,o,a)}:Zo(i,t);return this.applyTransform(r),this}}class wr extends v_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ge()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Dl(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ge()}setLayout(e,t,i){let r;if(e)r=Dl(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=hs(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();Id(i,0,i.length,r,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=Vi(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();P4(r,0,r.length,s,e,t,i,r),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const r=this.getStride();I4(i,0,i.length,r,e,t,i),this.changed()}}}function hs(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function Dl(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function L4(n,e,t){const i=n.getFlatCoordinates();if(!i)return null;const r=n.getStride();return pr(i,0,i.length,r,e,t)}function _p(n,e,t,i,r,s,o){const a=n[e],l=n[e+1],u=n[t]-a,c=n[t+1]-l;let h;if(u===0&&c===0)h=e;else{const d=((r-a)*u+(s-l)*c)/(u*u+c*c);if(d>1)h=t;else if(d>0){for(let f=0;f<i;++f)o[f]=_n(n[e+f],n[t+f],d);o.length=i;return}else h=e}for(let d=0;d<i;++d)o[d]=n[h+d];o.length=i}function Ld(n,e,t,i,r){let s=n[e],o=n[e+1];for(e+=i;e<t;e+=i){const a=n[e],l=n[e+1],u=Fi(s,o,a,l);u>r&&(r=u),s=a,o=l}return r}function Ad(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Ld(n,e,a,i,r),e=a}return r}function A4(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Ad(n,e,a,i,r),e=a[a.length-1]}return r}function Md(n,e,t,i,r,s,o,a,l,u,c){if(e==t)return u;let h,d;if(r===0){if(d=Fi(o,a,n[e],n[e+1]),d<u){for(h=0;h<i;++h)l[h]=n[e+h];return l.length=i,d}return u}c=c||[NaN,NaN];let f=e+i;for(;f<t;)if(_p(n,f-i,f,i,o,a,c),d=Fi(o,a,c[0],c[1]),d<u){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(d)-Math.sqrt(u))/r|0,1);if(s&&(_p(n,t-i,e,i,o,a,c),d=Fi(o,a,c[0],c[1]),d<u)){for(u=d,h=0;h<i;++h)l[h]=c[h];l.length=i}return u}function Od(n,e,t,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=Md(n,e,f,i,r,s,o,a,l,u,c),e=f}return u}function M4(n,e,t,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];u=Od(n,e,f,i,r,s,o,a,l,u,c),e=f[f.length-1]}return u}function y_(n,e,t,i){for(let r=0,s=t.length;r<s;++r)n[e++]=t[r];return e}function Au(n,e,t,i){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<i;++a)n[e++]=o[a]}return e}function Ea(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Au(n,e,t[o],i);r[s++]=l,e=l}return r.length=s,r}function b_(n,e,t,i,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Ea(n,e,t[o],i,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function Mu(n,e,t,i,r,s,o){const a=(t-e)/i;if(a<3){for(;e<t;e+=i)s[o++]=n[e],s[o++]=n[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const u=[e,t-i];let c=0;for(;u.length>0;){const h=u.pop(),d=u.pop();let f=0;const g=n[d],p=n[d+1],_=n[h],m=n[h+1];for(let b=d+i;b<h;b+=i){const y=n[b],x=n[b+1],E=H3(y,x,g,p,_,m);E>f&&(c=b,f=E)}f>r&&(l[(c-e)/i]=1,d+i<c&&u.push(d,c),c+i<h&&u.push(c,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=n[e+h*i],s[o++]=n[e+h*i+1]);return o}function x_(n,e,t,i,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=Mu(n,e,c,i,r,s,o),a.push(o),e=c}return o}function Or(n,e){return e*Math.round(n/e)}function O4(n,e,t,i,r,s,o){if(e==t)return o;let a=Or(n[e],r),l=Or(n[e+1],r);e+=i,s[o++]=a,s[o++]=l;let u,c;do if(u=Or(n[e],r),c=Or(n[e+1],r),e+=i,e==t)return s[o++]=u,s[o++]=c,o;while(u==a&&c==l);for(;e<t;){const h=Or(n[e],r),d=Or(n[e+1],r);if(e+=i,h==u&&d==c)continue;const f=u-a,g=c-l,p=h-a,_=d-l;if(f*_==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&_<g||g==_||g>0&&_>g)){u=h,c=d;continue}s[o++]=u,s[o++]=c,a=u,l=c,u=h,c=d}return s[o++]=u,s[o++]=c,o}function Fd(n,e,t,i,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l];o=O4(n,e,c,i,r,s,o),a.push(o),e=c}return o}function F4(n,e,t,i,r,s,o,a){for(let l=0,u=t.length;l<u;++l){const c=t[l],h=[];o=Fd(n,e,c,i,r,s,o,h),a.push(h),e=c[c.length-1]}return o}function dr(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=i)r[s++]=n.slice(o,o+i);return r.length=s,r}function Qo(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=dr(n,e,l,i,r[s]),e=l}return r.length=s,r}function sh(n,e,t,i,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:Qo(n,e,l,i,r[s]),e=l[l.length-1]}return r.length=s,r}function E_(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function w_(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=E_(n,e,a,i),e=a}return r}function k4(n,e,t,i){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=w_(n,e,a,i),e=a[a.length-1]}return r}class Js extends wr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Js(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,r){return r<us(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,r))}getArea(){return E_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return dr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Js(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Au(this.flatCoordinates,0,e,this.stride),this.changed()}}class mt extends wr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new mt(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=Fi(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return $s(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return dd(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=y_(this.flatCoordinates,0,e,this.stride),this.changed()}}function D4(n,e,t,i,r){return!pd(r,function(o){return!$r(n,e,t,i,o[0],o[1])})}function $r(n,e,t,i,r,s){let o=0,a=n[t-i],l=n[t-i+1];for(;e<t;e+=i){const u=n[e],c=n[e+1];l<=s?c>s&&(u-a)*(s-l)-(r-a)*(c-l)>0&&o++:c<=s&&(u-a)*(s-l)-(r-a)*(c-l)<0&&o--,a=u,l=c}return o!==0}function kd(n,e,t,i,r,s){if(t.length===0||!$r(n,e,t[0],i,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if($r(n,t[o-1],t[o],i,r,s))return!1;return!0}function N4(n,e,t,i,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(kd(n,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}function Dd(n,e,t,i,r,s,o){let a,l,u,c,h,d,f;const g=r[s+1],p=[];for(let b=0,y=t.length;b<y;++b){const x=t[b];for(c=n[x-i],d=n[x-i+1],a=e;a<x;a+=i)h=n[a],f=n[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(u=(g-d)/(f-d)*(h-c)+c,p.push(u)),c=h,d=f}let _=NaN,m=-1/0;for(p.sort(vr),c=p[0],a=1,l=p.length;a<l;++a){h=p[a];const b=Math.abs(h-c);b>m&&(u=(c+h)/2,kd(n,e,t,i,u,g)&&(_=u,m=b)),c=h}return isNaN(_)&&(_=r[s]),o?(o.push(_,g,m),o):[_,g,m]}function C_(n,e,t,i,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Dd(n,e,l,i,r,2*o,s),e=l[l.length-1]}return s}function T_(n,e,t,i,r){let s;for(e+=i;e<t;e+=i)if(s=r(n.slice(e-i,e),n.slice(e,e+i)),s)return s;return!1}function Ou(n,e,t,i,r){const s=s_(zt(),n,e,t,i);return Yt(r,s)?cr(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:T_(n,e,t,i,function(o,a){return W3(r,o,a)}):!1}function $4(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){if(Ou(n,e,t[s],i,r))return!0;e=t[s]}return!1}function S_(n,e,t,i,r){return!!(Ou(n,e,t,i,r)||$r(n,e,t,i,r[0],r[1])||$r(n,e,t,i,r[0],r[3])||$r(n,e,t,i,r[2],r[1])||$r(n,e,t,i,r[2],r[3]))}function R_(n,e,t,i,r){if(!S_(n,e,t[0],i,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(D4(n,t[s-1],t[s],i,r)&&!Ou(n,t[s-1],t[s],i,r))return!1;return!0}function B4(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(R_(n,e,a,i,r))return!0;e=a[a.length-1]}return!1}function G4(n,e,t,i){for(;e<t-i;){for(let r=0;r<i;++r){const s=n[e+r];n[e+r]=n[t-i+r],n[t-i+r]=s}e+=i,t-=i}}function Nd(n,e,t,i){let r=0,s=n[t-i],o=n[t-i+1];for(;e<t;e+=i){const a=n[e],l=n[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function $d(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Nd(n,e,a,i);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function P_(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!$d(n,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Nl(n,e,t,i,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=Nd(n,e,a,i);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&G4(n,e,a,i),e=a}return e}function oh(n,e,t,i,r){for(let s=0,o=t.length;s<o;++s)e=Nl(n,e,t[s],i,r);return e}function V4(n,e){const t=[];let i=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],u=Nd(n,i,l,2);if(s===void 0&&(s=u),u===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,i=l}return t}class xn extends wr{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Pn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new xn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<us(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ad(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Od(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return kd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return w_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Nl(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Qo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Vi(this.getExtent());this.flatInteriorPoint_=Dd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new mt(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Js(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],u=new Js(t.slice(s,l),e);r.push(u),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;$d(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Nl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=Fd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new xn(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return R_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ea(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function ea(n){if(Su(n))throw new Error("Cannot create polygon from empty extent");const e=n[0],t=n[1],i=n[2],r=n[3],s=[e,t,e,r,i,r,i,t,e,t];return new xn(s,"XY",[s.length])}function z4(n,e,t){e=e||32;const i=n.getStride(),r=n.getLayout(),s=n.getCenter(),o=i*(e+1),a=new Array(o);for(let c=0;c<o;c+=i){a[c]=0,a[c+1]=0;for(let h=2;h<i;h++)a[c+h]=s[h]}const l=[a.length],u=new xn(a,r,l);return j4(u,s,n.getRadius()),u}function j4(n,e,t,i){const r=n.getFlatCoordinates(),s=n.getStride(),o=r.length/s-1,a=0;for(let l=0;l<=o;++l){const u=l*s,c=a+jr(l,o)*2*Math.PI/o;r[u]=e[0]+t*Math.cos(c),r[u+1]=e[1]+t*Math.sin(c)}n.changed()}const ac=0;class Hn extends ti{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=xd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&e4(),e.center&&(e.center=Ue(e.center,this.projection_)),e.extent&&(e.extent=hr(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in mn)delete t[a];this.setProperties(t,!0);const i=U4(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const r=W4(e),s=i.constraint,o=H4(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=Ue(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=Ue(r.anchor,this.getProjection())),t[i]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const c=arguments[r];c.center&&this.setCenterInternal(c.center),c.zoom!==void 0?this.setZoom(c.zoom):c.resolution&&this.setResolution(c.resolution),c.rotation!==void 0&&this.setRotation(c.rotation)}if(r===t){i&&Ya(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const u=[];for(;r<t;++r){const c=arguments[r],h={start:s,complete:!1,anchor:c.anchor,duration:c.duration!==void 0?c.duration:1e3,easing:c.easing||S4,callback:i};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),c.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),c.rotation!==void 0){h.sourceRotation=l;const d=jr(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}X4(h)?h.complete=!0:s+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(xt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[xt.ANIMATING]>0}getInteracting(){return this.hints_[xt.INTERACTING]>0}cancelAnimations(){this.setHint(xt.ANIMATING,-this.hints_[xt.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const r=this.animations_[t];if(r[0].callback&&Ya(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const r=this.animations_[i];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const u=e-l.start;let c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):s=!1;const h=l.easing(c);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const _=d+h*(g-d),m=f+h*(p-f);this.targetCenter_=[_,m]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?jr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(xt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&Ya(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-t[0],r[1]-t[1]],_d(i,e-this.getRotation()),a_(i,t)),i}calculateCenterZoom(e,t){let i;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;i=[o,a]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],r=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Qr(e,this.getProjection())}getCenterInternal(){return this.get(mn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Iu(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();Re(t,"The view center is not defined");const i=this.getResolution();Re(i!==void 0,"The view resolution is not defined");const r=this.getRotation();return Re(r!==void 0,"The view rotation is not defined"),nh(t,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(mn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(hr(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=ke(e)/t[0],r=fn(e)/t[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get(mn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(i/r)/t;return function(o){return Math.log(i/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=lc(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,r;if(this.resolutions_){const s=cd(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=i/this.resolutions_[s+1]}else i=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=Ke(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(i,Ke(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(Re(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Re(!Su(e),"Cannot fit empty extent provided as `geometry`");const r=hr(e,this.getProjection());i=ea(r)}else if(e.getType()==="Circle"){const r=hr(e.getExtent(),this.getProjection());i=ea(r),i.rotate(this.getRotation(),Vi(r))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*i-s[h+1]*r,g=s[h]*r+s[h+1]*i;a=Math.min(a,f),l=Math.min(l,g),u=Math.max(u,f),c=Math.max(c,g)}return[a,l,u,c]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const u=this.getRotation(),c=Math.sin(u),h=Math.cos(u),d=Vi(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*c,g=d[1]*h+d[0]*c,p=this.getConstrainedCenter([f,g],l),_=t.callback?t.callback:Ys;t.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:t.duration,easing:t.easing},_):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),Ya(_,!0))}centerOn(e,t,i){this.centerOnInternal(Ue(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(lc(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),l=lc(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,i);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Qr(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Ue(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Ue(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Ue(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get(mn.ROTATION)!==r&&this.set(mn.ROTATION,r),this.get(mn.RESOLUTION)!==o&&(this.set(mn.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(mn.CENTER)||!zn(this.get(mn.CENTER),a))&&this.set(mn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!zn(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:cs,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(xt.INTERACTING,1)}endInteraction(e,t,i){i=i&&Ue(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(xt.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function Ya(n,e){setTimeout(function(){n(e)},0)}function W4(n){if(n.extent!==void 0){const t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return fp(n.extent,n.constrainOnlyCenter,t)}const e=xd(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,fp(t,!1,!1)}return x4}function U4(n){let e,t,i,o=n.minZoom!==void 0?n.minZoom:ac,a=n.maxZoom!==void 0?n.maxZoom:28;const l=n.zoomFactor!==void 0?n.zoomFactor:2,u=n.multiWorld!==void 0?n.multiWorld:!1,c=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,h=n.showFullExtent!==void 0?n.showFullExtent:!1,d=xd(n.projection,"EPSG:3857"),f=d.getExtent();let g=n.constrainOnlyCenter,p=n.extent;if(!u&&!p&&d.isGlobal()&&(g=!1,p=f),n.resolutions!==void 0){const _=n.resolutions;t=_[o],i=_[a]!==void 0?_[a]:_[_.length-1],n.constrainResolution?e=E4(_,c,!g&&p,h):e=gp(t,i,c,!g&&p,h)}else{const m=(f?Math.max(ke(f),fn(f)):360*qs.degrees/d.getMetersPerUnit())/Td/Math.pow(2,ac),b=m/Math.pow(2,28-ac);t=n.maxResolution,t!==void 0?o=0:t=m/Math.pow(l,o),i=n.minResolution,i===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?i=t/Math.pow(l,a):i=m/Math.pow(l,a):i=b),a=o+Math.floor(Math.log(t/i)/Math.log(l)),i=t/Math.pow(l,a-o),n.constrainResolution?e=w4(l,t,i,c,!g&&p,h):e=gp(t,i,c,!g&&p,h)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:o,zoomFactor:l}}function H4(n){if(n.enableRotation!==void 0?n.enableRotation:!0){const t=n.constrainRotation;return t===void 0||t===!0?T4():t===!1?pp:typeof t=="number"?C4(t):pp}return Pd}function X4(n){return!(n.sourceCenter&&n.targetCenter&&!zn(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function lc(n,e,t,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=n[0]*s-n[1]*o,l=n[1]*s+n[0]*o;a+=(e[0]/2-t[0])*i,l+=(t[1]-e[1]/2)*i,o=-o;const u=a*s-l*o,c=l*s+a*o;return[u,c]}class K4 extends m_{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Oe.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Oe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ae(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=he(e,ue.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Hn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return Bd(r,t.viewState)&&(!s||Yt(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const i=this.getSource();if(i&&(t=i.getAttributions()),!t)return[];const r=e instanceof Hn?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(Oe.MAP,e)}getMapInternal(){return this.get(Oe.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ae(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ae(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=he(e,Nt.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);Re(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=he(this,ue.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Oe.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Bd(n,e){if(!n.visible)return!1;const t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;const i=e.zoom;return i>n.minZoom&&i<=n.maxZoom}const Fu=K4;class Y4 extends bu{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ge()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;qn(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Lu(r,i)}forEachFeatureAtCoordinate(e,t,i,r,s,o,a,l){let u;const c=t.viewState;function h(x,E,C,S){return s.call(o,E,x?C:null,S)}const d=c.projection,f=vd(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&r){const x=d.getExtent(),E=ke(x);g.push([-E,0],[E,0])}const p=t.layerStatesArray,_=p.length,m=[],b=[];for(let x=0;x<g.length;x++)for(let E=_-1;E>=0;--E){const C=p[E],S=C.layer;if(S.hasRenderer()&&Bd(C,c)&&a.call(l,S)){const P=S.getRenderer(),D=S.getSource();if(P&&D){const N=D.getWrapX()?f:e,Y=h.bind(null,C.managed);b[0]=N[0]+g[x][0],b[1]=N[1]+g[x][1],u=P.forEachFeatureAtCoordinate(b,t,i,Y,m)}if(u)return u}}if(m.length===0)return;const y=1/m.length;return m.forEach((x,E)=>x.distanceSq+=E*y),m.sort((x,E)=>x.distanceSq-E.distanceSq),m.some(x=>u=x.callback(x.feature,x.layer,x.geometry)),u}hasFeatureAtCoordinate(e,t,i,r,s,o){return this.forEachFeatureAtCoordinate(e,t,i,r,Bi,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){ge()}flushDeclutterItems(e){}scheduleExpireIconCache(e){kl.canExpireCache()&&e.postRenderFunctions.push(Z4)}}function Z4(n,e){kl.expire()}class Bo extends En{constructor(e,t,i,r){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=r}}const I_="10px sans-serif",an="#000",Qs="round",Di=[],Ni=0,eo="round",ta=10,na="#000",ia="center",$l="middle",Br=[0,0,0,0],ra=1,Ti=new ti;let Ps=null,ah;const lh={},q4=function(){const e="32px ",t=["monospace","serif"],i=t.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(u,c,h){let d=!0;for(let f=0;f<i;++f){const g=t[f];if(o=Bl(u+" "+c+" "+e+g,r),h!=g){const p=Bl(u+" "+c+" "+e+h+","+g,r);d=d&&p!=o}}return!!d}function l(){let u=!0;const c=Ti.getKeys();for(let h=0,d=c.length;h<d;++h){const f=c[h];Ti.get(f)<100&&(a.apply(this,f.split(`
`))?(os(lh),Ps=null,ah=void 0,Ti.set(f,100)):(Ti.set(f,Ti.get(f)+1,!0),u=!1))}u&&(clearInterval(s),s=void 0)}return function(u){const c=e_(u);if(!c)return;const h=c.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],p=c.style+`
`+c.weight+`
`+g;Ti.get(p)===void 0&&(Ti.set(p,100,!0),a(c.style,c.weight,g)||(Ti.set(p,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),J4=function(){let n;return function(e){let t=lh[e];if(t==null){if(hd){const i=e_(e),r=L_(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);lh[e]=t}return t}}();function L_(n,e){return Ps||(Ps=Vt(1,1)),n!=ah&&(Ps.font=n,ah=Ps.font),Ps.measureText(e)}function Bl(n,e){return L_(n,e).width}function vp(n,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((r,s)=>Math.max(r,Bl(n,s)),0);return t[e]=i,i}function Q4(n,e){const t=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let u=0,c=e.length;u<=c;u+=2){const h=e[u];if(h===`
`||u===c){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const d=e[u+1]||n.font,f=Bl(d,h);t.push(f),o+=f;const g=J4(d);i.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:t,heights:i,lineWidths:r}}function eI(n,e,t,i,r,s,o,a,l,u,c){n.save(),t!==1&&(n.globalAlpha*=t),e&&n.transform.apply(n,e),i.contextInstructions?(n.translate(l,u),n.scale(c[0],c[1]),tI(i,n)):c[0]<0||c[1]<0?(n.translate(l,u),n.scale(c[0],c[1]),n.drawImage(i,r,s,o,a,0,0,o,a)):n.drawImage(i,r,s,o,a,l,u,o*c[0],a*c[1]),n.restore()}function tI(n,e){const t=n.contextInstructions;for(let i=0,r=t.length;i<r;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class nI extends Y4{constructor(e){super(e),this.fontChangeListenerKey_=he(Ti,Zr.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=yi+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const r=new Bo(e,void 0,t);i.dispatchEvent(r)}}disposeInternal(){Ae(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Nt.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const u=l.layer,c=u.getSourceState();if(!Bd(l,i)||c!="ready"&&c!="undefined"){u.unrender();continue}const h=u.render(e,s);h&&(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in u&&r.push(u))}this.flushDeclutterItems(e),C3(this.element_,this.children_),this.dispatchRenderEvent(Nt.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let i=t.length-1;i>=0;--i)t[i].renderDeclutter(e);t.length=0}}class ar extends En{constructor(e,t){super(e),this.layer=t}}const uc={LAYERS:"layers"};class uo extends m_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(uc.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Jt(i.slice(),{unique:!0}):Re(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Jt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ae),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(he(e,Je.ADD,this.handleLayersAdd_,this),he(e,Je.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ae);os(this.listenerKeys_);const t=e.getArray();for(let i=0,r=t.length;i<r;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new ar("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[he(e,Zr.PROPERTYCHANGE,this.handleLayerChange_,this),he(e,ue.CHANGE,this.handleLayerChange_,this)];e instanceof uo&&t.push(he(e,"addlayer",this.handleLayerGroupAdd_,this),he(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ne(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new ar("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new ar("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new ar("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=ne(t);this.listenerKeys_[i].forEach(Ae),delete this.listenerKeys_[i],this.dispatchEvent(new ar("removelayer",t)),this.changed()}getLayers(){return this.get(uc.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let r=0,s=i.length;r<s;++r)this.dispatchEvent(new ar("removelayer",i[r]))}this.set(uc.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=i,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=$o(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class Is extends En{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}class Pi extends Is{constructor(e,t,i,r,s,o){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Te={SINGLECLICK:"singleclick",CLICK:ue.CLICK,DBLCLICK:ue.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class iI extends xu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=he(i,ci.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=he(i,ci.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ue.TOUCHMOVE,this.boundHandleTouchMove_,Jm?{passive:!1}:!1)}emulateClick_(e){let t=new Pi(Te.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Pi(Te.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Pi(Te.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Te.POINTERUP||t.type==Te.POINTERCANCEL){delete this.trackedTouches_[i];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==Te.POINTERDOWN||t.type==Te.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Pi(Te.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ae),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Pi(Te.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(he(i,Te.POINTERMOVE,this.handlePointerMove_,this),he(i,Te.POINTERUP,this.handlePointerUp_,this),he(this.element_,Te.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(he(this.element_.getRootNode(),Te.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Pi(Te.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Pi(Te.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ae(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ue.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ae(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ae),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Gl=1/0;class rI{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,os(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Re(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Gl?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,r=t.length,s=t[e],o=i[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),u=this.getRightChildIndex_(e),c=u<r&&i[u]<i[l]?u:l;t[e]=t[c],i[e]=i[c],e=c}t[e]=s,i[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const i=this.elements_,r=this.priorities_,s=i[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)i[t]=i[a],r[t]=r[a],t=a;else break}i[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==Gl?delete this.queuedElements_[this.keyFunction_(o)]:(i[r]=l,t[r++]=o);t.length=r,i.length=r,this.heapify_()}}const le={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class sI extends rI{constructor(e,t){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(ue.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===le.LOADED||i===le.ERROR||i===le.EMPTY){i!==le.ERROR&&t.removeEventListener(ue.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0,r,s,o;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===le.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,s.load())}}function oI(n,e,t,i,r){if(!n||!(t in n.wantedTiles)||!n.wantedTiles[t][e.getKey()])return Gl;const s=n.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class A_ extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+yi+" "+as,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Wa)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:cs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const r="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Wa);!s&&i===0?this.element.classList.add(Wa):s&&i!==0&&this.element.classList.remove(Wa)}this.label_.style.transform=r}this.rotation_=i}}class M_ extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",u=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild(typeof o=="string"?document.createTextNode(o):o),c.addEventListener(ue.CLICK,this.handleClick_.bind(this,i),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=u,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(ue.CLICK,this.handleClick_.bind(this,-i),!1);const d=t+" "+yi+" "+as,f=this.element;f.className=d,f.appendChild(c),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const r=i.getZoom();if(r!==void 0){const s=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:cs})):i.setZoom(s)}}}function Gd(n){n=n||{};const e=new Jt;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new M_(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new A_(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new t_(n.attributionOptions)),e}const uh={ACTIVE:"active"};class co extends ti{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(uh.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(uh.ACTIVE,e)}setMap(e){this.map_=e}}function aI(n,e,t){const i=n.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:R4,center:n.getConstrainedCenter(r)})}}function Vd(n,e,t,i){const r=n.getZoom();if(r===void 0)return;const s=n.getConstrainedZoom(r+e),o=n.getResolutionForZoom(s);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:o,anchor:t,duration:i!==void 0?i:250,easing:cs})}class lI extends co{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Te.DBLCLICK){const i=e.originalEvent,r=e.map,s=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();Vd(a,o,s,this.duration_),i.preventDefault(),t=!0}return!t}}class Cr extends co{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Te.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Te.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Te.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Te.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function zd(n){const e=n.length;let t=0,i=0;for(let r=0;r<e;r++)t+=n[r].clientX,i+=n[r].clientY;return{clientX:t/e,clientY:i/e}}function ch(n){const e=arguments;return function(t){let i=!0;for(let r=0,s=e.length;r<s&&(i=i&&e[r](t),!!i);++r);return i}}const uI=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},cI=function(n){const e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},hI=function(n){const e=n.map.getTargetElement(),t=n.map.getOwnerDocument().activeElement;return e.contains(t)},O_=function(n){return n.map.getTargetElement().hasAttribute("tabindex")?hI(n):!0},Vl=Bi,F_=function(n){const e=n.originalEvent;return e.button==0&&!(x3&&Ym&&e.ctrlKey)},hh=ss,dI=function(n){return n.type=="pointermove"},jd=function(n){return n.type==Te.SINGLECLICK},fI=function(n){return n.type==Te.DBLCLICK},Wd=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},gI=function(n){const e=n.originalEvent;return Ym?e.metaKey:e.ctrlKey},Ud=function(n){const e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},k_=function(n){const e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},cc=function(n){const e=n.originalEvent;return Re(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},D_=function(n){const e=n.originalEvent;return Re(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class pI extends Cr{constructor(e){super({stopDown:ss}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:ch(Wd,D_);this.condition_=e.onFocusOnly?ch(O_,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,r=t.getEventPixel(zd(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();l_(s,a.getResolution()),_d(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:cs})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class mI extends Cr{constructor(e){e=e||{},super({stopDown:ss}),this.condition_=e.condition?e.condition:cI,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!cc(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===Pd)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return cc(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return cc(e)&&F_(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class _I extends bu{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+i,r.top=Math.min(e[1],t[1])+i,r.width=Math.abs(t[0]-e[0])+i,r.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new xn([r])}getGeometry(){return this.geometry_}}const Za={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class hc extends En{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class vI extends Cr{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new _I(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:F_,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const r=i[0]-t[0],s=i[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new hc(Za.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new hc(t?Za.BOXEND:Za.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hc(Za.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class yI extends vI{constructor(e){e=e||{};const t=e.condition?e.condition:Ud;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(r),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:cs})}}const Ar={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class bI extends co{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Wd(t)&&k_(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ue.KEYDOWN){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==Ar.DOWN||r==Ar.LEFT||r==Ar.RIGHT||r==Ar.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,u=0;r==Ar.DOWN?u=-a:r==Ar.LEFT?l=-a:r==Ar.RIGHT?l=a:u=a;const c=[l,u];_d(c,o.getRotation()),aI(o,c,this.duration_),i.preventDefault(),t=!0}}return!t}}class xI extends co{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!gI(t)&&k_(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ue.KEYDOWN||e.type==ue.KEYPRESS){const i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();Vd(a,o,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}class EI{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const r=this.points_[t+2]-this.points_[i+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[i],o=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class wI extends co{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Vl;this.condition_=e.onFocusOnly?ch(O_,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==ue.WHEEL)return!0;const i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==ue.WHEEL&&(s=r.deltaY,v3&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=Zm),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Ke(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Vd(t,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class CI extends Cr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ss),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Pd&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(zd(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class TI extends Cr{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=ss),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,u=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(zd(this.targetPointers))),l.render(),u.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function SI(n){n=n||{};const e=new Jt,t=new EI(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new mI),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new lI({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new pI({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new CI),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new TI({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new bI),e.push(new xI({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new wI({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new yI({duration:n.zoomDuration})),e}function yp(n){return n[0]>0&&n[1]>0}function RI(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function bn(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}function N_(n){if(n instanceof Fu){n.setMapInternal(null);return}n instanceof uo&&n.getLayers().forEach(N_)}function $_(n,e){if(n instanceof Fu){n.setMapInternal(e);return}if(n instanceof uo){const t=n.getLayers().getArray();for(let i=0,r=t.length;i<r;++i)$_(t[i],e)}}let B_=class extends ti{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=PI(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Zm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=wt(),this.pixelToCoordinateTransform_=wt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||Gd(),this.interactions=t.interactions||SI({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new sI(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(tt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(tt.VIEW,this.handleViewChanged_),this.addChangeListener(tt.SIZE,this.handleSizeChanged_),this.addChangeListener(tt.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Hn)&&e.view.then(function(r){i.setView(new Hn(r))}),this.controls.addEventListener(Je.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Je.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Je.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Je.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Je.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Je.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){$_(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:Bi,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(r){r instanceof uo?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Bi,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=i.width/r[0],o=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(tt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Qr(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ct(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(tt.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Jt){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=Ue(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ct(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(tt.SIZE)}getView(){return this.get(tt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,r){return oI(this.frameState_,e,t,i,r)}handleBrowserEvent(e,t){t=t||e.type;const i=new Pi(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===ci.POINTERDOWN||i===ue.WHEEL||i===ue.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[xt.ANIMATING]||o[xt.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Nt.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Nt.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Is(ai.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Is(ai.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let r=0,s=i.length;r<s;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)Ae(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ue.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ue.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ll(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new nI(this)),this.mapBrowserEventHandler_=new iI(this,this.moveTolerance_);for(const s in Te)this.mapBrowserEventHandler_.addEventListener(Te[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ue.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ue.WHEEL,this.boundHandleBrowserEvent_,Jm?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[he(i,ue.KEYDOWN,this.handleBrowserEvent,this),he(i,ue.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ae(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ae(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=he(e,Zr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=he(e,ue.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ae),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new ar("addlayer",e)),this.layerGroupPropertyListenerKeys_=[he(e,Zr.PROPERTYCHANGE,this.render,this),he(e,ue.CHANGE,this.render,this),he(e,"addlayer",this.handleLayerAdd_,this),he(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){N_(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&yp(t)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:nh(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ne(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=nh(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Su(this.previousExtent_)&&!Jr(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Is(ai.MOVESTART,this,r)),this.previousExtent_=ba(this.previousExtent_)),this.previousExtent_&&!s.viewHints[xt.ANIMATING]&&!s.viewHints[xt.INTERACTING]&&!Jr(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Is(ai.MOVEEND,this,s)),r_(s.extent,this.previousExtent_))),this.dispatchEvent(new Is(ai.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(ai.LOADSTART)||this.hasListener(ai.LOADEND)||this.hasListener(Nt.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new ar("removelayer",t)),this.set(tt.LAYERGROUP,e)}setSize(e){this.set(tt.SIZE,e)}setTarget(e){this.set(tt.TARGET,e)}setView(e){if(!e||e instanceof Hn){this.set(tt.VIEW,e);return}this.set(tt.VIEW,new Hn);const t=this;e.then(function(i){t.setView(new Hn(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!yp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&u_("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!bi(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function PI(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);const t={},i=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new uo({layers:n.layers});t[tt.LAYERGROUP]=i,t[tt.TARGET]=n.target,t[tt.VIEW]=n.view instanceof Hn?n.view:new Hn;let r;n.controls!==void 0&&(Array.isArray(n.controls)?r=new Jt(n.controls.slice()):(Re(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=n.controls));let s;n.interactions!==void 0&&(Array.isArray(n.interactions)?s=new Jt(n.interactions.slice()):(Re(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=n.interactions));let o;return n.overlays!==void 0?Array.isArray(n.overlays)?o=new Jt(n.overlays.slice()):(Re(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=n.overlays):o=new Jt,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const Ft={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class G_ extends ti{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+T3,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Ft.ELEMENT,this.handleElementChanged),this.addChangeListener(Ft.MAP,this.handleMapChanged),this.addChangeListener(Ft.OFFSET,this.handleOffsetChanged),this.addChangeListener(Ft.POSITION,this.handlePositionChanged),this.addChangeListener(Ft.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Ft.ELEMENT)}getId(){return this.id}getMap(){return this.get(Ft.MAP)||null}getOffset(){return this.get(Ft.OFFSET)}getPosition(){return this.get(Ft.POSITION)}getPositioning(){return this.get(Ft.POSITIONING)}handleElementChanged(){Qm(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(Ll(this.element),Ae(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=he(e,ai.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Ft.ELEMENT,e)}setMap(e){this.set(Ft.MAP,e)}setOffset(e){this.set(Ft.OFFSET,e)}setPosition(e){this.set(Ft.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Ft.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[E3(r),w3(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!cr(i,s)){const a=s[0]-i[0],l=i[2]-s[2],u=s[1]-i[1],c=i[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),u<0?h[1]=u-o:c<0&&(h[1]=Math.abs(c)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+h[0],f[1]+h[1]],p=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),r=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(Ft.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(e,t){const i=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let l="0%",u="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?u="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(u="-50%");const c=`translate(${l}, ${u}) translate(${o}, ${a})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,i.transform=c)}getOptions(){return this.options}}const dc=.75,qa=.1;class II extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const s=e.label!==void 0?e.label:"›";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(o),a.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new B_({view:e.view,controls:new Jt,interactions:new Jt});this.ovmap_=l,e.layers&&e.layers.forEach(function(b){l.addLayer(b)});const u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new G_({position:[0,0],positioning:"center-center",element:u}),this.ovmap_.addOverlay(this.boxOverlay_);const c=t+" "+yi+" "+as+(this.collapsed_&&this.collapsible_?" "+Al:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=c,h.appendChild(this.ovmapDiv_),h.appendChild(a);const d=this,f=this.boxOverlay_,g=this.boxOverlay_.getElement(),p=function(b){return{clientX:b.clientX,clientY:b.clientY}},_=function(b){const y=p(b),x=l.getEventCoordinateInternal(y);f.setPosition(x)},m=function(b){const y=l.getEventCoordinateInternal(b);d.getMap().getView().setCenterInternal(y),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",m)};g.addEventListener("mousedown",function(){window.addEventListener("mousemove",_),window.addEventListener("mouseup",m)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const i=t.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(he(e,Zr.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===tt.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===tt.TARGET||e.key===tt.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new Hn({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(mn.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(mn.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),s=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&Jr(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),u=t.getPixelFromCoordinateInternal(Ki(s)),c=t.getPixelFromCoordinateInternal(xa(s)),h=Math.abs(u[0]-c[0]),d=Math.abs(u[1]-c[1]),f=o[0],g=o[1];h<f*qa||d<g*qa||h>f*dc||d>g*dc?this.resetExtent_():cr(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,i=e.getSize(),s=e.getView().calculateExtentInternal(i),o=t.getView(),a=Math.log(dc/qa)/Math.LN2,l=1/(Math.pow(2,a/2)*qa);j3(s,l),o.fitInternal(ea(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const i=e.getSize(),r=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-r.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),u=r.getCenterInternal(),c=r.getResolution(),h=s.getResolution(),d=i[0]*c/h,f=i[1]*c/h;if(a.setPosition(u),l){l.style.width=d+"px",l.style.height=f+"px";const g="rotate("+o+"rad)";l.style.transform=g}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Yo(this.ovmap_,ai.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Al),this.collapsed_?Zs(this.collapseLabel_,this.label_):Zs(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const LI=II,fc="units",AI=[1,2,5],Co=25.4/.28;class MI extends xi{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+yi,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(fc,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(fc)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(fc,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,i=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=Fl(i,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||Co)/Co,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Co)/Co:void 0;let u=a*o,c="";if(r=="degrees"){const y=qs.degrees;u*=y,u<y/60?(c="″",o*=3600):u<y?(c="′",o*=60):c="°"}else if(r=="imperial")u<.9144?(c="in",o/=.0254):u<1609.344?(c="ft",o/=.3048):(c="mi",o/=1609.344);else if(r=="nautical")o/=1852,c="NM";else if(r=="metric")u<.001?(c="μm",o*=1e6):u<1?(c="mm",o*=1e3):u<1e3?c="m":(c="km",o/=1e3);else if(r=="us")u<.9144?(c="in",o*=39.37):u<1609.344?(c="ft",o/=.30480061):(c="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,g,p,_,m;for(;;){g=Math.floor(h/3);const y=Math.pow(10,g);if(d=AI[(h%3+3)%3]*y,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=p,f=_,g=m;break}else if(f>=a)break;p=d,_=f,m=g,++h}const b=this.scaleBar_?this.createScaleBar(f,d,c):d.toFixed(g<0?-g:0)+" "+c;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,i){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let c=0;c<o;++c){const h=c%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(c%2===0||o===2?this.createStepText(c,e,!1,t,i):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,i,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,u=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${u}px;left: ${i?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=Fl(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Co,i=1e3/25.4;return e*i*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const OI=MI,To={VERTICAL:0,HORIZONTAL:1};class FI extends xi{constructor(e){e=e||{},super({target:e.target,element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=To.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=e.duration!==void 0?e.duration:200;const t=e.className!==void 0?e.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=t+"-thumb "+yi;const r=this.element;r.className=t+" "+yi+" "+as,r.appendChild(i),r.addEventListener(ci.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),r.addEventListener(ci.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),r.addEventListener(ci.POINTERUP,this.handleDraggerEnd_.bind(this),!1),r.addEventListener(ue.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(ue.CLICK,d3,!1)}setMap(e){super.setMap(e),e&&e.render()}initSlider_(){const e=this.element;let t=e.offsetWidth,i=e.offsetHeight;if(t===0&&i===0)return this.sliderInitialized_=!1;const r=getComputedStyle(e);t-=parseFloat(r.paddingRight)+parseFloat(r.paddingLeft),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom);const s=e.firstElementChild,o=getComputedStyle(s),a=s.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),l=s.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[a,l],t>i?(this.direction_=To.HORIZONTAL,this.widthLimit_=t-a):(this.direction_=To.VERTICAL,this.heightLimit_=i-l),this.sliderInitialized_=!0}handleContainerClick_(e){const t=this.getMap().getView(),i=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i),s=t.getConstrainedZoom(t.getZoomForResolution(r));t.animateInternal({zoom:s,duration:this.duration_,easing:cs})}handleDraggerStart_(e){if(!this.dragging_&&e.target===this.element.firstElementChild){const t=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=e.clientX-parseFloat(t.style.left),this.startY_=e.clientY-parseFloat(t.style.top),this.dragging_=!0,this.dragListenerKeys_.length===0){const i=this.handleDraggerDrag_,r=this.handleDraggerEnd_,s=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(he(s,ci.POINTERMOVE,i,this),he(s,ci.POINTERUP,r,this))}}}handleDraggerDrag_(e){if(this.dragging_){const t=e.clientX-this.startX_,i=e.clientY-this.startY_,r=this.getRelativePosition_(t,i);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(e){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(Ae),this.dragListenerKeys_.length=0)}setThumbPosition_(e){const t=this.getPositionForResolution_(e),i=this.element.firstElementChild;this.direction_==To.HORIZONTAL?i.style.left=this.widthLimit_*t+"px":i.style.top=this.heightLimit_*t+"px"}getRelativePosition_(e,t){let i;return this.direction_===To.HORIZONTAL?i=e/this.widthLimit_:i=t/this.heightLimit_,Ke(i,0,1)}getResolutionForPosition_(e){return this.getMap().getView().getResolutionForValueFunction()(1-e)}getPositionForResolution_(e){const t=this.getMap().getView().getValueForResolutionFunction();return Ke(1-t(e),0,1)}render(e){if(!e.frameState||!this.sliderInitialized_&&!this.initSlider_())return;const t=e.frameState.viewState.resolution;this.currentResolution_=t,this.setThumbPosition_(t)}}const kI=FI;class DI extends xi{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",r=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=r,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(ue.CLICK,this.handleClick_.bind(this),!1);const o=t+" "+yi+" "+as,a=this.element;a.className=o,a.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(ea(i))}}const NI=DI,bp=Object.freeze(Object.defineProperty({__proto__:null,Attribution:t_,Control:xi,FullScreen:L3,MousePosition:a4,OverviewMap:LI,Rotate:A_,ScaleLine:OI,Zoom:M_,ZoomSlider:kI,ZoomToExtent:NI,defaults:Gd},Symbol.toStringTag,{value:"Module"})),$I=F({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(n){return(e,t)=>(w(),R("span",{class:W(["VPBadge",e.type])},[L(e.$slots,"default",{},()=>[Lt(se(e.text),1)])],2))}}),BI={key:0,class:"VPBackdrop"},GI=F({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(n){return(e,t)=>(w(),X(Wi,{name:"fade"},{default:O(()=>[e.show?(w(),R("div",BI)):V("",!0)]),_:1}))}}),VI=te(GI,[["__scopeId","data-v-b3b59a65"]]),xe=my;function zI(n,e){let t,i=!1;return()=>{t&&clearTimeout(t),i?t=setTimeout(n,e):(n(),(i=!0)&&setTimeout(()=>i=!1,e))}}function dh(n){return/^\//.test(n)?n:`/${n}`}function Hd(n){const{pathname:e,search:t,hash:i,protocol:r}=new URL(n,"http://a.com");if(_y(n)||n.startsWith("#")||!r.startsWith("http")||!vy(e))return n;const{site:s}=xe(),o=e.endsWith("/")||e.endsWith(".html")?n:n.replace(/(?:(^\.+)\/)?.*$/,`$1${e.replace(/(\.md)?$/,s.value.cleanUrls?"":".html")}${t}${i}`);return Ih(o)}const Xd=B(so?location.hash:"");so&&window.addEventListener("hashchange",()=>{Xd.value=location.hash});function wa({removeCurrent:n=!0,correspondingLink:e=!1}={}){const{site:t,localeIndex:i,page:r,theme:s}=xe(),o=T(()=>{var l,u;return{label:(l=t.value.locales[i.value])==null?void 0:l.label,link:((u=t.value.locales[i.value])==null?void 0:u.link)||(i.value==="root"?"/":`/${i.value}/`)}});return{localeLinks:T(()=>Object.entries(t.value.locales).flatMap(([l,u])=>n&&o.value.label===u.label?[]:{text:u.label,link:jI(u.link||(l==="root"?"/":`/${l}/`),s.value.i18nRouting!==!1&&e,r.value.relativePath.slice(o.value.link.length-1),!t.value.cleanUrls)+Xd.value})),currentLang:o}}function jI(n,e,t,i){return e?n.replace(/\/$/,"")+dh(t.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,i?".html":"")):n}const WI=n=>(kn("data-v-d6e0f090"),n=n(),Dn(),n),UI={class:"NotFound"},HI={class:"code"},XI={class:"title"},KI=WI(()=>I("div",{class:"divider"},null,-1)),YI={class:"quote"},ZI={class:"action"},qI=["href","aria-label"],JI=F({__name:"NotFound",setup(n){const{site:e,theme:t}=xe(),{localeLinks:i}=wa({removeCurrent:!1}),r=B("/");return Ge(()=>{var o;const s=window.location.pathname.replace(e.value.base,"").replace(/(^.*?\/).*$/,"/$1");i.value.length&&(r.value=((o=i.value.find(({link:a})=>a.startsWith(s)))==null?void 0:o.link)||i.value[0].link)}),(s,o)=>{var a,l,u,c,h;return w(),R("div",UI,[I("p",HI,se(((a=v(t).notFound)==null?void 0:a.code)??"404"),1),I("h1",XI,se(((l=v(t).notFound)==null?void 0:l.title)??"PAGE NOT FOUND"),1),KI,I("blockquote",YI,se(((u=v(t).notFound)==null?void 0:u.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),I("div",ZI,[I("a",{class:"link",href:v(Ih)(r.value),"aria-label":((c=v(t).notFound)==null?void 0:c.linkLabel)??"go to home"},se(((h=v(t).notFound)==null?void 0:h.linkText)??"Take me home"),9,qI)])])}}}),QI=te(JI,[["__scopeId","data-v-d6e0f090"]]);function V_(n,e){if(Array.isArray(n))return bl(n);if(n==null)return[];e=dh(e);const t=Object.keys(n).sort((r,s)=>s.split("/").length-r.split("/").length).find(r=>e.startsWith(dh(r))),i=t?n[t]:[];return Array.isArray(i)?bl(i):bl(i.items,i.base)}function e5(n){const e=[];let t=0;for(const i in n){const r=n[i];if(r.items){t=e.push(r);continue}e[t]||e.push({items:[]}),e[t].items.push(r)}return e}function t5(n){const e=[];function t(i){for(const r of i)r.text&&r.link&&e.push({text:r.text,link:r.link,docFooterText:r.docFooterText}),r.items&&t(r.items)}return t(n),e}function fh(n,e){return Array.isArray(e)?e.some(t=>fh(n,t)):Ur(n,e.link)?!0:e.items?fh(n,e.items):!1}function bl(n,e){return[...n].map(t=>{const i={...t},r=i.base||e;return r&&i.link&&(i.link=r+i.link),i.items&&(i.items=bl(i.items,r)),i})}function Yi(){const{frontmatter:n,page:e,theme:t}=xe(),i=Fc("(min-width: 960px)"),r=B(!1),s=T(()=>{const p=t.value.sidebar,_=e.value.relativePath;return p?V_(p,_):[]}),o=B(s.value);ee(s,(p,_)=>{JSON.stringify(p)!==JSON.stringify(_)&&(o.value=s.value)});const a=T(()=>n.value.sidebar!==!1&&o.value.length>0&&n.value.layout!=="home"),l=T(()=>u?n.value.aside==null?t.value.aside==="left":n.value.aside==="left":!1),u=T(()=>n.value.layout==="home"?!1:n.value.aside!=null?!!n.value.aside:t.value.aside!==!1),c=T(()=>a.value&&i.value),h=T(()=>a.value?e5(o.value):[]);function d(){r.value=!0}function f(){r.value=!1}function g(){r.value?f():d()}return{isOpen:r,sidebar:o,sidebarGroups:h,hasSidebar:a,hasAside:u,leftAside:l,isSidebarEnabled:c,open:d,close:f,toggle:g}}function n5(n,e){let t;Ui(()=>{t=n.value?document.activeElement:void 0}),Ge(()=>{window.addEventListener("keyup",i)}),Tt(()=>{window.removeEventListener("keyup",i)});function i(r){r.key==="Escape"&&n.value&&(e(),t==null||t.focus())}}function i5(n){const{page:e}=xe(),t=B(!1),i=T(()=>n.value.collapsed!=null),r=T(()=>!!n.value.link),s=B(!1),o=()=>{s.value=Ur(e.value.relativePath,n.value.link)};ee([e,n,Xd],o),Ge(o);const a=T(()=>s.value?!0:n.value.items?fh(e.value.relativePath,n.value.items):!1),l=T(()=>!!(n.value.items&&n.value.items.length));Ui(()=>{t.value=!!(i.value&&n.value.collapsed)}),m0(()=>{(s.value||a.value)&&(t.value=!1)});function u(){i.value&&(t.value=!t.value)}return{collapsed:t,collapsible:i,isLink:r,isActiveLink:s,hasActiveLink:a,hasChildren:l,toggle:u}}function r5(){const{hasSidebar:n}=Yi(),e=Fc("(min-width: 960px)"),t=Fc("(min-width: 1280px)");return{isAsideEnabled:T(()=>!t.value&&!e.value?!1:n.value?t.value:e.value)}}const gh=[];function z_(n){return typeof n.outline=="object"&&!Array.isArray(n.outline)&&n.outline.label||n.outlineTitle||"On this page"}function Kd(n){const e=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(t=>t.id&&t.hasChildNodes()).map(t=>{const i=Number(t.tagName[1]);return{element:t,title:s5(t),link:"#"+t.id,level:i}});return o5(e,n)}function s5(n){let e="";for(const t of n.childNodes)if(t.nodeType===1){if(t.classList.contains("VPBadge")||t.classList.contains("header-anchor")||t.classList.contains("ignore-header"))continue;e+=t.textContent}else t.nodeType===3&&(e+=t.textContent);return e.trim()}function o5(n,e){if(e===!1)return[];const t=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[i,r]=typeof t=="number"?[t,t]:t==="deep"?[2,6]:t;n=n.filter(o=>o.level>=i&&o.level<=r),gh.length=0;for(const{element:o,link:a}of n)gh.push({element:o,link:a});const s=[];e:for(let o=0;o<n.length;o++){const a=n[o];if(o===0)s.push(a);else{for(let l=o-1;l>=0;l--){const u=n[l];if(u.level<a.level){(u.children||(u.children=[])).push(a);continue e}}s.push(a)}}return s}function a5(n,e){const{isAsideEnabled:t}=r5(),i=zI(s,100);let r=null;Ge(()=>{requestAnimationFrame(s),window.addEventListener("scroll",i)}),Zl(()=>{o(location.hash)}),Tt(()=>{window.removeEventListener("scroll",i)});function s(){if(!t.value)return;const a=window.scrollY,l=window.innerHeight,u=document.body.offsetHeight,c=Math.abs(a+l-u)<1,h=gh.map(({element:f,link:g})=>({link:g,top:l5(f)})).filter(({top:f})=>!Number.isNaN(f)).sort((f,g)=>f.top-g.top);if(!h.length){o(null);return}if(a<1){o(null);return}if(c){o(h[h.length-1].link);return}let d=null;for(const{link:f,top:g}of h){if(g>a+yy()+4)break;d=f}o(d)}function o(a){r&&r.classList.remove("active"),a==null?r=null:r=n.value.querySelector(`a[href="${decodeURIComponent(a)}"]`);const l=r;l?(l.classList.add("active"),e.value.style.top=l.offsetTop+39+"px",e.value.style.opacity="1"):(e.value.style.top="33px",e.value.style.opacity="0")}}function l5(n){let e=0;for(;n!==document.body;){if(n===null)return NaN;e+=n.offsetTop,n=n.offsetParent}return e}const u5=["href","title"],c5=F({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(n){function e({target:t}){const i=t.href.split("#")[1],r=document.getElementById(decodeURIComponent(i));r==null||r.focus({preventScroll:!0})}return(t,i)=>{const r=Dt("VPDocOutlineItem",!0);return w(),R("ul",{class:W(["VPDocOutlineItem",t.root?"root":"nested"])},[(w(!0),R(Pe,null,Ct(t.headers,({children:s,link:o,title:a})=>(w(),R("li",null,[I("a",{class:"outline-link",href:o,onClick:e,title:a},se(a),9,u5),s!=null&&s.length?(w(),X(r,{key:0,headers:s},null,8,["headers"])):V("",!0)]))),256))],2)}}}),j_=te(c5,[["__scopeId","data-v-1765836f"]]),h5=n=>(kn("data-v-56d128b6"),n=n(),Dn(),n),d5={class:"content"},f5={class:"outline-title",role:"heading","aria-level":"2"},g5={"aria-labelledby":"doc-outline-aria-label"},p5=h5(()=>I("span",{class:"visually-hidden",id:"doc-outline-aria-label"}," Table of Contents for current page ",-1)),m5=F({__name:"VPDocAsideOutline",setup(n){const{frontmatter:e,theme:t}=xe(),i=Xt([]);Jl(()=>{i.value=Kd(e.value.outline??t.value.outline)});const r=B(),s=B();return a5(r,s),(o,a)=>(w(),R("div",{class:W(["VPDocAsideOutline",{"has-outline":i.value.length>0}]),ref_key:"container",ref:r,role:"navigation"},[I("div",d5,[I("div",{class:"outline-marker",ref_key:"marker",ref:s},null,512),I("div",f5,se(v(z_)(v(t))),1),I("nav",g5,[p5,z(j_,{headers:i.value,root:!0},null,8,["headers"])])])],2))}}),_5=te(m5,[["__scopeId","data-v-56d128b6"]]),v5={class:"VPDocAsideCarbonAds"},y5=F({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(n){const e=()=>null;return(t,i)=>(w(),R("div",v5,[z(v(e),{"carbon-ads":t.carbonAds},null,8,["carbon-ads"])]))}}),b5=n=>(kn("data-v-27985039"),n=n(),Dn(),n),x5={class:"VPDocAside"},E5=b5(()=>I("div",{class:"spacer"},null,-1)),w5=F({__name:"VPDocAside",setup(n){const{theme:e}=xe();return(t,i)=>(w(),R("div",x5,[L(t.$slots,"aside-top",{},void 0,!0),L(t.$slots,"aside-outline-before",{},void 0,!0),z(_5),L(t.$slots,"aside-outline-after",{},void 0,!0),E5,L(t.$slots,"aside-ads-before",{},void 0,!0),v(e).carbonAds?(w(),X(y5,{key:0,"carbon-ads":v(e).carbonAds},null,8,["carbon-ads"])):V("",!0),L(t.$slots,"aside-ads-after",{},void 0,!0),L(t.$slots,"aside-bottom",{},void 0,!0)]))}}),C5=te(w5,[["__scopeId","data-v-27985039"]]);function T5(){const{theme:n,page:e}=xe();return T(()=>{const{text:t="Edit this page",pattern:i=""}=n.value.editLink||{};let r;return typeof i=="function"?r=i(e.value):r=i.replace(/:path/g,e.value.filePath),{url:r,text:t}})}function S5(){const{page:n,theme:e,frontmatter:t}=xe();return T(()=>{var l,u,c,h,d,f,g,p;const i=V_(e.value.sidebar,n.value.relativePath),r=t5(i),s=r.findIndex(_=>Ur(n.value.relativePath,_.link)),o=((l=e.value.docFooter)==null?void 0:l.prev)===!1&&!t.value.prev||t.value.prev===!1,a=((u=e.value.docFooter)==null?void 0:u.next)===!1&&!t.value.next||t.value.next===!1;return{prev:o?void 0:{text:(typeof t.value.prev=="string"?t.value.prev:typeof t.value.prev=="object"?t.value.prev.text:void 0)??((c=r[s-1])==null?void 0:c.docFooterText)??((h=r[s-1])==null?void 0:h.text),link:(typeof t.value.prev=="object"?t.value.prev.link:void 0)??((d=r[s-1])==null?void 0:d.link)},next:a?void 0:{text:(typeof t.value.next=="string"?t.value.next:typeof t.value.next=="object"?t.value.next.text:void 0)??((f=r[s+1])==null?void 0:f.docFooterText)??((g=r[s+1])==null?void 0:g.text),link:(typeof t.value.next=="object"?t.value.next.link:void 0)??((p=r[s+1])==null?void 0:p.link)}}})}const R5={},P5={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},I5=I("path",{d:"M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"},null,-1),L5=I("path",{d:"M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"},null,-1),A5=[I5,L5];function M5(n,e){return w(),R("svg",P5,A5)}const O5=te(R5,[["render",M5]]),mi=F({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(n){const e=n,t=T(()=>e.tag??(e.href?"a":"span")),i=T(()=>e.href&&_0.test(e.href));return(r,s)=>(w(),X(Qe(t.value),{class:W(["VPLink",{link:r.href,"vp-external-link-icon":i.value,"no-icon":r.noIcon}]),href:r.href?v(Hd)(r.href):void 0,target:r.target??(i.value?"_blank":void 0),rel:r.rel??(i.value?"noreferrer":void 0)},{default:O(()=>[L(r.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),F5={class:"VPLastUpdated"},k5=["datetime"],D5=F({__name:"VPDocFooterLastUpdated",setup(n){const{theme:e,page:t,frontmatter:i,lang:r}=xe(),s=T(()=>new Date(i.value.lastUpdated??t.value.lastUpdated)),o=T(()=>s.value.toISOString()),a=B("");return Ge(()=>{Ui(()=>{var l,u,c;a.value=new Intl.DateTimeFormat((u=(l=e.value.lastUpdated)==null?void 0:l.formatOptions)!=null&&u.forceLocale?r.value:void 0,((c=e.value.lastUpdated)==null?void 0:c.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(s.value)})}),(l,u)=>{var c;return w(),R("p",F5,[Lt(se(((c=v(e).lastUpdated)==null?void 0:c.text)||v(e).lastUpdatedText||"Last updated")+": ",1),I("time",{datetime:o.value},se(a.value),9,k5)])}}}),N5=te(D5,[["__scopeId","data-v-893f0c65"]]),$5={key:0,class:"VPDocFooter"},B5={key:0,class:"edit-info"},G5={key:0,class:"edit-link"},V5={key:1,class:"last-updated"},z5={key:1,class:"prev-next"},j5={class:"pager"},W5=["innerHTML"],U5=["innerHTML"],H5={class:"pager"},X5=["innerHTML"],K5=["innerHTML"],Y5=F({__name:"VPDocFooter",setup(n){const{theme:e,page:t,frontmatter:i}=xe(),r=T5(),s=S5(),o=T(()=>e.value.editLink&&i.value.editLink!==!1),a=T(()=>t.value.lastUpdated&&i.value.lastUpdated!==!1),l=T(()=>o.value||a.value||s.value.prev||s.value.next);return(u,c)=>{var h,d,f,g;return l.value?(w(),R("footer",$5,[L(u.$slots,"doc-footer-before",{},void 0,!0),o.value||a.value?(w(),R("div",B5,[o.value?(w(),R("div",G5,[z(mi,{class:"edit-link-button",href:v(r).url,"no-icon":!0},{default:O(()=>[z(O5,{class:"edit-link-icon","aria-label":"edit icon"}),Lt(" "+se(v(r).text),1)]),_:1},8,["href"])])):V("",!0),a.value?(w(),R("div",V5,[z(N5)])):V("",!0)])):V("",!0),(h=v(s).prev)!=null&&h.link||(d=v(s).next)!=null&&d.link?(w(),R("nav",z5,[I("div",j5,[(f=v(s).prev)!=null&&f.link?(w(),X(mi,{key:0,class:"pager-link prev",href:v(s).prev.link},{default:O(()=>{var p;return[I("span",{class:"desc",innerHTML:((p=v(e).docFooter)==null?void 0:p.prev)||"Previous page"},null,8,W5),I("span",{class:"title",innerHTML:v(s).prev.text},null,8,U5)]}),_:1},8,["href"])):V("",!0)]),I("div",H5,[(g=v(s).next)!=null&&g.link?(w(),X(mi,{key:0,class:"pager-link next",href:v(s).next.link},{default:O(()=>{var p;return[I("span",{class:"desc",innerHTML:((p=v(e).docFooter)==null?void 0:p.next)||"Next page"},null,8,X5),I("span",{class:"title",innerHTML:v(s).next.text},null,8,K5)]}),_:1},8,["href"])):V("",!0)])])):V("",!0)])):V("",!0)}}}),Z5=te(Y5,[["__scopeId","data-v-59ababbc"]]),q5=n=>(kn("data-v-f46b7ea7"),n=n(),Dn(),n),J5={class:"container"},Q5=q5(()=>I("div",{class:"aside-curtain"},null,-1)),eL={class:"aside-container"},tL={class:"aside-content"},nL={class:"content"},iL={class:"content-container"},rL={class:"main"},sL=F({__name:"VPDoc",setup(n){const{theme:e}=xe(),t=Ql(),{hasSidebar:i,hasAside:r,leftAside:s}=Yi(),o=T(()=>t.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(a,l)=>{const u=Dt("Content");return w(),R("div",{class:W(["VPDoc",{"has-sidebar":v(i),"has-aside":v(r)}])},[L(a.$slots,"doc-top",{},void 0,!0),I("div",J5,[v(r)?(w(),R("div",{key:0,class:W(["aside",{"left-aside":v(s)}])},[Q5,I("div",eL,[I("div",tL,[z(C5,null,{"aside-top":O(()=>[L(a.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":O(()=>[L(a.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":O(()=>[L(a.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":O(()=>[L(a.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":O(()=>[L(a.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":O(()=>[L(a.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):V("",!0),I("div",nL,[I("div",iL,[L(a.$slots,"doc-before",{},void 0,!0),I("main",rL,[z(u,{class:W(["vp-doc",[o.value,v(e).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),z(Z5,null,{"doc-footer-before":O(()=>[L(a.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),L(a.$slots,"doc-after",{},void 0,!0)])])]),L(a.$slots,"doc-bottom",{},void 0,!0)],2)}}}),oL=te(sL,[["__scopeId","data-v-f46b7ea7"]]),aL=F({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(n){const e=n,t=T(()=>e.href&&_0.test(e.href)),i=T(()=>e.tag||e.href?"a":"button");return(r,s)=>(w(),X(Qe(i.value),{class:W(["VPButton",[r.size,r.theme]]),href:r.href?v(Hd)(r.href):void 0,target:e.target??(t.value?"_blank":void 0),rel:e.rel??(t.value?"noreferrer":void 0)},{default:O(()=>[Lt(se(r.text),1)]),_:1},8,["class","href","target","rel"]))}}),lL=te(aL,[["__scopeId","data-v-4d0f4e41"]]),uL=["src","alt"],cL=F({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(n){return(e,t)=>{const i=Dt("VPImage",!0);return e.image?(w(),R(Pe,{key:0},[typeof e.image=="string"||"src"in e.image?(w(),R("img",Bt({key:0,class:"VPImage"},typeof e.image=="string"?e.$attrs:{...e.image,...e.$attrs},{src:v(Ih)(typeof e.image=="string"?e.image:e.image.src),alt:e.alt??(typeof e.image=="string"?"":e.image.alt||"")}),null,16,uL)):(w(),R(Pe,{key:1},[z(i,Bt({class:"dark",image:e.image.dark,alt:e.image.alt},e.$attrs),null,16,["image","alt"]),z(i,Bt({class:"light",image:e.image.light,alt:e.image.alt},e.$attrs),null,16,["image","alt"])],64))],64)):V("",!0)}}}),zl=te(cL,[["__scopeId","data-v-ee1ee9a6"]]),hL=n=>(kn("data-v-3395dd1c"),n=n(),Dn(),n),dL={class:"container"},fL={class:"main"},gL={key:0,class:"name"},pL=["innerHTML"],mL=["innerHTML"],_L=["innerHTML"],vL={key:0,class:"actions"},yL={key:0,class:"image"},bL={class:"image-container"},xL=hL(()=>I("div",{class:"image-bg"},null,-1)),EL=F({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(n){const e=pe("hero-image-slot-exists");return(t,i)=>(w(),R("div",{class:W(["VPHero",{"has-image":t.image||v(e)}])},[I("div",dL,[I("div",fL,[L(t.$slots,"home-hero-info-before",{},void 0,!0),L(t.$slots,"home-hero-info",{},()=>[t.name?(w(),R("h1",gL,[I("span",{innerHTML:t.name,class:"clip"},null,8,pL)])):V("",!0),t.text?(w(),R("p",{key:1,innerHTML:t.text,class:"text"},null,8,mL)):V("",!0),t.tagline?(w(),R("p",{key:2,innerHTML:t.tagline,class:"tagline"},null,8,_L)):V("",!0)],!0),L(t.$slots,"home-hero-info-after",{},void 0,!0),t.actions?(w(),R("div",vL,[(w(!0),R(Pe,null,Ct(t.actions,r=>(w(),R("div",{key:r.link,class:"action"},[z(lL,{tag:"a",size:"medium",theme:r.theme,text:r.text,href:r.link,target:r.target,rel:r.rel},null,8,["theme","text","href","target","rel"])]))),128))])):V("",!0),L(t.$slots,"home-hero-actions-after",{},void 0,!0)]),t.image||v(e)?(w(),R("div",yL,[I("div",bL,[xL,L(t.$slots,"home-hero-image",{},()=>[t.image?(w(),X(zl,{key:0,class:"image-src",image:t.image},null,8,["image"])):V("",!0)],!0)])])):V("",!0)])],2))}}),wL=te(EL,[["__scopeId","data-v-3395dd1c"]]),CL=F({__name:"VPHomeHero",setup(n){const{frontmatter:e}=xe();return(t,i)=>v(e).hero?(w(),X(wL,{key:0,class:"VPHomeHero",name:v(e).hero.name,text:v(e).hero.text,tagline:v(e).hero.tagline,image:v(e).hero.image,actions:v(e).hero.actions},{"home-hero-info-before":O(()=>[L(t.$slots,"home-hero-info-before")]),"home-hero-info":O(()=>[L(t.$slots,"home-hero-info")]),"home-hero-info-after":O(()=>[L(t.$slots,"home-hero-info-after")]),"home-hero-actions-after":O(()=>[L(t.$slots,"home-hero-actions-after")]),"home-hero-image":O(()=>[L(t.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):V("",!0)}}),TL={},SL={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},RL=I("path",{d:"M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"},null,-1),PL=[RL];function IL(n,e){return w(),R("svg",SL,PL)}const LL=te(TL,[["render",IL]]),AL={class:"box"},ML={key:0,class:"icon"},OL=["innerHTML"],FL=["innerHTML"],kL=["innerHTML"],DL={key:4,class:"link-text"},NL={class:"link-text-value"},$L=F({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(n){return(e,t)=>(w(),X(mi,{class:"VPFeature",href:e.link,rel:e.rel,target:e.target,"no-icon":!0,tag:e.link?"a":"div"},{default:O(()=>[I("article",AL,[typeof e.icon=="object"&&e.icon.wrap?(w(),R("div",ML,[z(zl,{image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])])):typeof e.icon=="object"?(w(),X(zl,{key:1,image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])):e.icon?(w(),R("div",{key:2,class:"icon",innerHTML:e.icon},null,8,OL)):V("",!0),I("h2",{class:"title",innerHTML:e.title},null,8,FL),e.details?(w(),R("p",{key:3,class:"details",innerHTML:e.details},null,8,kL)):V("",!0),e.linkText?(w(),R("div",DL,[I("p",NL,[Lt(se(e.linkText)+" ",1),z(LL,{class:"link-text-icon"})])])):V("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),BL=te($L,[["__scopeId","data-v-03cc0ad9"]]),GL={key:0,class:"VPFeatures"},VL={class:"container"},zL={class:"items"},jL=F({__name:"VPFeatures",props:{features:{}},setup(n){const e=n,t=T(()=>{const i=e.features.length;if(i){if(i===2)return"grid-2";if(i===3)return"grid-3";if(i%3===0)return"grid-6";if(i>3)return"grid-4"}else return});return(i,r)=>i.features?(w(),R("div",GL,[I("div",VL,[I("div",zL,[(w(!0),R(Pe,null,Ct(i.features,s=>(w(),R("div",{key:s.title,class:W(["item",[t.value]])},[z(BL,{icon:s.icon,title:s.title,details:s.details,link:s.link,"link-text":s.linkText,rel:s.rel,target:s.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):V("",!0)}}),WL=te(jL,[["__scopeId","data-v-b12d6208"]]),UL=F({__name:"VPHomeFeatures",setup(n){const{frontmatter:e}=xe();return(t,i)=>v(e).features?(w(),X(WL,{key:0,class:"VPHomeFeatures",features:v(e).features},null,8,["features"])):V("",!0)}}),HL={class:"VPHome"},XL=F({__name:"VPHome",setup(n){return(e,t)=>{const i=Dt("Content");return w(),R("div",HL,[L(e.$slots,"home-hero-before",{},void 0,!0),z(CL,null,{"home-hero-info-before":O(()=>[L(e.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":O(()=>[L(e.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":O(()=>[L(e.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":O(()=>[L(e.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":O(()=>[L(e.$slots,"home-hero-image",{},void 0,!0)]),_:3}),L(e.$slots,"home-hero-after",{},void 0,!0),L(e.$slots,"home-features-before",{},void 0,!0),z(UL),L(e.$slots,"home-features-after",{},void 0,!0),z(i)])}}}),KL=te(XL,[["__scopeId","data-v-5a68a64d"]]),YL={},ZL={class:"VPPage"};function qL(n,e){const t=Dt("Content");return w(),R("div",ZL,[L(n.$slots,"page-top"),z(t),L(n.$slots,"page-bottom")])}const JL=te(YL,[["render",qL]]),QL=F({__name:"VPContent",setup(n){const{page:e,frontmatter:t}=xe(),{hasSidebar:i}=Yi();return(r,s)=>(w(),R("div",{class:W(["VPContent",{"has-sidebar":v(i),"is-home":v(t).layout==="home"}]),id:"VPContent"},[v(e).isNotFound?L(r.$slots,"not-found",{key:0},()=>[z(QI)],!0):v(t).layout==="page"?(w(),X(JL,{key:1},{"page-top":O(()=>[L(r.$slots,"page-top",{},void 0,!0)]),"page-bottom":O(()=>[L(r.$slots,"page-bottom",{},void 0,!0)]),_:3})):v(t).layout==="home"?(w(),X(KL,{key:2},{"home-hero-before":O(()=>[L(r.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":O(()=>[L(r.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":O(()=>[L(r.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":O(()=>[L(r.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":O(()=>[L(r.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":O(()=>[L(r.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":O(()=>[L(r.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":O(()=>[L(r.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":O(()=>[L(r.$slots,"home-features-after",{},void 0,!0)]),_:3})):v(t).layout&&v(t).layout!=="doc"?(w(),X(Qe(v(t).layout),{key:3})):(w(),X(oL,{key:4},{"doc-top":O(()=>[L(r.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":O(()=>[L(r.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":O(()=>[L(r.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":O(()=>[L(r.$slots,"doc-before",{},void 0,!0)]),"doc-after":O(()=>[L(r.$slots,"doc-after",{},void 0,!0)]),"aside-top":O(()=>[L(r.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":O(()=>[L(r.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":O(()=>[L(r.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":O(()=>[L(r.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":O(()=>[L(r.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":O(()=>[L(r.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),eA=te(QL,[["__scopeId","data-v-852b4b06"]]),tA={class:"container"},nA=["innerHTML"],iA=["innerHTML"],rA=F({__name:"VPFooter",setup(n){const{theme:e,frontmatter:t}=xe(),{hasSidebar:i}=Yi();return(r,s)=>v(e).footer&&v(t).footer!==!1?(w(),R("footer",{key:0,class:W(["VPFooter",{"has-sidebar":v(i)}])},[I("div",tA,[v(e).footer.message?(w(),R("p",{key:0,class:"message",innerHTML:v(e).footer.message},null,8,nA)):V("",!0),v(e).footer.copyright?(w(),R("p",{key:1,class:"copyright",innerHTML:v(e).footer.copyright},null,8,iA)):V("",!0)])],2)):V("",!0)}}),sA=te(rA,[["__scopeId","data-v-3e4a0b41"]]);function W_(){const{theme:n,frontmatter:e}=xe(),t=Xt([]),i=T(()=>t.value.length>0);return Jl(()=>{t.value=Kd(e.value.outline??n.value.outline)}),{headers:t,hasLocalNav:i}}const oA={},aA={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},lA=I("path",{d:"M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"},null,-1),uA=[lA];function cA(n,e){return w(),R("svg",aA,uA)}const U_=te(oA,[["render",cA]]),hA={class:"header"},dA={class:"outline"},fA=F({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(n){const e=n,{theme:t}=xe(),i=B(!1),r=B(0),s=B(),o=B();by(s,()=>{i.value=!1}),kc("Escape",()=>{i.value=!1}),Jl(()=>{i.value=!1});function a(){i.value=!i.value,r.value=window.innerHeight+Math.min(window.scrollY-e.navHeight,0)}function l(c){c.target.classList.contains("outline-link")&&(o.value&&(o.value.style.transition="none"),He(()=>{i.value=!1}))}function u(){i.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(c,h)=>(w(),R("div",{class:"VPLocalNavOutlineDropdown",style:pt({"--vp-vh":r.value+"px"}),ref_key:"main",ref:s},[c.headers.length>0?(w(),R("button",{key:0,onClick:a,class:W({open:i.value})},[Lt(se(v(z_)(v(t)))+" ",1),z(U_,{class:"icon"})],2)):(w(),R("button",{key:1,onClick:u},se(v(t).returnToTopLabel||"Return to top"),1)),z(Wi,{name:"flyout"},{default:O(()=>[i.value?(w(),R("div",{key:0,ref_key:"items",ref:o,class:"items",onClick:l},[I("div",hA,[I("a",{class:"top-link",href:"#",onClick:u},se(v(t).returnToTopLabel||"Return to top"),1)]),I("div",dA,[z(j_,{headers:c.headers},null,8,["headers"])])],512)):V("",!0)]),_:1})],4))}}),gA=te(fA,[["__scopeId","data-v-ed51edb9"]]),pA={},mA={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},_A=I("path",{d:"M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"},null,-1),vA=I("path",{d:"M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"},null,-1),yA=I("path",{d:"M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"},null,-1),bA=I("path",{d:"M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"},null,-1),xA=[_A,vA,yA,bA];function EA(n,e){return w(),R("svg",mA,xA)}const wA=te(pA,[["render",EA]]),CA={class:"container"},TA=["aria-expanded"],SA={class:"menu-text"},RA=F({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(n){const{theme:e,frontmatter:t}=xe(),{hasSidebar:i}=Yi(),{headers:r}=W_(),{y:s}=v0(),o=B(0);Ge(()=>{o.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),Jl(()=>{r.value=Kd(t.value.outline??e.value.outline)});const a=T(()=>r.value.length===0),l=T(()=>a.value&&!i.value),u=T(()=>({VPLocalNav:!0,"has-sidebar":i.value,empty:a.value,fixed:l.value}));return(c,h)=>v(t).layout!=="home"&&(!l.value||v(s)>=o.value)?(w(),R("div",{key:0,class:W(u.value)},[I("div",CA,[v(i)?(w(),R("button",{key:0,class:"menu","aria-expanded":c.open,"aria-controls":"VPSidebarNav",onClick:h[0]||(h[0]=d=>c.$emit("open-menu"))},[z(wA,{class:"menu-icon"}),I("span",SA,se(v(e).sidebarMenuLabel||"Menu"),1)],8,TA)):V("",!0),z(gA,{headers:v(r),navHeight:o.value},null,8,["headers","navHeight"])])],2)):V("",!0)}}),PA=te(RA,[["__scopeId","data-v-c425768a"]]);function IA(){const n=B(!1);function e(){n.value=!0,window.addEventListener("resize",r)}function t(){n.value=!1,window.removeEventListener("resize",r)}function i(){n.value?t():e()}function r(){window.outerWidth>=768&&t()}const s=Ql();return ee(()=>s.path,t),{isScreenOpen:n,openScreen:e,closeScreen:t,toggleScreen:i}}const LA={},AA={class:"VPSwitch",type:"button",role:"switch"},MA={class:"check"},OA={key:0,class:"icon"};function FA(n,e){return w(),R("button",AA,[I("span",MA,[n.$slots.default?(w(),R("span",OA,[L(n.$slots,"default",{},void 0,!0)])):V("",!0)])])}const kA=te(LA,[["render",FA],["__scopeId","data-v-d209a8fc"]]),DA={},NA={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},$A=I("path",{d:"M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"},null,-1),BA=[$A];function GA(n,e){return w(),R("svg",NA,BA)}const VA=te(DA,[["render",GA]]),zA={},jA={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},WA=xy('<path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path>',9),UA=[WA];function HA(n,e){return w(),R("svg",jA,UA)}const XA=te(zA,[["render",HA]]),KA=F({__name:"VPSwitchAppearance",setup(n){const{isDark:e,theme:t}=xe(),i=pe("toggle-appearance",()=>{e.value=!e.value}),r=T(()=>e.value?t.value.lightModeSwitchTitle||"Switch to light theme":t.value.darkModeSwitchTitle||"Switch to dark theme");return(s,o)=>(w(),X(kA,{title:r.value,class:"VPSwitchAppearance","aria-checked":v(e),onClick:v(i)},{default:O(()=>[z(XA,{class:"sun"}),z(VA,{class:"moon"})]),_:1},8,["title","aria-checked","onClick"]))}}),Yd=te(KA,[["__scopeId","data-v-c4cc845f"]]),YA={key:0,class:"VPNavBarAppearance"},ZA=F({__name:"VPNavBarAppearance",setup(n){const{site:e}=xe();return(t,i)=>v(e).appearance&&v(e).appearance!=="force-dark"?(w(),R("div",YA,[z(Yd)])):V("",!0)}}),qA=te(ZA,[["__scopeId","data-v-f21f34c4"]]),Zd=B();let H_=!1,gc=0;function JA(n){const e=B(!1);if(so){!H_&&QA(),gc++;const t=ee(Zd,i=>{var r,s,o;i===n.el.value||(r=n.el.value)!=null&&r.contains(i)?(e.value=!0,(s=n.onFocus)==null||s.call(n)):(e.value=!1,(o=n.onBlur)==null||o.call(n))});Tt(()=>{t(),gc--,gc||eM()})}return Rh(e)}function QA(){document.addEventListener("focusin",X_),H_=!0,Zd.value=document.activeElement}function eM(){document.removeEventListener("focusin",X_)}function X_(){Zd.value=document.activeElement}const tM={},nM={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},iM=I("path",{d:"M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"},null,-1),rM=[iM];function sM(n,e){return w(),R("svg",nM,rM)}const K_=te(tM,[["render",sM]]),oM={},aM={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},lM=I("circle",{cx:"12",cy:"12",r:"2"},null,-1),uM=I("circle",{cx:"19",cy:"12",r:"2"},null,-1),cM=I("circle",{cx:"5",cy:"12",r:"2"},null,-1),hM=[lM,uM,cM];function dM(n,e){return w(),R("svg",aM,hM)}const fM=te(oM,[["render",dM]]),gM={class:"VPMenuLink"},pM=F({__name:"VPMenuLink",props:{item:{}},setup(n){const{page:e}=xe();return(t,i)=>(w(),R("div",gM,[z(mi,{class:W({active:v(Ur)(v(e).relativePath,t.item.activeMatch||t.item.link,!!t.item.activeMatch)}),href:t.item.link,target:t.item.target,rel:t.item.rel},{default:O(()=>[Lt(se(t.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),ku=te(pM,[["__scopeId","data-v-bef3c788"]]),mM={class:"VPMenuGroup"},_M={key:0,class:"title"},vM=F({__name:"VPMenuGroup",props:{text:{},items:{}},setup(n){return(e,t)=>(w(),R("div",mM,[e.text?(w(),R("p",_M,se(e.text),1)):V("",!0),(w(!0),R(Pe,null,Ct(e.items,i=>(w(),R(Pe,null,["link"in i?(w(),X(ku,{key:0,item:i},null,8,["item"])):V("",!0)],64))),256))]))}}),yM=te(vM,[["__scopeId","data-v-430f1749"]]),bM={class:"VPMenu"},xM={key:0,class:"items"},EM=F({__name:"VPMenu",props:{items:{}},setup(n){return(e,t)=>(w(),R("div",bM,[e.items?(w(),R("div",xM,[(w(!0),R(Pe,null,Ct(e.items,i=>(w(),R(Pe,{key:i.text},["link"in i?(w(),X(ku,{key:0,item:i},null,8,["item"])):(w(),X(yM,{key:1,text:i.text,items:i.items},null,8,["text","items"]))],64))),128))])):V("",!0),L(e.$slots,"default",{},void 0,!0)]))}}),wM=te(EM,[["__scopeId","data-v-9e038619"]]),CM=["aria-expanded","aria-label"],TM={key:0,class:"text"},SM=["innerHTML"],RM={class:"menu"},PM=F({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(n){const e=B(!1),t=B();JA({el:t,onBlur:i});function i(){e.value=!1}return(r,s)=>(w(),R("div",{class:"VPFlyout",ref_key:"el",ref:t,onMouseenter:s[1]||(s[1]=o=>e.value=!0),onMouseleave:s[2]||(s[2]=o=>e.value=!1)},[I("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":e.value,"aria-label":r.label,onClick:s[0]||(s[0]=o=>e.value=!e.value)},[r.button||r.icon?(w(),R("span",TM,[r.icon?(w(),X(Qe(r.icon),{key:0,class:"option-icon"})):V("",!0),r.button?(w(),R("span",{key:1,innerHTML:r.button},null,8,SM)):V("",!0),z(K_,{class:"text-icon"})])):(w(),X(fM,{key:1,class:"icon"}))],8,CM),I("div",RM,[z(wM,{items:r.items},{default:O(()=>[L(r.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),qd=te(PM,[["__scopeId","data-v-011a8b5c"]]),IM={discord:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg>',facebook:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',github:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>',instagram:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg>',linkedin:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>LinkedIn</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',mastodon:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Mastodon</title><path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/></svg>',npm:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>npm</title><path d="M1.763 0C.786 0 0 .786 0 1.763v20.474C0 23.214.786 24 1.763 24h20.474c.977 0 1.763-.786 1.763-1.763V1.763C24 .786 23.214 0 22.237 0zM5.13 5.323l13.837.019-.009 13.836h-3.464l.01-10.382h-3.456L12.04 19.17H5.113z"/></svg>',slack:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Slack</title><path d="M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"/></svg>',twitter:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Twitter</title><path d="M21.543 7.104c.015.211.015.423.015.636 0 6.507-4.954 14.01-14.01 14.01v-.003A13.94 13.94 0 0 1 0 19.539a9.88 9.88 0 0 0 7.287-2.041 4.93 4.93 0 0 1-4.6-3.42 4.916 4.916 0 0 0 2.223-.084A4.926 4.926 0 0 1 .96 9.167v-.062a4.887 4.887 0 0 0 2.235.616A4.928 4.928 0 0 1 1.67 3.148 13.98 13.98 0 0 0 11.82 8.292a4.929 4.929 0 0 1 8.39-4.49 9.868 9.868 0 0 0 3.128-1.196 4.941 4.941 0 0 1-2.165 2.724A9.828 9.828 0 0 0 24 4.555a10.019 10.019 0 0 1-2.457 2.549z"/></svg>',x:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>',youtube:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>YouTube</title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>'},LM=["href","aria-label","innerHTML"],AM=F({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(n){const e=n,t=T(()=>typeof e.icon=="object"?e.icon.svg:IM[e.icon]);return(i,r)=>(w(),R("a",{class:"VPSocialLink no-icon",href:i.link,"aria-label":i.ariaLabel??(typeof i.icon=="string"?i.icon:""),target:"_blank",rel:"noopener",innerHTML:t.value},null,8,LM))}}),MM=te(AM,[["__scopeId","data-v-767600ab"]]),OM={class:"VPSocialLinks"},FM=F({__name:"VPSocialLinks",props:{links:{}},setup(n){return(e,t)=>(w(),R("div",OM,[(w(!0),R(Pe,null,Ct(e.links,({link:i,icon:r,ariaLabel:s})=>(w(),X(MM,{key:i,icon:r,link:i,ariaLabel:s},null,8,["icon","link","ariaLabel"]))),128))]))}}),Jd=te(FM,[["__scopeId","data-v-ab9902e9"]]),kM={key:0,class:"group translations"},DM={class:"trans-title"},NM={key:1,class:"group"},$M={class:"item appearance"},BM={class:"label"},GM={class:"appearance-action"},VM={key:2,class:"group"},zM={class:"item social-links"},jM=F({__name:"VPNavBarExtra",setup(n){const{site:e,theme:t}=xe(),{localeLinks:i,currentLang:r}=wa({correspondingLink:!0}),s=T(()=>i.value.length&&r.value.label||e.value.appearance||t.value.socialLinks);return(o,a)=>s.value?(w(),X(qd,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:O(()=>[v(i).length&&v(r).label?(w(),R("div",kM,[I("p",DM,se(v(r).label),1),(w(!0),R(Pe,null,Ct(v(i),l=>(w(),X(ku,{key:l.link,item:l},null,8,["item"]))),128))])):V("",!0),v(e).appearance&&v(e).appearance!=="force-dark"?(w(),R("div",NM,[I("div",$M,[I("p",BM,se(v(t).darkModeSwitchLabel||"Appearance"),1),I("div",GM,[z(Yd)])])])):V("",!0),v(t).socialLinks?(w(),R("div",VM,[I("div",zM,[z(Jd,{class:"social-links-list",links:v(t).socialLinks},null,8,["links"])])])):V("",!0)]),_:1})):V("",!0)}}),WM=te(jM,[["__scopeId","data-v-d9620061"]]),UM=n=>(kn("data-v-41f11edf"),n=n(),Dn(),n),HM=["aria-expanded"],XM=UM(()=>I("span",{class:"container"},[I("span",{class:"top"}),I("span",{class:"middle"}),I("span",{class:"bottom"})],-1)),KM=[XM],YM=F({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(n){return(e,t)=>(w(),R("button",{type:"button",class:W(["VPNavBarHamburger",{active:e.active}]),"aria-label":"mobile navigation","aria-expanded":e.active,"aria-controls":"VPNavScreen",onClick:t[0]||(t[0]=i=>e.$emit("click"))},KM,10,HM))}}),ZM=te(YM,[["__scopeId","data-v-41f11edf"]]),qM=["innerHTML"],JM=F({__name:"VPNavBarMenuLink",props:{item:{}},setup(n){const{page:e}=xe();return(t,i)=>(w(),X(mi,{class:W({VPNavBarMenuLink:!0,active:v(Ur)(v(e).relativePath,t.item.activeMatch||t.item.link,!!t.item.activeMatch)}),href:t.item.link,target:t.item.target,rel:t.item.rel,tabindex:"0"},{default:O(()=>[I("span",{innerHTML:t.item.text},null,8,qM)]),_:1},8,["class","href","target","rel"]))}}),QM=te(JM,[["__scopeId","data-v-80c9abd3"]]),eO=F({__name:"VPNavBarMenuGroup",props:{item:{}},setup(n){const e=n,{page:t}=xe(),i=s=>"link"in s?Ur(t.value.relativePath,s.link,!!e.item.activeMatch):s.items.some(i),r=T(()=>i(e.item));return(s,o)=>(w(),X(qd,{class:W({VPNavBarMenuGroup:!0,active:v(Ur)(v(t).relativePath,s.item.activeMatch,!!s.item.activeMatch)||r.value}),button:s.item.text,items:s.item.items},null,8,["class","button","items"]))}}),tO=n=>(kn("data-v-33626360"),n=n(),Dn(),n),nO={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},iO=tO(()=>I("span",{id:"main-nav-aria-label",class:"visually-hidden"},"Main Navigation",-1)),rO=F({__name:"VPNavBarMenu",setup(n){const{theme:e}=xe();return(t,i)=>v(e).nav?(w(),R("nav",nO,[iO,(w(!0),R(Pe,null,Ct(v(e).nav,r=>(w(),R(Pe,{key:r.text},["link"in r?(w(),X(QM,{key:0,item:r},null,8,["item"])):(w(),X(eO,{key:1,item:r},null,8,["item"]))],64))),128))])):V("",!0)}}),sO=te(rO,[["__scopeId","data-v-33626360"]]);function oO(n){const{localeIndex:e,theme:t}=xe();function i(r){var g,p,_;const s=r.split("."),o=(g=t.value.search)==null?void 0:g.options,a=o&&typeof o=="object",l=a&&((_=(p=o.locales)==null?void 0:p[e.value])==null?void 0:_.translations)||null,u=a&&o.translations||null;let c=l,h=u,d=n;const f=s.pop();for(const m of s){let b=null;const y=d==null?void 0:d[m];y&&(b=d=y);const x=h==null?void 0:h[m];x&&(b=h=x);const E=c==null?void 0:c[m];E&&(b=c=E),y||(d=b),x||(h=b),E||(c=b)}return(c==null?void 0:c[f])??(h==null?void 0:h[f])??(d==null?void 0:d[f])??""}return i}const aO=["aria-label"],lO={class:"DocSearch-Button-Container"},uO=I("svg",{class:"DocSearch-Search-Icon",width:"20",height:"20",viewBox:"0 0 20 20","aria-label":"search icon"},[I("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"})],-1),cO={class:"DocSearch-Button-Placeholder"},hO=I("span",{class:"DocSearch-Button-Keys"},[I("kbd",{class:"DocSearch-Button-Key"}),I("kbd",{class:"DocSearch-Button-Key"},"K")],-1),xp=F({__name:"VPNavBarSearchButton",setup(n){const t=oO({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(i,r)=>(w(),R("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":v(t)("button.buttonAriaLabel")},[I("span",lO,[uO,I("span",cO,se(v(t)("button.buttonText")),1)]),hO],8,aO))}}),dO={class:"VPNavBarSearch"},fO={id:"local-search"},gO={key:1,id:"docsearch"},pO=F({__name:"VPNavBarSearch",setup(n){const e=Ey(()=>wy(()=>import("./VPLocalSearchBox.BY2m3Gpq.js"),__vite__mapDeps([0,1]))),t=()=>null,{theme:i}=xe(),r=B(!1),s=B(!1);Ge(()=>{});function o(){r.value||(r.value=!0,setTimeout(a,16))}function a(){const h=new Event("keydown");h.key="k",h.metaKey=!0,window.dispatchEvent(h),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||a()},16)}function l(h){const d=h.target,f=d.tagName;return d.isContentEditable||f==="INPUT"||f==="SELECT"||f==="TEXTAREA"}const u=B(!1);kc("k",h=>{(h.ctrlKey||h.metaKey)&&(h.preventDefault(),u.value=!0)}),kc("/",h=>{l(h)||(h.preventDefault(),u.value=!0)});const c="local";return(h,d)=>{var f;return w(),R("div",dO,[v(c)==="local"?(w(),R(Pe,{key:0},[u.value?(w(),X(v(e),{key:0,onClose:d[0]||(d[0]=g=>u.value=!1)})):V("",!0),I("div",fO,[z(xp,{onClick:d[1]||(d[1]=g=>u.value=!0)})])],64)):v(c)==="algolia"?(w(),R(Pe,{key:1},[r.value?(w(),X(v(t),{key:0,algolia:((f=v(i).search)==null?void 0:f.options)??v(i).algolia,onVnodeBeforeMount:d[2]||(d[2]=g=>s.value=!0)},null,8,["algolia"])):V("",!0),s.value?V("",!0):(w(),R("div",gO,[z(xp,{onClick:o})]))],64)):V("",!0)])}}}),mO=F({__name:"VPNavBarSocialLinks",setup(n){const{theme:e}=xe();return(t,i)=>v(e).socialLinks?(w(),X(Jd,{key:0,class:"VPNavBarSocialLinks",links:v(e).socialLinks},null,8,["links"])):V("",!0)}}),_O=te(mO,[["__scopeId","data-v-5dee5c81"]]),vO=["href","rel","target"],yO={key:1},bO={key:2},xO=F({__name:"VPNavBarTitle",setup(n){const{site:e,theme:t}=xe(),{hasSidebar:i}=Yi(),{currentLang:r}=wa(),s=T(()=>{var l;return typeof t.value.logoLink=="string"?t.value.logoLink:(l=t.value.logoLink)==null?void 0:l.link}),o=T(()=>{var l;return typeof t.value.logoLink=="string"||(l=t.value.logoLink)==null?void 0:l.rel}),a=T(()=>{var l;return typeof t.value.logoLink=="string"||(l=t.value.logoLink)==null?void 0:l.target});return(l,u)=>(w(),R("div",{class:W(["VPNavBarTitle",{"has-sidebar":v(i)}])},[I("a",{class:"title",href:s.value??v(Hd)(v(r).link),rel:o.value,target:a.value},[L(l.$slots,"nav-bar-title-before",{},void 0,!0),v(t).logo?(w(),X(zl,{key:0,class:"logo",image:v(t).logo},null,8,["image"])):V("",!0),v(t).siteTitle?(w(),R("span",yO,se(v(t).siteTitle),1)):v(t).siteTitle===void 0?(w(),R("span",bO,se(v(e).title),1)):V("",!0),L(l.$slots,"nav-bar-title-after",{},void 0,!0)],8,vO)],2))}}),EO=te(xO,[["__scopeId","data-v-05defa20"]]),wO={},CO={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},TO=I("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),SO=I("path",{d:" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z ",class:"css-c4d79v"},null,-1),RO=[TO,SO];function PO(n,e){return w(),R("svg",CO,RO)}const Y_=te(wO,[["render",PO]]),IO={class:"items"},LO={class:"title"},AO=F({__name:"VPNavBarTranslations",setup(n){const{theme:e}=xe(),{localeLinks:t,currentLang:i}=wa({correspondingLink:!0});return(r,s)=>v(t).length&&v(i).label?(w(),X(qd,{key:0,class:"VPNavBarTranslations",icon:Y_,label:v(e).langMenuLabel||"Change language"},{default:O(()=>[I("div",IO,[I("p",LO,se(v(i).label),1),(w(!0),R(Pe,null,Ct(v(t),o=>(w(),X(ku,{key:o.link,item:o},null,8,["item"]))),128))])]),_:1},8,["label"])):V("",!0)}}),MO=te(AO,[["__scopeId","data-v-19cc793c"]]),OO=n=>(kn("data-v-c5616c95"),n=n(),Dn(),n),FO={class:"wrapper"},kO={class:"container"},DO={class:"title"},NO={class:"content"},$O={class:"content-body"},BO=OO(()=>I("div",{class:"divider"},[I("div",{class:"divider-line"})],-1)),GO=F({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(n){const{y:e}=v0(),{hasSidebar:t}=Yi(),{hasLocalNav:i}=W_(),{frontmatter:r}=xe(),s=B({});return m0(()=>{s.value={"has-sidebar":t.value,"has-local-nav":i.value,top:r.value.layout==="home"&&e.value===0}}),(o,a)=>(w(),R("div",{class:W(["VPNavBar",s.value])},[I("div",FO,[I("div",kO,[I("div",DO,[z(EO,null,{"nav-bar-title-before":O(()=>[L(o.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":O(()=>[L(o.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),I("div",NO,[I("div",$O,[L(o.$slots,"nav-bar-content-before",{},void 0,!0),z(pO,{class:"search"}),z(sO,{class:"menu"}),z(MO,{class:"translations"}),z(qA,{class:"appearance"}),z(_O,{class:"social-links"}),z(WM,{class:"extra"}),L(o.$slots,"nav-bar-content-after",{},void 0,!0),z(ZM,{class:"hamburger",active:o.isScreenOpen,onClick:a[0]||(a[0]=l=>o.$emit("toggle-screen"))},null,8,["active"])])])])]),BO],2))}}),VO=te(GO,[["__scopeId","data-v-c5616c95"]]),zO={key:0,class:"VPNavScreenAppearance"},jO={class:"text"},WO=F({__name:"VPNavScreenAppearance",setup(n){const{site:e,theme:t}=xe();return(i,r)=>v(e).appearance&&v(e).appearance!=="force-dark"?(w(),R("div",zO,[I("p",jO,se(v(t).darkModeSwitchLabel||"Appearance"),1),z(Yd)])):V("",!0)}}),UO=te(WO,[["__scopeId","data-v-955addcc"]]),HO=F({__name:"VPNavScreenMenuLink",props:{item:{}},setup(n){const e=pe("close-screen");return(t,i)=>(w(),X(mi,{class:"VPNavScreenMenuLink",href:t.item.link,target:t.item.target,rel:t.item.rel,onClick:v(e)},{default:O(()=>[Lt(se(t.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),XO=te(HO,[["__scopeId","data-v-d77f1beb"]]),KO={},YO={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24"},ZO=I("path",{d:"M18.9,10.9h-6v-6c0-0.6-0.4-1-1-1s-1,0.4-1,1v6h-6c-0.6,0-1,0.4-1,1s0.4,1,1,1h6v6c0,0.6,0.4,1,1,1s1-0.4,1-1v-6h6c0.6,0,1-0.4,1-1S19.5,10.9,18.9,10.9z"},null,-1),qO=[ZO];function JO(n,e){return w(),R("svg",YO,qO)}const QO=te(KO,[["render",JO]]),eF=F({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(n){const e=pe("close-screen");return(t,i)=>(w(),X(mi,{class:"VPNavScreenMenuGroupLink",href:t.item.link,target:t.item.target,rel:t.item.rel,onClick:v(e)},{default:O(()=>[Lt(se(t.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),Z_=te(eF,[["__scopeId","data-v-18c36782"]]),tF={class:"VPNavScreenMenuGroupSection"},nF={key:0,class:"title"},iF=F({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(n){return(e,t)=>(w(),R("div",tF,[e.text?(w(),R("p",nF,se(e.text),1)):V("",!0),(w(!0),R(Pe,null,Ct(e.items,i=>(w(),X(Z_,{key:i.text,item:i},null,8,["item"]))),128))]))}}),rF=te(iF,[["__scopeId","data-v-ec5ee7db"]]),sF=["aria-controls","aria-expanded"],oF=["innerHTML"],aF=["id"],lF={key:1,class:"group"},uF=F({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(n){const e=n,t=B(!1),i=T(()=>`NavScreenGroup-${e.text.replace(" ","-").toLowerCase()}`);function r(){t.value=!t.value}return(s,o)=>(w(),R("div",{class:W(["VPNavScreenMenuGroup",{open:t.value}])},[I("button",{class:"button","aria-controls":i.value,"aria-expanded":t.value,onClick:r},[I("span",{class:"button-text",innerHTML:s.text},null,8,oF),z(QO,{class:"button-icon"})],8,sF),I("div",{id:i.value,class:"items"},[(w(!0),R(Pe,null,Ct(s.items,a=>(w(),R(Pe,{key:a.text},["link"in a?(w(),R("div",{key:a.text,class:"item"},[z(Z_,{item:a},null,8,["item"])])):(w(),R("div",lF,[z(rF,{text:a.text,items:a.items},null,8,["text","items"])]))],64))),128))],8,aF)],2))}}),cF=te(uF,[["__scopeId","data-v-040e0e9c"]]),hF={key:0,class:"VPNavScreenMenu"},dF=F({__name:"VPNavScreenMenu",setup(n){const{theme:e}=xe();return(t,i)=>v(e).nav?(w(),R("nav",hF,[(w(!0),R(Pe,null,Ct(v(e).nav,r=>(w(),R(Pe,{key:r.text},["link"in r?(w(),X(XO,{key:0,item:r},null,8,["item"])):(w(),X(cF,{key:1,text:r.text||"",items:r.items},null,8,["text","items"]))],64))),128))])):V("",!0)}}),fF=F({__name:"VPNavScreenSocialLinks",setup(n){const{theme:e}=xe();return(t,i)=>v(e).socialLinks?(w(),X(Jd,{key:0,class:"VPNavScreenSocialLinks",links:v(e).socialLinks},null,8,["links"])):V("",!0)}}),gF={class:"list"},pF=F({__name:"VPNavScreenTranslations",setup(n){const{localeLinks:e,currentLang:t}=wa({correspondingLink:!0}),i=B(!1);function r(){i.value=!i.value}return(s,o)=>v(e).length&&v(t).label?(w(),R("div",{key:0,class:W(["VPNavScreenTranslations",{open:i.value}])},[I("button",{class:"title",onClick:r},[z(Y_,{class:"icon lang"}),Lt(" "+se(v(t).label)+" ",1),z(K_,{class:"icon chevron"})]),I("ul",gF,[(w(!0),R(Pe,null,Ct(v(e),a=>(w(),R("li",{key:a.link,class:"item"},[z(mi,{class:"link",href:a.link},{default:O(()=>[Lt(se(a.text),1)]),_:2},1032,["href"])]))),128))])],2)):V("",!0)}}),mF=te(pF,[["__scopeId","data-v-5cd289a7"]]),_F={class:"container"},vF=F({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(n){const e=B(null),t=y0(so?document.body:null);return(i,r)=>(w(),X(Wi,{name:"fade",onEnter:r[0]||(r[0]=s=>t.value=!0),onAfterLeave:r[1]||(r[1]=s=>t.value=!1)},{default:O(()=>[i.open?(w(),R("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:e,id:"VPNavScreen"},[I("div",_F,[L(i.$slots,"nav-screen-content-before",{},void 0,!0),z(dF,{class:"menu"}),z(mF,{class:"translations"}),z(UO,{class:"appearance"}),z(fF,{class:"social-links"}),L(i.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):V("",!0)]),_:3}))}}),yF=te(vF,[["__scopeId","data-v-93923839"]]),bF={key:0,class:"VPNav"},xF=F({__name:"VPNav",setup(n){const{isScreenOpen:e,closeScreen:t,toggleScreen:i}=IA(),{frontmatter:r}=xe(),s=T(()=>r.value.navbar!==!1);return st("close-screen",t),Ui(()=>{so&&document.documentElement.classList.toggle("hide-nav",!s.value)}),(o,a)=>s.value?(w(),R("header",bF,[z(VO,{"is-screen-open":v(e),onToggleScreen:v(i)},{"nav-bar-title-before":O(()=>[L(o.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":O(()=>[L(o.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":O(()=>[L(o.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":O(()=>[L(o.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),z(yF,{open:v(e)},{"nav-screen-content-before":O(()=>[L(o.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":O(()=>[L(o.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):V("",!0)}}),EF=te(xF,[["__scopeId","data-v-15a7db79"]]),wF=n=>(kn("data-v-836aaa17"),n=n(),Dn(),n),CF=["role","tabindex"],TF=wF(()=>I("div",{class:"indicator"},null,-1)),SF={key:1,class:"items"},RF=F({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(n){const e=n,{collapsed:t,collapsible:i,isLink:r,isActiveLink:s,hasActiveLink:o,hasChildren:a,toggle:l}=i5(T(()=>e.item)),u=T(()=>a.value?"section":"div"),c=T(()=>r.value?"a":"div"),h=T(()=>a.value?e.depth+2===7?"p":`h${e.depth+2}`:"p"),d=T(()=>r.value?void 0:"button"),f=T(()=>[[`level-${e.depth}`],{collapsible:i.value},{collapsed:t.value},{"is-link":r.value},{"is-active":s.value},{"has-active":o.value}]);function g(_){"key"in _&&_.key!=="Enter"||!e.item.link&&l()}function p(){e.item.link&&l()}return(_,m)=>{const b=Dt("VPSidebarItem",!0);return w(),X(Qe(u.value),{class:W(["VPSidebarItem",f.value])},{default:O(()=>[_.item.text?(w(),R("div",Bt({key:0,class:"item",role:d.value},Cy(_.item.items?{click:g,keydown:g}:{},!0),{tabindex:_.item.items&&0}),[TF,_.item.link?(w(),X(mi,{key:0,tag:c.value,class:"link",href:_.item.link,rel:_.item.rel,target:_.item.target},{default:O(()=>[(w(),X(Qe(h.value),{class:"text",innerHTML:_.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(w(),X(Qe(h.value),{key:1,class:"text",innerHTML:_.item.text},null,8,["innerHTML"])),_.item.collapsed!=null?(w(),R("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:p,onKeydown:li(p,["enter"]),tabindex:"0"},[z(U_,{class:"caret-icon"})],32)):V("",!0)],16,CF)):V("",!0),_.item.items&&_.item.items.length?(w(),R("div",SF,[_.depth<5?(w(!0),R(Pe,{key:0},Ct(_.item.items,y=>(w(),X(b,{key:y.text,item:y,depth:_.depth+1},null,8,["item","depth"]))),128)):V("",!0)])):V("",!0)]),_:1},8,["class"])}}}),PF=te(RF,[["__scopeId","data-v-836aaa17"]]),q_=n=>(kn("data-v-975c01fe"),n=n(),Dn(),n),IF=q_(()=>I("div",{class:"curtain"},null,-1)),LF={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},AF=q_(()=>I("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),MF=F({__name:"VPSidebar",props:{open:{type:Boolean}},setup(n){const{sidebarGroups:e,hasSidebar:t}=Yi(),i=n,r=B(null),s=y0(so?document.body:null);return ee([i,r],()=>{var o;i.open?(s.value=!0,(o=r.value)==null||o.focus()):s.value=!1},{immediate:!0,flush:"post"}),(o,a)=>v(t)?(w(),R("aside",{key:0,class:W(["VPSidebar",{open:o.open}]),ref_key:"navEl",ref:r,onClick:a[0]||(a[0]=bt(()=>{},["stop"]))},[IF,I("nav",LF,[AF,L(o.$slots,"sidebar-nav-before",{},void 0,!0),(w(!0),R(Pe,null,Ct(v(e),l=>(w(),R("div",{key:l.text,class:"group"},[z(PF,{item:l,depth:0},null,8,["item"])]))),128)),L(o.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):V("",!0)}}),OF=te(MF,[["__scopeId","data-v-975c01fe"]]),FF=F({__name:"VPSkipLink",setup(n){const e=Ql(),t=B();ee(()=>e.path,()=>t.value.focus());function i({target:r}){const s=document.getElementById(decodeURIComponent(r.hash).slice(1));if(s){const o=()=>{s.removeAttribute("tabindex"),s.removeEventListener("blur",o)};s.setAttribute("tabindex","-1"),s.addEventListener("blur",o),s.focus(),window.scrollTo(0,0)}}return(r,s)=>(w(),R(Pe,null,[I("span",{ref_key:"backToTop",ref:t,tabindex:"-1"},null,512),I("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:i}," Skip to content ")],64))}}),kF=te(FF,[["__scopeId","data-v-7b6c6d8e"]]),DF=F({__name:"Layout",setup(n){const{isOpen:e,open:t,close:i}=Yi(),r=Ql();ee(()=>r.path,i),n5(e,i);const{frontmatter:s}=xe(),o=ql(),a=T(()=>!!o["home-hero-image"]);return st("hero-image-slot-exists",a),(l,u)=>{const c=Dt("Content");return v(s).layout!==!1?(w(),R("div",{key:0,class:W(["Layout",v(s).pageClass])},[L(l.$slots,"layout-top",{},void 0,!0),z(kF),z(VI,{class:"backdrop",show:v(e),onClick:v(i)},null,8,["show","onClick"]),z(EF,null,{"nav-bar-title-before":O(()=>[L(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":O(()=>[L(l.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":O(()=>[L(l.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":O(()=>[L(l.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":O(()=>[L(l.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":O(()=>[L(l.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),z(PA,{open:v(e),onOpenMenu:v(t)},null,8,["open","onOpenMenu"]),z(OF,{open:v(e)},{"sidebar-nav-before":O(()=>[L(l.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":O(()=>[L(l.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),z(eA,null,{"page-top":O(()=>[L(l.$slots,"page-top",{},void 0,!0)]),"page-bottom":O(()=>[L(l.$slots,"page-bottom",{},void 0,!0)]),"not-found":O(()=>[L(l.$slots,"not-found",{},void 0,!0)]),"home-hero-before":O(()=>[L(l.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":O(()=>[L(l.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":O(()=>[L(l.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":O(()=>[L(l.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":O(()=>[L(l.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":O(()=>[L(l.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":O(()=>[L(l.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":O(()=>[L(l.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":O(()=>[L(l.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":O(()=>[L(l.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":O(()=>[L(l.$slots,"doc-before",{},void 0,!0)]),"doc-after":O(()=>[L(l.$slots,"doc-after",{},void 0,!0)]),"doc-top":O(()=>[L(l.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":O(()=>[L(l.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":O(()=>[L(l.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":O(()=>[L(l.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":O(()=>[L(l.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":O(()=>[L(l.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":O(()=>[L(l.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":O(()=>[L(l.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),z(sA),L(l.$slots,"layout-bottom",{},void 0,!0)],2)):(w(),X(c,{key:1}))}}}),NF=te(DF,[["__scopeId","data-v-ec278bbb"]]),$F={Layout:NF,enhanceApp:({app:n})=>{n.component("Badge",$I)}};class J_ extends xu{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ue.CHANGE)}release(){this.state===le.ERROR&&this.setState(le.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==le.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==le.LOADED){e.interimTile=null;break}e.getState()==le.LOADING?t=e:e.getState()==le.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==le.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ge()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const r=t-i+1e3/60;return r>=this.transition_?1:__(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const je={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function BF(n,e,t){const i=n;let r=!0,s=!1,o=!1;const a=[Yo(i,ue.LOAD,function(){o=!0,s||e()})];return i.src&&qm?(s=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(Yo(i,ue.ERROR,t)),function(){r=!1,a.forEach(Ae)}}function GF(n,e){return new Promise((t,i)=>{function r(){o(),t(n)}function s(){o(),i(new Error("Image load error"))}function o(){n.removeEventListener("load",r),n.removeEventListener("error",s)}n.addEventListener("load",r),n.addEventListener("error",s)})}function VF(n,e){return e&&(n.src=e),n.src&&qm?new Promise((t,i)=>n.decode().then(()=>t(n)).catch(r=>n.complete&&n.width?t(n):i(r))):GF(n)}class Q_ extends J_{constructor(e,t,i,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=le.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=le.ERROR,this.unlistenImage_(),this.image_=zF(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=le.LOADED:this.state=le.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==le.ERROR&&(this.state=le.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==le.IDLE&&(this.state=le.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=BF(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function zF(){const n=Vt(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}const jF=.5,WF=10,Ep=.25;class UF{constructor(e,t,i,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Zo(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const y=b[0]+"/"+b[1];return a[y]||(a[y]=l(b)),a[y]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ke(r)>=ke(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ke(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ke(this.targetProj_.getExtent()):null;const u=Ki(i),c=Tu(i),h=xa(i),d=Cu(i),f=this.transformInv_(u),g=this.transformInv_(c),p=this.transformInv_(h),_=this.transformInv_(d),m=WF+(o?Math.max(0,Math.ceil(Math.log2(th(i)/(o*o*256*256)))):0);if(this.addQuad_(u,c,h,d,f,g,p,_,m),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(y,x,E){b=Math.min(b,y.source[0][0],y.source[1][0],y.source[2][0])}),this.triangles_.forEach(y=>{if(Math.max(y.source[0][0],y.source[1][0],y.source[2][0])-b>this.sourceWorldWidth_/2){const x=[[y.source[0][0],y.source[0][1]],[y.source[1][0],y.source[1][1]],[y.source[2][0],y.source[2][1]]];x[0][0]-b>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-b>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-b>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const E=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-E<this.sourceWorldWidth_/2&&(y.source=x)}})}a={}}addTriangle_(e,t,i,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,i]})}addQuad_(e,t,i,r,s,o,a,l,u){const c=Ht([s,o,a,l]),h=this.sourceWorldWidth_?ke(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const _=Ht([e,t,i,r]);g=ke(_)/this.targetWorldWidth_>Ep||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>Ep||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!Yt(c,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(u>0)g=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(u>0){if(!g){const _=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(_);let b;f?b=(jr(s[0],d)+jr(a[0],d))/2-jr(m[0],d):b=(s[0]+a[0])/2-m[0];const y=(s[1]+a[1])/2-m[1];g=b*b+y*y>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const _=[(t[0]+i[0])/2,(t[1]+i[1])/2],m=this.transformInv_(_),b=[(r[0]+e[0])/2,(r[1]+e[1])/2],y=this.transformInv_(b);this.addQuad_(e,t,_,b,s,o,m,y,u-1),this.addQuad_(b,_,i,r,y,m,a,l,u-1)}else{const _=[(e[0]+t[0])/2,(e[1]+t[1])/2],m=this.transformInv_(_),b=[(i[0]+r[0])/2,(i[1]+r[1])/2],y=this.transformInv_(b);this.addQuad_(e,_,b,r,s,m,y,l,u-1),this.addQuad_(_,t,i,b,m,o,a,y,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,i,r,s,a,l),p&14||this.addTriangle_(e,i,t,s,a,o),p&&(p&13||this.addTriangle_(t,r,e,o,l,s),p&7||this.addTriangle_(t,r,i,o,l,a))}calculateSourceExtent(){const e=zt();return this.triangles_.forEach(function(t,i,r){const s=t.source;No(e,s[0]),No(e,s[1]),No(e,s[2])}),e}getTriangles(){return this.triangles_}}let pc;const Bs=[];function wp(n,e,t,i,r){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(i,r),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,i)+1,Math.max(t,r)),n.restore()}function mc(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function HF(){if(pc===void 0){const n=Vt(6,6,Bs);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",wp(n,4,5,4,0),wp(n,4,5,0,5);const e=n.getImageData(0,0,3,3).data;pc=mc(e,0)||mc(e,4)||mc(e,8),Eu(n),Bs.push(n.canvas)}return pc}function Cp(n,e,t,i){const r=r4(t,e,n);let s=Fl(e,i,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=n.getMetersPerUnit();a!==void 0&&(s/=a);const l=n.getExtent();if(!l||wu(l,r)){const u=Fl(n,s,r)/s;isFinite(u)&&u>0&&(s/=u)}return s}function XF(n,e,t,i){const r=Vi(t);let s=Cp(n,e,r,i);return(!isFinite(s)||s<=0)&&pd(t,function(o){return s=Cp(n,e,o,i),isFinite(s)&&s>0}),s}function KF(n,e,t,i,r,s,o,a,l,u,c,h,d){const f=Vt(Math.round(t*n),Math.round(t*e),Bs);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function g(b){return Math.round(b*t)/t}f.globalCompositeOperation="lighter";const p=zt();l.forEach(function(b,y,x){gd(p,b.extent)});let _;{const b=ke(p),y=fn(p);_=Vt(Math.round(t*b/i),Math.round(t*y/i),Bs),h||(_.imageSmoothingEnabled=!1);const x=t/i;l.forEach(function(E,C,S){const P=E.extent[0]-p[0],D=-(E.extent[3]-p[3]),N=ke(E.extent),Y=fn(E.extent);E.image.width>0&&E.image.height>0&&_.drawImage(E.image,u,u,E.image.width-2*u,E.image.height-2*u,P*x,D*x,N*x,Y*x)})}const m=Ki(o);return a.getTriangles().forEach(function(b,y,x){const E=b.source,C=b.target;let S=E[0][0],P=E[0][1],D=E[1][0],N=E[1][1],Y=E[2][0],K=E[2][1];const G=g((C[0][0]-m[0])/s),ie=g(-(C[0][1]-m[1])/s),A=g((C[1][0]-m[0])/s),M=g(-(C[1][1]-m[1])/s),$=g((C[2][0]-m[0])/s),Z=g(-(C[2][1]-m[1])/s),J=S,oe=P;S=0,P=0,D-=J,N-=oe,Y-=J,K-=oe;const Ee=[[D,N,0,0,A-G],[Y,K,0,0,$-G],[0,0,D,N,M-ie],[0,0,Y,K,Z-ie]],j=X3(Ee);if(!j)return;if(f.save(),f.beginPath(),HF()||!h){f.moveTo(A,M);const ce=4,ve=G-A,Ze=ie-M;for(let fe=0;fe<ce;fe++)f.lineTo(A+g((fe+1)*ve/ce),M+g(fe*Ze/(ce-1))),fe!=ce-1&&f.lineTo(A+g((fe+1)*ve/ce),M+g((fe+1)*Ze/(ce-1)));f.lineTo($,Z)}else f.moveTo(A,M),f.lineTo(G,ie),f.lineTo($,Z);f.clip(),f.transform(j[0],j[2],j[1],j[3],G,ie),f.translate(p[0]-J,p[3]-oe);let _e;if(_)_e=_.canvas,f.scale(i/t,-i/t);else{const ce=l[0],ve=ce.extent;_e=ce.image,f.scale(ke(ve)/_e.width,-fn(ve)/_e.height)}f.drawImage(_e,0,0),f.restore()}),_&&(Eu(_),Bs.push(_.canvas)),c&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(b,y,x){const E=b.target,C=(E[0][0]-m[0])/s,S=-(E[0][1]-m[1])/s,P=(E[1][0]-m[0])/s,D=-(E[1][1]-m[1])/s,N=(E[2][0]-m[0])/s,Y=-(E[2][1]-m[1])/s;f.beginPath(),f.moveTo(P,D),f.lineTo(C,S),f.lineTo(N,Y),f.closePath(),f.stroke()}),f.restore()),f.canvas}class ph extends J_{constructor(e,t,i,r,s,o,a,l,u,c,h,d){super(s,le.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const _=g?$o(f,g):f;if(th(_)===0){this.state=le.EMPTY;return}const m=e.getExtent();m&&(p?p=$o(p,m):p=m);const b=r.getResolution(this.wrappedTileCoord_[0]),y=XF(e,i,_,b);if(!isFinite(y)||y<=0){this.state=le.EMPTY;return}const x=c!==void 0?c:jF;if(this.triangulation_=new UF(e,i,_,p,y*x,b),this.triangulation_.getTriangles().length===0){this.state=le.EMPTY;return}this.sourceZ_=t.getZForResolution(y);let E=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(E[1]=Ke(E[1],p[1],p[3]),E[3]=Ke(E[3],p[1],p[3])):E=$o(E,p)),!th(E))this.state=le.EMPTY;else{const C=t.getTileRangeForExtentAndZ(E,this.sourceZ_);for(let S=C.minX;S<=C.maxX;S++)for(let P=C.minY;P<=C.maxY;P++){const D=u(this.sourceZ_,S,P,a);D&&this.sourceTiles_.push(D)}this.sourceTiles_.length===0&&(this.state=le.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==le.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=le.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),r=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=KF(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=le.LOADED}this.changed()}load(){if(this.state==le.IDLE){this.state=le.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const i=t.getState();if(i==le.IDLE||i==le.LOADING){e++;const r=he(t,ue.CHANGE,function(s){const o=t.getState();(o==le.LOADED||o==le.ERROR||o==le.EMPTY)&&(Ae(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,i,r){t.getState()==le.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ae),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Eu(this.canvas_.getContext("2d")),Bs.push(this.canvas_),this.canvas_=null),super.release()}}class YF{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return Re(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return Re(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){Re(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function Tp(n,e,t,i){return i!==void 0?(i[0]=n,i[1]=e,i[2]=t,i):[n,e,t]}function Du(n,e,t){return n+"/"+e+"/"+t}function ev(n){return Du(n[0],n[1],n[2])}function ZF(n){return n.split("/").map(Number)}function qF(n){return(n[1]<<n[0])+n[2]}function JF(n,e){const t=n[0],i=n[1],r=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,r):!0}class tv extends YF{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=ZF(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(ev(r.tileCoord)),r.release())})}}const _c={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class nv extends ti{constructor(e){super(),this.projection=it(e.projection),this.attributions_=Sp(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,r){t.viewResolver=i,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Sp(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Sp(n){return n?Array.isArray(n)?function(e){return n}:typeof n=="function"?n:function(e){return[n]}:null}class Qd{constructor(e,t,i,r){this.minX=e,this.maxX=t,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function bs(n,e,t,i,r){return r!==void 0?(r.minX=n,r.maxX=e,r.minY=t,r.maxY=i,r):new Qd(n,e,t,i)}const xs=[0,0,0],tr=5;class iv{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Re(p3(this.resolutions_,(r,s)=>s-r),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Re(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ki(i)),Re(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Re(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Td,Re(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new Qd(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)i([t,s,a])}forEachTileCoordParentTileRange(e,t,i,r){let s,o,a,l=null,u=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=bs(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,u,i),t(u,s))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return bs(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return bs(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),u=Math.floor(s*l),c=Math.floor(o*l);if(t<r)return bs(u,u,c,c,i);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return bs(u,h,c,d,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,xs);const r=xs[1],s=xs[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,xs);const o=xs[1],a=xs[2];return bs(r,o,s,a,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=bn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=bn(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*s[0]*r,a=i[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,u=a+s[1]*r;return Gi(o,a,l,u,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),u=bn(this.getTileSize(o),this.tmpSize_);let c=a*(e-l[0])/i/u[0],h=a*(l[1]-t)/i/u[1];return r?(c=Xa(c,tr)-1,h=Xa(h,tr)-1):(c=Ha(c,tr),h=Ha(h,tr)),Tp(o,c,h,s)}getTileCoordForXYAndZ_(e,t,i,r,s){const o=this.getOrigin(i),a=this.getResolution(i),l=bn(this.getTileSize(i),this.tmpSize_);let u=(e-o[0])/a/l[0],c=(o[1]-t)/a/l[1];return r?(u=Xa(u,tr)-1,c=Xa(c,tr)-1):(u=Ha(u,tr),c=Ha(c,tr)),Tp(i,u,c,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=cd(this.resolutions_,e,t||0);return Ke(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return S_(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}class QF extends iv{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function rv(n){let e=n.getDefaultTileGrid();return e||(e=i6(n),n.setDefaultTileGrid(e)),e}function e6(n,e,t){const i=e[0],r=n.getTileCoordCenter(e),s=sv(t);if(!wu(s,r)){const o=ke(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,n.getTileCoordForCoordAndZ(r,i)}return e}function t6(n,e,t,i){i=i!==void 0?i:"top-left";const r=n6(n,e,t);return new iv({extent:n,origin:V3(n,i),resolutions:r,tileSize:t})}function n6(n,e,t,i){e=e!==void 0?e:b4,t=bn(t!==void 0?t:Td);const r=fn(n),s=ke(n);i=i>0?i:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function i6(n,e,t,i){const r=sv(n);return t6(r,e,t,i)}function sv(n){n=it(n);let e=n.getExtent();if(!e){const t=180*qs.degrees/n.getMetersPerUnit();e=Gi(-t,-t,t,t)}return e}class r6 extends nv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&bn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new tv(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,u;for(let c=i.minX;c<=i.maxX;++c)for(let h=i.minY;h<=i.maxY;++h)l=Du(t,c,h),u=!1,s.containsKey(l)&&(a=s.get(l),u=a.getState()===le.LOADED,u&&(u=r(a)!==!1)),u||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,r,s){return ge()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:rv(e)}getTileCacheForProjection(e){const t=this.getProjection();return Re(t===null||kr(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),o=bn(r.getTileSize(e),this.tmpSize);return s==1?o:RI(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=e6(i,e,t)),JF(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class s6 extends En{constructor(e,t){super(e),this.tile=t}}function o6(n,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return n.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const u=o[0],c=e.getFullTileRange(u);if(!c)throw new Error("The {-y} placeholder requires a tile grid with extent");return(c.getHeight()-o[2]-1).toString()})}}function a6(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=o6(n[r],e);return mh(i)}function mh(n){return n.length===1?n[0]:function(e,t,i){if(!e)return;const r=qF(e),s=jr(r,n.length);return n[s](e,t,i)}}function ov(n){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(n);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(n.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(n.replace(t[0],r.toString()));return e}return e.push(n),e}class ef extends r6{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===ef.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=ne(t),r=t.getState();let s;r==le.LOADING?(this.tileLoadingKeys_[i]=!0,s=_c.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=r==le.ERROR?_c.TILELOADERROR:r==le.LOADED?_c.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new s6(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=ov(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(a6(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=Du(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}class l6 extends ef{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:u6,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Q_,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!kr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!kr(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||kr(t,e)))return this.tileGrid;const i=ne(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=rv(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||kr(t,e))return this.tileCache;const i=ne(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new tv(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,t,i,r,s,o){const a=[e,t,i],l=this.getTileCoordForTileUrlFunction(a,s),u=l?this.tileUrlFunction(l,r,s):void 0,c=new this.tileClass(a,u!==void 0?le.IDLE:le.EMPTY,u!==void 0?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=o,c.addEventListener(ue.CHANGE,this.handleTileChange.bind(this)),c}getTile(e,t,i,r,s){const o=this.getProjection();if(!o||!s||kr(o,s))return this.getTileInternal(e,t,i,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,i];let u;const c=ev(l);a.containsKey(c)&&(u=a.get(c));const h=this.getKey();if(u&&u.key==h)return u;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new ph(o,d,s,f,l,g,this.getTilePixelRatio(r),this.getGutter(),(_,m,b,y)=>this.getTileInternal(_,m,b,y,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=h,u?(p.interimTile=u,p.refreshInterimChain(),a.replace(c,p)):a.set(c,p),p}getTileInternal(e,t,i,r,s){let o=null;const a=Du(e,t,i),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,i,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const u=o;o=this.createTile_(e,t,i,r,s,l),u.getState()==le.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=it(e);if(i){const r=ne(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function u6(n,e){n.getImage().src=e}function Rp(n,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const i=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+i}class c6 extends l6{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=ov(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=mh(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(mh(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Rp(e,i):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in i?i[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const u={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(u,s);let c=e;return t=="KVP"?c=Rp(c,u):c=c.replace(/\{(\w+?)\}/g,function(h,d){return u[d]}),c}}}const Ja={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class h6 extends Fu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Ja.PRELOAD)}setPreload(e){this.set(Ja.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ja.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ja.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class av extends va{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return ge()}getData(e){return null}prepareFrame(e){return ge()}renderFrame(e,t){return ge()}loadedTileCallback(e,t,i){e[t]||(e[t]={}),e[t][i.tileCoord.toString()]=i}createLoadedTileFinder(e,t,i){return(r,s)=>{const o=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,i,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===je.LOADED||t.getState()===je.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=je.LOADED&&t!=je.ERROR&&e.addEventListener(ue.CHANGE,this.boundHandleImageChange_),t==je.IDLE&&(e.load(),t=e.getState()),t==je.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Pp=[];let Ls=null;function d6(){Ls=Vt(1,1,void 0,{willReadFrequently:!0})}class lv extends av{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=wt(),this.pixelTransform=wt(),this.inversePixelTransform=wt(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,i){Ls||d6(),Ls.clearRect(0,0,1,1);let r;try{Ls.drawImage(e,t,i,1,1,0,0,1,1),r=Ls.getImageData(0,0,1,1).data}catch{return Ls=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&bi(Jo(e.style.backgroundColor),Jo(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Vt();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const r=Ki(i),s=Tu(i),o=xa(i),a=Cu(i);ct(t.coordinateToPixelTransform,r),ct(t.coordinateToPixelTransform,s),ct(t.coordinateToPixelTransform,o),ct(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;ct(l,r),ct(l,s),ct(l,o),ct(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){const s=new Bo(e,this.inversePixelTransform,i,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(Nt.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Nt.POSTRENDER,e,t)}getRenderTransform(e,t,i,r,s,o,a){const l=s/2,u=o/2,c=r/t,h=-c,d=-e[0]+a,f=-e[1];return qn(this.tempTransform,l,u,c,h,-i,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class f6 extends lv{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=zt(),this.tmpTileRange_=new Qd(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),i=e.getState(),r=t.getUseInterimTilesOnError();return i==le.LOADED||i==le.EMPTY||i==le.ERROR&&!r}getTile(e,t,i,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let u=a.getSource().getTile(e,t,i,s,o);return u.getState()==le.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(u)||(u=u.getInterimTile()),u}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),r=ct(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!wu(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,u=i.getRenderSource(),c=u.getTileGridForProjection(l.projection),h=u.getTilePixelRatio(t.pixelRatio);for(let d=c.getZForResolution(l.resolution);d>=c.getMinZoom();--d){const f=c.getTileCoordForCoordAndZ(r,d),g=u.getTile(d,f[1],f[2],o,a);if(!(g instanceof Q_||g instanceof ph)||g instanceof ph&&g.getState()===le.EMPTY)return null;if(g.getState()!==le.LOADED)continue;const p=c.getOrigin(d),_=bn(c.getTileSize(d)),m=c.getResolution(d),b=Math.floor(h*((r[0]-p[0])/m-f[1]*_[0])),y=Math.floor(h*((p[1]-r[1])/m-f[2]*_[1])),x=Math.round(h*u.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),b+x,y+x)}return null}loadedTileCallback(e,t,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,t,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,u=e.pixelRatio,c=this.getLayer(),h=c.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),g=f.getZForResolution(o,h.zDirection),p=f.getResolution(g);let _=e.extent;const m=e.viewState.resolution,b=h.getTilePixelRatio(u),y=Math.round(ke(_)/m*u),x=Math.round(fn(_)/m*u),E=i.extent&&hr(i.extent);E&&(_=$o(_,hr(i.extent)));const C=p*y/2/b,S=p*x/2/b,P=[a[0]-C,a[1]-S,a[0]+C,a[1]+S],D=f.getTileRangeForExtentAndZ(_,g),N={};N[g]={};const Y=this.createLoadedTileFinder(h,s,N),K=this.tmpExtent,G=this.tmpTileRange_;this.newTiles_=!1;const ie=l?ih(r.center,m,l,e.size):void 0;for(let _e=D.minX;_e<=D.maxX;++_e)for(let ce=D.minY;ce<=D.maxY;++ce){if(l&&!f.tileCoordIntersectsViewport([g,_e,ce],ie))continue;const ve=this.getTile(g,_e,ce,e);if(this.isDrawableTile(ve)){const Q=ne(this);if(ve.getState()==le.LOADED){N[g][ve.tileCoord.toString()]=ve;let me=ve.inTransition(Q);me&&i.opacity!==1&&(ve.endTransition(Q),me=!1),!this.newTiles_&&(me||!this.renderedTiles.includes(ve))&&(this.newTiles_=!0)}if(ve.getAlpha(Q,e.time)===1)continue}const Ze=f.getTileCoordChildTileRange(ve.tileCoord,G,K);let fe=!1;Ze&&(fe=Y(g+1,Ze)),fe||f.forEachTileCoordParentTileRange(ve.tileCoord,Y,G,K)}const A=p/o*u/b;qn(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-y/2,-x/2);const M=h_(this.pixelTransform);this.useContainer(t,M,this.getBackground(e));const $=this.context,Z=$.canvas;Lu(this.inversePixelTransform,this.pixelTransform),qn(this.tempTransform,y/2,x/2,A,A,0,-y/2,-x/2),Z.width!=y||Z.height!=x?(Z.width=y,Z.height=x):this.containerReused||$.clearRect(0,0,y,x),E&&this.clipUnrotated($,e,E),h.getInterpolate()||($.imageSmoothingEnabled=!1),this.preRender($,e),this.renderedTiles.length=0;let J=Object.keys(N).map(Number);J.sort(vr);let oe,Ee,j;i.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?J=J.reverse():(oe=[],Ee=[]);for(let _e=J.length-1;_e>=0;--_e){const ce=J[_e],ve=h.getTilePixelSize(ce,u,s),fe=f.getResolution(ce)/p,Q=ve[0]*fe*A,me=ve[1]*fe*A,Ie=f.getTileCoordForCoordAndZ(Ki(P),ce),Le=f.getTileCoordExtent(Ie),Xe=ct(this.tempTransform,[b*(Le[0]-P[0])/p,b*(P[3]-Le[3])/p]),ht=b*h.getGutterForProjection(s),jt=N[ce];for(const wn in jt){const At=jt[wn],rn=At.tileCoord,Cn=Ie[1]-rn[1],gn=Math.round(Xe[0]-(Cn-1)*Q),dt=Ie[2]-rn[2],Tn=Math.round(Xe[1]-(dt-1)*me),qe=Math.round(Xe[0]-Cn*Q),at=Math.round(Xe[1]-dt*me),lt=gn-qe,H=Tn-at,we=g===ce,ut=we&&At.getAlpha(ne(this),e.time)!==1;let St=!1;if(!ut)if(oe){j=[qe,at,qe+lt,at,qe+lt,at+H,qe,at+H];for(let Sn=0,ii=oe.length;Sn<ii;++Sn)if(g!==ce&&ce<Ee[Sn]){const Rt=oe[Sn];Yt([qe,at,qe+lt,at+H],[Rt[0],Rt[3],Rt[4],Rt[7]])&&(St||($.save(),St=!0),$.beginPath(),$.moveTo(j[0],j[1]),$.lineTo(j[2],j[3]),$.lineTo(j[4],j[5]),$.lineTo(j[6],j[7]),$.moveTo(Rt[6],Rt[7]),$.lineTo(Rt[4],Rt[5]),$.lineTo(Rt[2],Rt[3]),$.lineTo(Rt[0],Rt[1]),$.clip())}oe.push(j),Ee.push(ce)}else $.clearRect(qe,at,lt,H);this.drawTileImage(At,e,qe,at,lt,H,ht,we),oe&&!ut?(St&&$.restore(),this.renderedTiles.unshift(At)):this.renderedTiles.push(At),this.updateUsedTiles(e.usedTiles,h,At)}}return this.renderedRevision=d,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!Jr(this.renderedExtent_,P),this.renderedExtent_=P,this.renderedPixelRatio=u,this.renderedProjection=s,this.manageTilePyramid(e,h,f,u,s,_,g,c.getPreload()),this.scheduleExpireCache(e,h),this.postRender($,e),i.extent&&$.restore(),$.imageSmoothingEnabled=!0,M!==Z.style.transform&&(Z.style.transform=M),this.container}drawTileImage(e,t,i,r,s,o,a,l){const u=this.getTileImage(e);if(!u)return;const c=ne(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(l?e.getAlpha(c,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(u,a,a,u.width-2*a,u.height-2*a,i,r,s,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:l&&e.endTransition(c)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const i=(function(r,s,o){const a=ne(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(i)}}updateUsedTiles(e,t,i){const r=ne(t);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,t,i,r,s,o,a,l,u){const c=ne(t);c in e.wantedTiles||(e.wantedTiles[c]={});const h=e.wantedTiles[c],d=e.tileQueue,f=i.getMinZoom(),g=e.viewState.rotation,p=g?ih(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let _=0,m,b,y,x,E,C;for(C=f;C<=a;++C)for(b=i.getTileRangeForExtentAndZ(o,C,b),y=i.getResolution(C),x=b.minX;x<=b.maxX;++x)for(E=b.minY;E<=b.maxY;++E)g&&!i.tileCoordIntersectsViewport([C,x,E],p)||(a-C<=l?(++_,m=t.getTile(C,x,E,r,s),m.getState()==le.IDLE&&(h[m.getKey()]=!0,d.isKeyQueued(m.getKey())||d.enqueue([m,c,i.getTileCoordCenter(m.tileCoord),y])),u!==void 0&&u(m)):t.useTile(C,x,E,s));t.updateCacheSize(_,s)}}class g6 extends h6{constructor(e){super(e)}createRenderer(){return new f6(this)}}class Zt extends ti{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Zt(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ae(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=he(e,ue.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?p6(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function p6(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(Re(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}class uv{drawCustom(e,t,i,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}function di(n){return Array.isArray(n)?p_(n):n}class cv extends uv{constructor(e,t,i,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=r,this.transformRotation_=r?Ru(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=wt()}drawImages_(e,t,i,r){if(!this.image_)return;const s=pr(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;this.transformRotation_===0&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let c=0,h=s.length;c<h;c+=2){const d=s[c]-this.imageAnchorX_,f=s[c+1]-this.imageAnchorY_;if(u!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,p=f+this.imageAnchorY_;qn(a,g,p,1,1,u,-g,-p),o.save(),o.transform.apply(o,a),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=pr(e,t,i,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<i;t+=r){const l=s[t]+this.textOffsetX_,u=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,u-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,u),this.textFillState_&&o.fillText(this.text_,l,u))}}moveToLineTo_(e,t,i,r,s){const o=this.context_,a=pr(e,t,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let u=2;u<l;u+=2)o.lineTo(a[u],a[u+1]);return s&&o.closePath(),i}drawRings_(e,t,i,r){for(let s=0,o=i.length;s<o;++s)t=this.moveToLineTo_(e,t,i[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=L4(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,r=t.length;i<r;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Yt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,u=o.length;l<u;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Yt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const u=s[a];r=this.drawRings_(i,r,u,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),bi(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:ia;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=r&&(i.textAlign=r,t.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:di(i||an)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),u=t.getMiterLimit(),c=s||Di;this.strokeState_={lineCap:r!==void 0?r:Qs,lineDash:this.pixelRatio_===1?c:c.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Ni)*this.pixelRatio_,lineJoin:a!==void 0?a:eo,lineWidth:(l!==void 0?l:ra)*this.pixelRatio_,miterLimit:u!==void 0?u:ta,strokeStyle:di(i||na)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:di(f||an)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const f=i.getColor(),g=i.getLineCap(),p=i.getLineDash(),_=i.getLineDashOffset(),m=i.getLineJoin(),b=i.getWidth(),y=i.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:Qs,lineDash:p||Di,lineDashOffset:_||Ni,lineJoin:m!==void 0?m:eo,lineWidth:b!==void 0?b:ra,miterLimit:y!==void 0?y:ta,strokeStyle:di(f||na)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),u=e.getScaleArray(),c=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:I_,textAlign:h!==void 0?h:ia,textBaseline:d!==void 0?d:$l},this.text_=c!==void 0?Array.isArray(c)?c.reduce((f,g,p)=>f+=p%2?" ":g,""):c:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}}}const m6=.5,hv={Point:C6,LineString:x6,Polygon:S6,MultiPoint:T6,MultiLineString:E6,MultiPolygon:w6,GeometryCollection:b6,Circle:v6};function _6(n,e){return parseInt(ne(n),10)-parseInt(ne(e),10)}function dv(n,e){const t=_h(n,e);return t*t}function _h(n,e){return m6*n/e}function v6(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function Ip(n,e,t,i,r,s,o){let a=!1;const l=t.getImage();if(l){const u=l.getImageState();u==je.LOADED||u==je.ERROR?l.unlistenImageChange(r):(u==je.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return y6(n,e,t,i,s,o),a}function y6(n,e,t,i,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,r);if(t.getRenderer())fv(n,a,t,e);else{const u=hv[a.getType()];u(n,a,t,e,s)}}function fv(n,e,t,i){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)fv(n,s[o],t,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer())}function b6(n,e,t,i,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=hv[s[o].getType()];l(n,s[o],t,i,r)}}function x6(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function E6(n,e,t,i,r){const s=t.getStroke();if(s){const a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,i)}const o=t.getText();if(o&&o.getText()){const a=(r||n).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function w6(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function C6(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=je.LOADED)return;let l=n;if(r){const c=s.getDeclutterMode();if(c!=="none")if(l=r,c==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(e,i)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,i)}}function T6(n,e,t,i,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=je.LOADED)return;let l=n;if(r){const c=s.getDeclutterMode();if(c!=="none")if(l=r,c==="obstacle"){const h=n.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const u=l.getBuilder(t.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(e,i)}if(o&&o.getText()){let l=n;r&&(l=r);const u=l.getBuilder(t.getZIndex(),"Text");u.setTextStyle(o,a),u.drawText(e,i)}}function S6(n,e,t,i,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,i)}const a=t.getText();if(a&&a.getText()){const l=(r||n).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function gv(n){if(!(n.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=n.inversePixelTransform[0],t=n.inversePixelTransform[1],i=Math.sqrt(e*e+t*t),r=n.frameState,s=Ed(n.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=dv(r.viewState.resolution,i);let a;return new cv(n.context,i,r.extent,s,r.viewState.rotation,o,a)}class Nu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=bn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Nu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ge()}getImage(e){return ge()}getHitDetectionImage(){return ge()}getPixelRatio(e){return 1}getImageState(){return ge()}getImageSize(){return ge()}getOrigin(){return ge()}getSize(){return ge()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=bn(e)}listenImageChange(e){ge()}load(){ge()}unlistenImageChange(e){ge()}}class Ca extends Nu{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),t=new Ca({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const i=this.renderOptions_,r=Vt(i.size*e,i.size*e);this.draw_(i,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return je.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const C=r;r=s,s=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),u=Math.sqrt(s*s-l*l),c=r-u,h=Math.sqrt(l*l+c*c),d=h/l;if(e==="miter"&&d<=i)return d*t;const f=t/2/d,g=t/2*(c/h),_=Math.sqrt((r+f)*(r+f)+g*g)-r;if(this.radius2_===void 0||e==="bevel")return _*2;const m=r*Math.sin(a),b=Math.sqrt(r*r-m*m),y=s-b,E=Math.sqrt(m*m+y*y)/m;if(E<=i){const C=E*t/2-s-r;return 2*Math.max(_,C)}return _*2}createRenderOptions(){let e=Qs,t=eo,i=0,r=null,s=0,o,a=0;this.stroke_&&(o=di(this.stroke_.getColor()??na),a=this.stroke_.getWidth()??ra,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??eo,e=this.stroke_.getLineCap()??Qs,i=this.stroke_.getMiterLimit()??ta);const l=this.calculateLineJoinSize_(t,a,i),u=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*u+l);return{strokeStyle:o,strokeWidth:a,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=an),t.fillStyle=di(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=Jo(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(t=Vt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius_;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,u=a%2===0?i:r;e.lineTo(u*Math.cos(l),u*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=an,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}class ho extends Ca{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new ho({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class zi{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new zi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}let So=null;class R6 extends xu{constructor(e,t,i,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=r===void 0?je.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===je.LOADED){So||(So=Vt(1,1,void 0,{willReadFrequently:!0})),So.drawImage(this.image_,0,0);try{So.getImageData(0,0,1,1),this.tainted_=!1}catch{So=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ue.CHANGE)}handleImageError_(){this.imageState_=je.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=je.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=Vt(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===je.IDLE){this.image_||this.initializeImage_(),this.imageState_=je.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&VF(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==je.LOADED)return;const t=this.image_,i=document.createElement("canvas");i.width=Math.ceil(t.width*e),i.height=Math.ceil(t.height*e);const r=i.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=f_(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}}function P6(n,e,t,i,r){let s=e===void 0?void 0:kl.get(e,t,r);return s||(s=new R6(n,n instanceof HTMLImageElement?n.src||void 0:e,t,i,r),kl.set(e,t,r,s)),s}function Lp(n,e,t,i){return t!==void 0&&i!==void 0?[t/n,i/e]:t!==void 0?t/n:i!==void 0?i/e:1}class es extends Nu{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;Re(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||ne(o)),Re(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Re(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=je.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?je.LOADED:je.IDLE:l=je.LOADING:l=je.LOADED),this.color_=e.color!==void 0?Jo(e.color):null,this.iconImage_=P6(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let u,c;if(e.size)[u,c]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)u=h.width,c=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(Lp(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}u!==void 0&&this.setScale(Lp(u,c,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new es({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==je.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==je.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ue.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ue.CHANGE,e)}}class mr{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new mr({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class cn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=Ap,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new cn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Ap,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function I6(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(Re(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}let vc=null;function L6(n,e){if(!vc){const t=new zi({color:"rgba(255,255,255,0.4)"}),i=new mr({color:"#3399CC",width:1.25});vc=[new cn({image:new ho({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return vc}function tf(){const n={},e=[255,255,255,1],t=[0,153,255,1],i=3;return n.Polygon=[new cn({fill:new zi({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new cn({stroke:new mr({color:e,width:i+2})}),new cn({stroke:new mr({color:t,width:i})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new cn({image:new ho({radius:i*2,fill:new zi({color:t}),stroke:new mr({color:e,width:i/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function Ap(n){return n.getGeometry()}const A6="#333";class $u{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=bn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new zi({color:A6}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new $u({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=bn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}function jl(n,e,t,i,r,s,o){let a,l;const u=(t-e)/i;if(u===1)a=e;else if(u===2)a=e,l=r;else if(u!==0){let c=n[e],h=n[e+1],d=0;const f=[0];for(let _=e+i;_<t;_+=i){const m=n[_],b=n[_+1];d+=Math.sqrt((m-c)*(m-c)+(b-h)*(b-h)),f.push(d),c=m,h=b}const g=r*d,p=f3(f,g);p<0?(l=(g-f[-p-2])/(f[-p-1]-f[-p-2]),a=e+(-p-2)*i):a=e+p*i}o=o>1?o:2,s=s||new Array(o);for(let c=0;c<o;++c)s[c]=a===void 0?NaN:l===void 0?n[a+c]:_n(n[a+c],n[a+i+c],l);return s}function vh(n,e,t,i,r,s){if(t==e)return null;let o;if(r<n[e+i-1])return s?(o=n.slice(e,e+i),o[i-1]=r,o):null;if(n[t-1]<r)return s?(o=n.slice(t-i,t),o[i-1]=r,o):null;if(r==n[e+i-1])return n.slice(e,e+i);let a=e/i,l=t/i;for(;a<l;){const d=a+l>>1;r<n[(d+1)*i-1]?l=d:a=d+1}const u=n[a*i-1];if(r==u)return n.slice((a-1)*i,(a-1)*i+i);const c=n[(a+1)*i-1],h=(r-u)/(c-u);o=[];for(let d=0;d<i-1;++d)o.push(_n(n[(a-1)*i+d],n[a*i+d],h));return o.push(r),o}function M6(n,e,t,i,r,s,o){if(o)return vh(n,e,t[t.length-1],i,r,s);let a;if(r<n[i-1])return s?(a=n.slice(0,i),a[i-1]=r,a):null;if(n[n.length-1]<r)return s?(a=n.slice(n.length-i),a[i-1]=r,a):null;for(let l=0,u=t.length;l<u;++l){const c=t[l];if(e!=c){if(r<n[e+i-1])return null;if(r<=n[c-1])return vh(n,e,c,i,r,!1);e=c}}return null}function pv(n,e,t,i){let r=n[e],s=n[e+1],o=0;for(let a=e+i;a<t;a+=i){const l=n[a],u=n[a+1];o+=Math.sqrt((l-r)*(l-r)+(u-s)*(u-s)),r=l,s=u}return o}class In extends wr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Pn(this.flatCoordinates,e),this.changed()}clone(){const e=new In(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<us(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ld(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Md(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,r))}forEachSegment(e){return T_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,vh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return dr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return jl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return pv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new In(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ou(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Au(this.flatCoordinates,0,e,this.stride),this.changed()}}function O6(n,e,t,i,r){mv(n,e,t||0,i||n.length-1,r||F6)}function mv(n,e,t,i,r){for(;i>t;){if(i-t>600){var s=i-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),c=Math.max(t,Math.floor(e-o*l/s+u)),h=Math.min(i,Math.floor(e+(s-o)*l/s+u));mv(n,e,c,h,r)}var d=n[e],f=t,g=i;for(Ro(n,t,e),r(n[i],d)>0&&Ro(n,t,i);f<g;){for(Ro(n,f,g),f++,g--;r(n[f],d)<0;)f++;for(;r(n[g],d)>0;)g--}r(n[t],d)===0?Ro(n,t,g):(g++,Ro(n,g,i)),g<=e&&(t=g+1),e<=g&&(i=g-1)}}function Ro(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function F6(n,e){return n<e?-1:n>e?1:0}let _v=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!el(e,t))return i;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;el(e,l)&&(t.leaf?i.push(a):bc(e,l)?this._all(a,i):s.push(a))}t=s.pop()}return i}collides(e){let t=this.data;if(!el(e,t))return!1;const i=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(el(e,o)){if(t.leaf||bc(e,o))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=As([]),this}remove(e,t){if(!e)return this;let i=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,u;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),u=!0),i.leaf){const c=k6(e,i.children,t);if(c!==-1)return i.children.splice(c,1),s.push(i),this._condense(s),this}!u&&!i.leaf&&bc(i,r)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){const s=i-t+1;let o=this._maxEntries,a;if(s<=o)return a=As(e.slice(t,i+1)),Es(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=As([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),u=l*Math.ceil(Math.sqrt(o));Mp(e,t,i,u,this.compareMinX);for(let c=t;c<=i;c+=u){const h=Math.min(c+u-1,i);Mp(e,c,h,l,this.compareMinY);for(let d=c;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return Es(a,this.toBBox),a}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const u=t.children[l],c=yc(u),h=$6(e,u)-c;h<o?(o=h,s=c<s?c:s,a=u):h===o&&c<s&&(s=c,a=u)}t=a||t.children[0]}return t}_insert(e,t,i){const r=i?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),Ao(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const i=e[t],r=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,r);const o=this._chooseSplitIndex(i,s,r),a=As(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,Es(i,this.toBBox),Es(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,t){this.data=As([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Es(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,s=1/0,o=1/0;for(let a=t;a<=i-t;a++){const l=Lo(e,0,a,this.toBBox),u=Lo(e,a,i,this.toBBox),c=B6(l,u),h=yc(l)+yc(u);c<s?(s=c,r=a,o=h<o?h:o):c===s&&h<o&&(o=h,r=a)}return r||i-t}_chooseSplitAxis(e,t,i){const r=e.leaf?this.compareMinX:D6,s=e.leaf?this.compareMinY:N6,o=this._allDistMargin(e,t,i,r),a=this._allDistMargin(e,t,i,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);const s=this.toBBox,o=Lo(e,0,t,s),a=Lo(e,i-t,i,s);let l=Qa(o)+Qa(a);for(let u=t;u<i-t;u++){const c=e.children[u];Ao(o,e.leaf?s(c):c),l+=Qa(o)}for(let u=i-t-1;u>=t;u--){const c=e.children[u];Ao(a,e.leaf?s(c):c),l+=Qa(a)}return l}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Ao(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Es(e[t],this.toBBox)}};function k6(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}function Es(n,e){Lo(n,0,n.children.length,e,n)}function Lo(n,e,t,i,r){r||(r=As(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=n.children[s];Ao(r,n.leaf?i(o):o)}return r}function Ao(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function D6(n,e){return n.minX-e.minX}function N6(n,e){return n.minY-e.minY}function yc(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function Qa(n){return n.maxX-n.minX+(n.maxY-n.minY)}function $6(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function B6(n,e){const t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),s=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-i)}function bc(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function el(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function As(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Mp(n,e,t,i,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const o=e+Math.ceil((t-e)/i/2)*i;O6(n,o,e,t,r),s.push(e,o,o,t)}}let fo=0;const go=0,et=1<<fo++,re=1<<fo++,Yn=1<<fo++,$t=1<<fo++,br=1<<fo++,sn=Math.pow(2,fo)-1,vv={[et]:"boolean",[re]:"number",[Yn]:"string",[$t]:"color",[br]:"number[]"},G6=Object.keys(vv).map(Number).sort(vr);function Gt(n){const e=[];for(const t of G6)V6(n,t)&&e.push(vv[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function V6(n,e){return(n&e)===e}function _i(n,e){return!!(n&e)}function Bu(n,e){return n===e}class fr{constructor(e,t){this.type=e,this.value=t}}class z6{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function yv(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function j6(n){switch(n){case"string":return Yn;case"color":return $t;case"number":return re;case"boolean":return et;case"number[]":return br;default:throw new Error(`Unrecognized type hint: ${n}`)}}function Fe(n,e,t){switch(typeof n){case"boolean":return new fr(et,n);case"number":return new fr(re,n);case"string":{let r=Yn;return v4(n)&&(r|=$t),Bu(r&t,go)||(r&=t),new fr(r,n)}}if(!Array.isArray(n))throw new Error("Expression must be an array or a primitive value");if(n.length===0)throw new Error("Empty expression");if(typeof n[0]=="string")return e8(n,e,t);for(const r of n)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=br;return(n.length===3||n.length===4)&&(i|=$t),t&&(i&=t),new fr(i,n)}const U={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},W6={[U.Get]:ye(([n,e])=>e!==void 0?j6(e.value):sn,be(1,2),U6),[U.Var]:ye(([n])=>n.type,be(1,1),H6),[U.Id]:ye(re|Yn,Po,X6),[U.Concat]:ye(Yn,be(2,1/0),Me(sn)),[U.GeometryType]:ye(Yn,Po),[U.Resolution]:ye(re,Po),[U.Zoom]:ye(re,Po),[U.Time]:ye(re,Po),[U.Any]:ye(et,be(2,1/0),Me(et)),[U.All]:ye(et,be(2,1/0),Me(et)),[U.Not]:ye(et,be(1,1),Me(et)),[U.Equal]:ye(et,be(2,2),Me(sn),Mr),[U.NotEqual]:ye(et,be(2,2),Me(sn),Mr),[U.GreaterThan]:ye(et,be(2,2),Me(sn),Mr),[U.GreaterThanOrEqualTo]:ye(et,be(2,2),Me(sn),Mr),[U.LessThan]:ye(et,be(2,2),Me(sn),Mr),[U.LessThanOrEqualTo]:ye(et,be(2,2),Me(sn),Mr),[U.Multiply]:ye(n=>{let e=re|$t;for(let t=0;t<n.length;t++)e&=n[t].type;return e},be(2,1/0),Me(re|$t),Mr),[U.Divide]:ye(re,be(2,2),Me(re)),[U.Add]:ye(re,be(2,1/0),Me(re)),[U.Subtract]:ye(re,be(2,2),Me(re)),[U.Clamp]:ye(re,be(3,3),Me(re)),[U.Mod]:ye(re,be(2,2),Me(re)),[U.Pow]:ye(re,be(2,2),Me(re)),[U.Abs]:ye(re,be(1,1),Me(re)),[U.Floor]:ye(re,be(1,1),Me(re)),[U.Ceil]:ye(re,be(1,1),Me(re)),[U.Round]:ye(re,be(1,1),Me(re)),[U.Sin]:ye(re,be(1,1),Me(re)),[U.Cos]:ye(re,be(1,1),Me(re)),[U.Atan]:ye(re,be(1,2),Me(re)),[U.Sqrt]:ye(re,be(1,1),Me(re)),[U.Match]:ye(n=>{let e=sn;for(let t=2;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},be(4,1/0),Op,Y6),[U.Between]:ye(et,be(3,3),Me(re)),[U.Interpolate]:ye(n=>{let e=$t|re;for(let t=3;t<n.length;t+=2)e&=n[t].type;return e},be(6,1/0),Op,Z6),[U.Case]:ye(n=>{let e=sn;for(let t=1;t<n.length;t+=2)e&=n[t].type;return e&=n[n.length-1].type,e},be(3,1/0),K6,q6),[U.In]:ye(et,be(2,2),J6),[U.Number]:ye(re,be(1,1/0),Me(sn)),[U.String]:ye(Yn,be(1,1/0),Me(sn)),[U.Array]:ye(n=>n.length===3||n.length===4?br|$t:br,be(1,1/0),Me(re)),[U.Color]:ye($t,be(3,4),Me(re)),[U.Band]:ye(re,be(1,3),Me(re)),[U.Palette]:ye($t,be(2,2),Q6)};function U6(n,e){const t=Fe(n[1],e);if(!(t instanceof fr))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),n.length===3){const i=Fe(n[2],e);return[t,i]}return[t]}function H6(n,e,t,i){const r=n[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new fr(sn,r)];const s=e.style.variables[r],o=Fe(s,e);if(o.value=r,i&&!_i(i,o.type))throw new Error(`The variable ${r} has type ${Gt(o.type)} but the following type was expected: ${Gt(i)}`);return[o]}function X6(n,e){e.featureId=!0}function Po(n,e){const t=n[0];if(n.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function be(n,e){return function(t,i){const r=t[0],s=t.length-1;if(n===e){if(s!==n){const o=n===1?"":"s";throw new Error(`Expected ${n} argument${o} for ${r}, got ${s}`)}}else if(s<n||s>e){const o=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function Me(n){return function(e,t){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Fe(e[o+1],t);if(!_i(n,a.type)){const l=Gt(n),u=Gt(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${l} but expected ${u}`)}a.type&=n,s[o]=a}return s}}function Mr(n,e,t){const i=n[0],r=n.length-1;let s=sn;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===go)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Fe(n[a+1],e,s);return o}function K6(n,e){const t=n[0],i=n.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(i)} instead`)}function Op(n,e){const t=n[0],i=n.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(i)} instead`)}function Y6(n,e,t,i){const r=n.length-1;let o=Fe(n[1],e).type;const a=Fe(n[n.length-1],e);let l=i!==void 0?i&a.type:a.type;const u=new Array(r-2);for(let h=0;h<r-2;h+=2){const d=Fe(n[h+2],e),f=Fe(n[h+3],e);o&=d.type,l&=f.type,u[h]=d,u[h+1]=f}const c=Yn|re|et;if(!_i(c,o))throw new Error(`Expected an input of type ${Gt(c)} for the interpolate operation, got ${Gt(o)} instead`);if(Bu(l,go))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(n));for(let h=0;h<r-2;h+=2){const d=Fe(n[h+2],e,o),f=Fe(n[h+3],e,l);u[h]=d,u[h+1]=f}return[Fe(n[1],e,o),...u,Fe(n[n.length-1],e,l)]}function Z6(n,e,t,i){const r=n[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Fe(s,e);let o=Fe(n[2],e);if(!_i(re,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Gt(o.type)} instead`);o=Fe(n[2],e,re);const a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){let u=Fe(n[l+3],e);if(!_i(re,u.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Gt(u.type)} at position ${l+2} instead`);let c=Fe(n[l+4],e);if(!_i(re|$t,c.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Gt(c.type)} at position ${l+3} instead`);u=Fe(n[l+3],e,re),c=Fe(n[l+4],e,re|$t),a[l]=u,a[l+1]=c}return[s,o,...a]}function q6(n,e,t,i){const r=Fe(n[n.length-1],e);let s=i!==void 0?i&r.type:r.type;const o=new Array(n.length-1);for(let a=0;a<o.length-1;a+=2){const l=Fe(n[a+1],e),u=Fe(n[a+2],e);if(!_i(et,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Gt(l.type)} at position ${a} instead`);s&=u.type,o[a]=l,o[a+1]=u}if(Bu(s,go))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(n));for(let a=0;a<o.length-1;a+=2)o[a+1]=Fe(n[a+2],e,s);return o[o.length-1]=Fe(n[n.length-1],e,s),o}function J6(n,e){let t=n[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let i=Yn|re;const r=new Array(t.length);for(let o=0;o<r.length;o++){const a=Fe(t[o],e);i&=a.type,r[o]=a}if(Bu(i,go))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(n));return[Fe(n[1],e,i),...r]}function Q6(n,e){const t=Fe(n[1],e,re);if(t.type!==re)throw new Error(`The first argument of palette must be an number, got ${Gt(t.type)} instead`);const i=n[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const o=Fe(i[s],e,$t);if(!(o instanceof fr))throw new Error(`The palette color at index ${s} must be a literal value`);if(!_i(o.type,$t))throw new Error(`The palette color at index ${s} should be of type color, got ${Gt(o.type)} instead`);r[s]=o}return[t,...r]}function ye(n,...e){return function(t,i,r){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,i,o,r)||o;let a=typeof n=="function"?n(o):n;if(r!==void 0){if(!_i(a,r))throw new Error(`The following expression was expected to return ${Gt(r)}, but returns ${Gt(a)} instead: ${JSON.stringify(t)}`);a&=r}if(a===go)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new z6(a,s,...o)}}function e8(n,e,t){const i=n[0],r=W6[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(n,e,t)}function bv(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function Tr(n,e,t){const i=Fe(n,t);if(!_i(e,i.type)){const r=Gt(e),s=Gt(i.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return ji(i)}function ji(n,e){if(n instanceof fr){if(n.type===$t&&typeof n.value=="string"){const i=Cd(n.value);return function(){return i}}return function(){return n.value}}const t=n.operator;switch(t){case U.Number:case U.String:return t8(n);case U.Get:case U.Var:return n8(n);case U.Id:return i=>i.featureId;case U.Concat:{const i=n.args.map(r=>ji(r));return r=>"".concat(...i.map(s=>s(r).toString()))}case U.Resolution:return i=>i.resolution;case U.Any:case U.All:case U.Not:return r8(n);case U.Equal:case U.NotEqual:case U.LessThan:case U.LessThanOrEqualTo:case U.GreaterThan:case U.GreaterThanOrEqualTo:return i8(n);case U.Multiply:case U.Divide:case U.Add:case U.Subtract:case U.Clamp:case U.Mod:case U.Pow:case U.Abs:case U.Floor:case U.Ceil:case U.Round:case U.Sin:case U.Cos:case U.Atan:case U.Sqrt:return s8(n);case U.Match:return o8(n);case U.Interpolate:return a8(n);default:throw new Error(`Unsupported operator ${t}`)}}function t8(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ji(n.args[s]);switch(t){case U.Number:case U.String:return s=>{for(let o=0;o<i;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function n8(n,e){const i=n.args[0].value;switch(n.operator){case U.Get:return r=>r.properties[i];case U.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function i8(n,e){const t=n.operator,i=ji(n.args[0]),r=ji(n.args[1]);switch(t){case U.Equal:return s=>i(s)===r(s);case U.NotEqual:return s=>i(s)!==r(s);case U.LessThan:return s=>i(s)<r(s);case U.LessThanOrEqualTo:return s=>i(s)<=r(s);case U.GreaterThan:return s=>i(s)>r(s);case U.GreaterThanOrEqualTo:return s=>i(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function r8(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ji(n.args[s]);switch(t){case U.Any:return s=>{for(let o=0;o<i;++o)if(r[o](s))return!0;return!1};case U.All:return s=>{for(let o=0;o<i;++o)if(!r[o](s))return!1;return!0};case U.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function s8(n,e){const t=n.operator,i=n.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ji(n.args[s]);switch(t){case U.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=r[a](s);return o};case U.Divide:return s=>r[0](s)/r[1](s);case U.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=r[a](s);return o};case U.Subtract:return s=>r[0](s)-r[1](s);case U.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case U.Mod:return s=>r[0](s)%r[1](s);case U.Pow:return s=>Math.pow(r[0](s),r[1](s));case U.Abs:return s=>Math.abs(r[0](s));case U.Floor:return s=>Math.floor(r[0](s));case U.Ceil:return s=>Math.ceil(r[0](s));case U.Round:return s=>Math.round(r[0](s));case U.Sin:return s=>Math.sin(r[0](s));case U.Cos:return s=>Math.cos(r[0](s));case U.Atan:return i===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case U.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function o8(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=ji(n.args[r]);return r=>{const s=i[0](r);for(let o=1;o<t;o+=2)if(s===i[o](r))return i[o+1](r);return i[t-1](r)}}function a8(n,e){const t=n.args.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=ji(n.args[r]);return r=>{const s=i[0](r),o=i[1](r);let a,l;for(let u=2;u<t;u+=2){const c=i[u](r);let h=i[u+1](r);const d=Array.isArray(h);if(d&&(h=m4(h)),c>=o)return u===2?h:d?l8(s,o,a,l,c,h):Mo(s,o,a,l,c,h);a=c,l=h}return l}}function Mo(n,e,t,i,r,s){const o=r-t;if(o===0)return i;const a=e-t,l=n===1?a/o:(Math.pow(n,a)-1)/(Math.pow(n,o)-1);return i+l*(s-i)}function l8(n,e,t,i,r,s){if(r-t===0)return i;const a=hp(i),l=hp(s);let u=l[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[Mo(n,e,t,a[0],r,l[0]),Mo(n,e,t,a[1],r,l[1]),a[2]+Mo(n,e,t,0,r,u),Mo(n,e,t,i[3],r,s[3])];return g_(_4(c))}function u8(n){return!0}function c8(n){const e=yv(),t=h8(n,e),i=bv();return function(r,s){if(i.properties=r.getPropertiesInternal(),i.resolution=s,e.featureId){const o=r.getId();o!==void 0?i.featureId=o:i.featureId=null}return t(i)}}function Fp(n){const e=yv(),t=n.length,i=new Array(t);for(let o=0;o<t;++o)i[o]=yh(n[o],e);const r=bv(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const u=o.getId();u!==void 0?r.featureId=u:r.featureId=null}let l=0;for(let u=0;u<t;++u){const c=i[u](r);c&&(s[l]=c,l+=1)}return s.length=l,s}}function h8(n,e){const t=n.length,i=new Array(t);for(let r=0;r<t;++r){const s=n[r],o="filter"in s?Tr(s.filter,et,e):u8;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let u=0;u<l;++u)a[u]=yh(s.style[u],e)}else a=[yh(s.style,e)];i[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=i[a].filter;if(l(r)&&!(n[a].else&&o)){o=!0;for(const u of i[a].styles){const c=u(r);c&&s.push(c)}}}return s}}function yh(n,e){const t=sa(n,"",e),i=oa(n,"",e),r=d8(n,e),s=f8(n,e),o=un(n,"z-index",e);if(!t&&!i&&!r&&!s&&!qr(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));const a=new cn;return function(l){let u=!0;if(t){const c=t(l);c&&(u=!1),a.setFill(c)}if(i){const c=i(l);c&&(u=!1),a.setStroke(c)}if(r){const c=r(l);c&&(u=!1),a.setText(c)}if(s){const c=s(l);c&&(u=!1),a.setImage(c)}return o&&a.setZIndex(o(l)),u?null:a}}function sa(n,e,t){const i=xv(n,e+"fill-color",t);if(!i)return null;const r=new zi;return function(s){const o=i(s);return o==="none"?null:(r.setColor(o),r)}}function oa(n,e,t){const i=un(n,e+"stroke-width",t),r=xv(n,e+"stroke-color",t);if(!i&&!r)return null;const s=lr(n,e+"stroke-line-cap",t),o=lr(n,e+"stroke-line-join",t),a=Ev(n,e+"stroke-line-dash",t),l=un(n,e+"stroke-line-dash-offset",t),u=un(n,e+"stroke-miter-limit",t),c=new mr;return function(h){if(r){const d=r(h);if(d==="none")return null;c.setColor(d)}if(i&&c.setWidth(i(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");c.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(d)}return a&&c.setLineDash(a(h)),l&&c.setLineDashOffset(l(h)),u&&c.setMiterLimit(u(h)),c}}function d8(n,e){const t="text-",i=lr(n,t+"value",e);if(!i)return null;const r=sa(n,t,e),s=sa(n,t+"background-",e),o=oa(n,t,e),a=oa(n,t+"background-",e),l=lr(n,t+"font",e),u=un(n,t+"max-angle",e),c=un(n,t+"offset-x",e),h=un(n,t+"offset-y",e),d=aa(n,t+"overflow",e),f=lr(n,t+"placement",e),g=un(n,t+"repeat",e),p=Gu(n,t+"scale",e),_=aa(n,t+"rotate-with-view",e),m=un(n,t+"rotation",e),b=lr(n,t+"align",e),y=lr(n,t+"justify",e),x=lr(n,t+"baseline",e),E=Ev(n,t+"padding",e),C=new $u({});return function(S){if(C.setText(i(S)),r&&C.setFill(r(S)),s&&C.setBackgroundFill(s(S)),o&&C.setStroke(o(S)),a&&C.setBackgroundStroke(a(S)),l&&C.setFont(l(S)),u&&C.setMaxAngle(u(S)),c&&C.setOffsetX(c(S)),h&&C.setOffsetY(h(S)),d&&C.setOverflow(d(S)),f){const P=f(S);if(P!=="point"&&P!=="line")throw new Error("Expected point or line for text-placement");C.setPlacement(P)}if(g&&C.setRepeat(g(S)),p&&C.setScale(p(S)),_&&C.setRotateWithView(_(S)),m&&C.setRotation(m(S)),b){const P=b(S);if(P!=="left"&&P!=="center"&&P!=="right"&&P!=="end"&&P!=="start")throw new Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(P)}if(y){const P=y(S);if(P!=="left"&&P!=="right"&&P!=="center")throw new Error("Expected left, right, or center for text-justify");C.setJustify(P)}if(x){const P=x(S);if(P!=="bottom"&&P!=="top"&&P!=="middle"&&P!=="alphabetic"&&P!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(P)}return E&&C.setPadding(E(S)),C}}function f8(n,e){return"icon-src"in n?g8(n,e):"shape-points"in n?p8(n,e):"circle-radius"in n?m8(n,e):null}function g8(n,e){const t="icon-",i=t+"src",r=wv(n[i],i),s=Wl(n,t+"anchor",e),o=Gu(n,t+"scale",e),a=un(n,t+"opacity",e),l=Wl(n,t+"displacement",e),u=un(n,t+"rotation",e),c=aa(n,t+"rotate-with-view",e),h=kp(n,t+"anchor-origin"),d=Dp(n,t+"anchor-x-units"),f=Dp(n,t+"anchor-y-units"),g=b8(n,t+"color"),p=v8(n,t+"cross-origin"),_=y8(n,t+"offset"),m=kp(n,t+"offset-origin"),b=Os(n,t+"width"),y=Os(n,t+"height"),x=_8(n,t+"size"),E=nf(n,t+"declutter"),C=new es({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:_,offsetOrigin:m,height:y,width:b,size:x,declutterMode:E});return function(S){return a&&C.setOpacity(a(S)),l&&C.setDisplacement(l(S)),u&&C.setRotation(u(S)),c&&C.setRotateWithView(c(S)),o&&C.setScale(o(S)),s&&C.setAnchor(s(S)),C}}function p8(n,e){const t="shape-",i=t+"points",r=Cv(n[i],i),s=sa(n,t,e),o=oa(n,t,e),a=Gu(n,t+"scale",e),l=Wl(n,t+"displacement",e),u=un(n,t+"rotation",e),c=aa(n,t+"rotate-with-view",e),h=Os(n,t+"radius"),d=Os(n,t+"radius1"),f=Os(n,t+"radius2"),g=Os(n,t+"angle"),p=nf(n,t+"declutter-mode"),_=new Ca({points:r,radius:h,radius1:d,radius2:f,angle:g,declutterMode:p});return function(m){return s&&_.setFill(s(m)),o&&_.setStroke(o(m)),l&&_.setDisplacement(l(m)),u&&_.setRotation(u(m)),c&&_.setRotateWithView(c(m)),a&&_.setScale(a(m)),_}}function m8(n,e){const t="circle-",i=sa(n,t,e),r=oa(n,t,e),s=un(n,t+"radius",e),o=Gu(n,t+"scale",e),a=Wl(n,t+"displacement",e),l=un(n,t+"rotation",e),u=aa(n,t+"rotate-with-view",e),c=nf(n,t+"declutter-mode"),h=new ho({radius:5,declutterMode:c});return function(d){return s&&h.setRadius(s(d)),i&&h.setFill(i(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),u&&h.setRotateWithView(u(d)),o&&h.setScale(o(d)),h}}function un(n,e,t){if(!(e in n))return;const i=Tr(n[e],re,t);return function(r){return Cv(i(r),e)}}function lr(n,e,t){if(!(e in n))return null;const i=Tr(n[e],Yn,t);return function(r){return wv(i(r),e)}}function aa(n,e,t){if(!(e in n))return null;const i=Tr(n[e],et,t);return function(r){const s=i(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function xv(n,e,t){if(!(e in n))return null;const i=Tr(n[e],$t|Yn,t);return function(r){return Tv(i(r),e)}}function Ev(n,e,t){if(!(e in n))return null;const i=Tr(n[e],br,t);return function(r){return Ta(i(r),e)}}function Wl(n,e,t){if(!(e in n))return null;const i=Tr(n[e],br,t);return function(r){const s=Ta(i(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function Gu(n,e,t){if(!(e in n))return null;const i=Tr(n[e],br|re,t);return function(r){return x8(i(r),e)}}function Os(n,e){const t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function _8(n,e){const t=n[e];if(t!==void 0){if(typeof t=="number")return bn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function v8(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function kp(n,e){const t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function Dp(n,e){const t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function y8(n,e){const t=n[e];if(t!==void 0)return Ta(t,e)}function nf(n,e){const t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function b8(n,e){const t=n[e];if(t!==void 0)return Tv(t,e)}function Ta(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);const t=n.length;for(let i=0;i<t;++i)if(typeof n[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function wv(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function Cv(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function Tv(n,e){if(typeof n=="string")return n;const t=Ta(n,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function x8(n,e){if(typeof n=="number")return n;const t=Ta(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}const Np={RENDER_ORDER:"renderOrder"};class rf extends Fu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Np.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new _v(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Np.RENDER_ORDER,e)}setStyle(e){this.style_=E8(e),this.styleFunction_=e===null?void 0:I6(this.style_),this.changed()}}function E8(n){if(n===void 0)return L6;if(!n)return null;if(typeof n=="function"||n instanceof cn)return n;if(!Array.isArray(n))return Fp([n]);if(n.length===0)return[];const e=n.length,t=n[0];if(t instanceof cn){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!(o instanceof cn))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=n[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return c8(r)}return Fp(n)}const ae={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},tl=[ae.FILL],gr=[ae.STROKE],Gr=[ae.BEGIN_PATH],$p=[ae.CLOSE_PATH];class Sa extends uv{constructor(e,t,i,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],wu(i,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,i,r,s,o){const a=this.coordinates;let l=a.length;const u=this.getBufferedMaxExtent();o&&(t+=r);let c=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,p,_;for(g=t+r;g<i;g+=r)d[0]=e[g],d[1]=e[g+1],_=eh(u,d),_!==p?(f&&(a[l++]=c,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):_===yt.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,c=d[0],h=d[1],p=_;return(s&&f||g===t+r)&&(a[l++]=c,a[l++]=h),l}drawCustomCoordinates_(e,t,i,r,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],u=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(u),t=l}return t}drawCustom(e,t,i,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,u,c,h,d;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let g=0,p=f.length;g<p;++g){const _=[];d=this.drawCustomCoordinates_(l,d,f[g],o,_),h.push(_)}this.instructions.push([ae.CUSTOM,a,h,e,i,sh]),this.hitDetectionInstructions.push([ae.CUSTOM,a,h,e,r||i,sh]);break;case"Polygon":case"MultiLineString":c=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),o,c),this.instructions.push([ae.CUSTOM,a,c,e,i,Qo]),this.hitDetectionInstructions.push([ae.CUSTOM,a,c,e,r||i,Qo]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([ae.CUSTOM,a,u,e,i,dr]),this.hitDetectionInstructions.push([ae.CUSTOM,a,u,e,r||i,dr]);break;case"MultiPoint":l=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(l,o),u>a&&(this.instructions.push([ae.CUSTOM,a,u,e,i,dr]),this.hitDetectionInstructions.push([ae.CUSTOM,a,u,e,r||i,dr]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),u=this.coordinates.length,this.instructions.push([ae.CUSTOM,a,u,e,i]),this.hitDetectionInstructions.push([ae.CUSTOM,a,u,e,r||i]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[ae.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ae.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let r,s,o=-1;for(t=0;t<i;++t)r=e[t],s=r[0],s==ae.END_GEOMETRY?o=t:s==ae.BEGIN_GEOMETRY&&(r[2]=t,g3(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const i=this.state;if(e){const r=e.getColor();i.fillStyle=di(r||an)}else i.fillStyle=void 0;if(t){const r=t.getColor();i.strokeStyle=di(r||na);const s=t.getLineCap();i.lineCap=s!==void 0?s:Qs;const o=t.getLineDash();i.lineDash=o?o.slice():Di;const a=t.getLineDashOffset();i.lineDashOffset=a||Ni;const l=t.getLineJoin();i.lineJoin=l!==void 0?l:eo;const u=t.getWidth();i.lineWidth=u!==void 0?u:ra;const c=t.getMiterLimit();i.miterLimit=c!==void 0?c:ta,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const t=e.fillStyle,i=[ae.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ae.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,u=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||s!=e.currentLineDash&&!bi(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=u)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=u)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[ae.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=r_(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;ls(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class w8 extends Sa{constructor(e,t,i,r){super(e,t,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([ae.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ae.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const i=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([ae.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ae.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class C8 extends Sa{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinates_(e,t,i,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,i,r,!1,!1),a=[ae.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ae.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Di,Ni],Gr);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(gr),this.endGeometry(t)}drawMultiLineString(e,t){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ae.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Di,Ni],Gr);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,h=o.length;c<h;++c)u=this.drawFlatCoordinates_(a,u,o[c],l);this.hitDetectionInstructions.push(gr),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(gr),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(gr),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Gr)}}class Bp extends Sa{constructor(e,t,i,r){super(e,t,i,r)}drawFlatCoordinatess_(e,t,i,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(Gr),this.hitDetectionInstructions.push(Gr);for(let u=0;u<l;++u){const c=i[u],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,c,r,!0,!a),f=[ae.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push($p),this.hitDetectionInstructions.push($p)),t=c}return o&&(this.instructions.push(tl),this.hitDetectionInstructions.push(tl)),a&&(this.instructions.push(gr),this.hitDetectionInstructions.push(gr)),t}drawCircle(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_FILL_STYLE,an]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Di,Ni]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const u=[ae.CIRCLE,l];this.instructions.push(Gr,u),this.hitDetectionInstructions.push(Gr,u),i.fillStyle!==void 0&&(this.instructions.push(tl),this.hitDetectionInstructions.push(tl)),i.strokeStyle!==void 0&&(this.instructions.push(gr),this.hitDetectionInstructions.push(gr)),this.endGeometry(t)}drawPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_FILL_STYLE,an]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Di,Ni]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_FILL_STYLE,an]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ae.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Di,Ni]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let u=0;for(let c=0,h=o.length;c<h;++c)u=this.drawFlatCoordinatess_(a,u,o[c],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,r=t.length;i<r;++i)t[i]=Or(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function T8(n,e,t,i,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<n&&o+r<i;){const[u,c]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-u)*(h-u)+(d-c)*(d-c));if(a+=f,a>=n){const g=(n-a+f)/f,p=_n(u,h,g),_=_n(c,d,g);l.push(p,_),s.push(l),l=[p,_],a==n&&(o+=r),a=0}else if(a<n)l.push(e[o+r],e[o+r+1]),o+=r;else{const g=f-a,p=_n(u,h,g/f),_=_n(c,d,g/f);l.push(p,_),s.push(l),l=[p,_],a=0,o+=r}}return a>0&&s.push(l),s}function S8(n,e,t,i,r){let s=t,o=t,a=0,l=0,u=t,c,h,d,f,g,p,_,m,b,y;for(h=t;h<i;h+=r){const x=e[h],E=e[h+1];g!==void 0&&(b=x-g,y=E-p,f=Math.sqrt(b*b+y*y),_!==void 0&&(l+=d,c=Math.acos((_*b+m*y)/(d*f)),c>n&&(l>a&&(a=l,s=u,o=h),l=0,u=h-r)),d=f,_=b,m=y),g=x,p=E}return l+=f,l>a?[u,h]:[s,o]}const Ul={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class R8 extends Sa{constructor(e,t,i,r){super(e,t,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[an]={fillStyle:an},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let u=null,c=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Yt(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(u=e.getFlatCoordinates(),l=="LineString")h=[u.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const p=e.getEndss();h=[];for(let _=0,m=p.length;_<m;++_)h.push(p[_][0])}this.beginGeometry(e,t);const d=s.repeat,f=d?void 0:s.textAlign;let g=0;for(let p=0,_=h.length;p<_;++p){let m;d?m=T8(d*this.resolution,u,g,h[p],c):m=[u.slice(g,h[p])];for(let b=0,y=m.length;b<y;++b){const x=m[b];let E=0,C=x.length;if(f==null){const P=S8(s.maxAngle,x,0,x.length,2);E=P[0],C=P[1]}for(let P=E;P<C;P+=c)o.push(x[P],x[P+1]);const S=o.length;g=h[p],this.drawChars_(a,S),a=S}}this.endGeometry(t)}else{let h=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),c=2;break;case"Polygon":u=e.getFlatInteriorPoint(),s.overflow||h.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const m=e.getFlatInteriorPoints();u=[];for(let b=0,y=m.length;b<y;b+=3)s.overflow||h.push(m[b+2]/this.resolution),u.push(m[b],m[b+1]);if(u.length===0)return;c=2;break}const d=this.appendFlatPointCoordinates(u,c);if(d===a)return;if(h&&(d-a)/2!==u.length/c){let m=a/2;h=h.filter((b,y)=>{const x=o[(m+y)*2]===u[y*c]&&o[(m+y)*2+1]===u[y*c+1];return x||--m,x})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=s.padding;if(f!=Br&&(s.scale[0]<0||s.scale[1]<0)){let m=s.padding[0],b=s.padding[1],y=s.padding[2],x=s.padding[3];s.scale[0]<0&&(b=-b,x=-x),s.scale[1]<0&&(m=-m,y=-y),f=[m,b,y,x]}const g=this.pixelRatio;this.instructions.push([ae.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==Br?Br:f.map(function(m){return m*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const p=1/g,_=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=an,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([ae.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,void 0,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?an:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),s.backgroundFill&&(this.state.fillStyle=_,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||ia,justify:t.justify,textBaseline:t.textBaseline||$l,scale:t.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,u=Ul[r.textBaseline],c=this.textOffsetY_*l,h=this.text_,d=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([ae.DRAW_CHARS,e,t,u,r.overflow,a,r.maxAngle,l,c,s,d*l,h,o,1]),this.hitDetectionInstructions.push([ae.DRAW_CHARS,e,t,u,r.overflow,a&&an,r.maxAngle,l,c,s,d*l,h,o,1/l])}setTextStyle(e,t){let i,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=di(o.getColor()||an)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),p=a.getLineDashOffset(),_=a.getWidth(),m=a.getMiterLimit();s.lineCap=a.getLineCap()||Qs,s.lineDash=g?g.slice():Di,s.lineDashOffset=p===void 0?Ni:p,s.lineJoin=a.getLineJoin()||eo,s.lineWidth=_===void 0?ra:_,s.miterLimit=m===void 0?ta:m,s.strokeStyle=di(a.getColor()||na)}i=this.textState_;const l=e.getFont()||I_;q4(l);const u=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||$l,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Br,i.scale=u===void 0?[1,1]:u;const c=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=c===void 0?0:c,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ne(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+ne(r.fillStyle):""}this.declutterImageWithText_=t}}const P8={Circle:Bp,Default:Sa,Image:w8,LineString:C8,Polygon:Bp,Text:R8};class Gp{constructor(e,t,i,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const r in i){const s=i[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let s=r[t];if(s===void 0){const o=P8[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function I8(n,e,t,i,r,s,o,a,l,u,c,h){let d=n[e],f=n[e+1],g=0,p=0,_=0,m=0;function b(){g=d,p=f,e+=i,d=n[e],f=n[e+1],m+=_,_=Math.sqrt((d-g)*(d-g)+(f-p)*(f-p))}do b();while(e<t-i&&m+_<s);let y=_===0?0:(s-m)/_;const x=_n(g,d,y),E=_n(p,f,y),C=e-i,S=m,P=s+a*l(u,r,c);for(;e<t-i&&m+_<P;)b();y=_===0?0:(P-m)/_;const D=_n(g,d,y),N=_n(p,f,y);let Y;if(h){const M=[x,E,D,N];Id(M,0,4,2,h,M,M),Y=M[0]>M[2]}else Y=x>D;const K=Math.PI,G=[],ie=C+i===e;e=C,_=0,m=S,d=n[e],f=n[e+1];let A;if(ie){b(),A=Math.atan2(f-p,d-g),Y&&(A+=A>0?-K:K);const M=(D+x)/2,$=(N+E)/2;return G[0]=[M,$,(P-s)/2,A,r],G}r=r.replace(/\n/g," ");for(let M=0,$=r.length;M<$;){b();let Z=Math.atan2(f-p,d-g);if(Y&&(Z+=Z>0?-K:K),A!==void 0){let ce=Z-A;if(ce+=ce>K?-2*K:ce<-K?2*K:0,Math.abs(ce)>o)return null}A=Z;const J=M;let oe=0;for(;M<$;++M){const ce=Y?$-M-1:M,ve=a*l(u,r[ce],c);if(e+i<t&&m+_<s+oe+ve/2)break;oe+=ve}if(M===J)continue;const Ee=Y?r.substring($-J,$-M):r.substring(J,M);y=_===0?0:(s+oe/2-m)/_;const j=_n(g,d,y),_e=_n(p,f,y);G.push([j,_e,oe/2,Z,Ee]),s+=oe}return G}const ws=zt(),nr=[],wi=[],Ci=[],ir=[];function Vp(n){return n[3].declutterBox}const zp=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function xc(n,e){return e==="start"?e=zp.test(n)?"right":"left":e==="end"&&(e=zp.test(n)?"left":"right"),Ul[e]}function L8(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}class A8{constructor(e,t,i,r){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=wt(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,i,r){const s=e+t+i+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[t],u=this.pixelRatio,c=[l.scale[0]*u,l.scale[1]*u],h=Array.isArray(e),d=l.justify?Ul[l.justify]:xc(Array.isArray(e)?e[0]:e,l.textAlign||ia),f=r&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(L8,[]),{width:p,height:_,widths:m,heights:b,lineWidths:y}=Q4(l,g),x=p+f,E=[],C=(x+2)*c[0],S=(_+f)*c[1],P={width:C<0?Math.floor(C):Math.ceil(C),height:S<0?Math.floor(S):Math.ceil(S),contextInstructions:E};(c[0]!=1||c[1]!=1)&&E.push("scale",c),r&&(E.push("strokeStyle",o.strokeStyle),E.push("lineWidth",f),E.push("lineCap",o.lineCap),E.push("lineJoin",o.lineJoin),E.push("miterLimit",o.miterLimit),E.push("setLineDash",[o.lineDash]),E.push("lineDashOffset",o.lineDashOffset)),i&&E.push("fillStyle",a.fillStyle),E.push("textBaseline","middle"),E.push("textAlign","center");const D=.5-d;let N=d*x+D*f;const Y=[],K=[];let G=0,ie=0,A=0,M=0,$;for(let Z=0,J=g.length;Z<J;Z+=2){const oe=g[Z];if(oe===`
`){ie+=G,G=0,N=d*x+D*f,++M;continue}const Ee=g[Z+1]||l.font;Ee!==$&&(r&&Y.push("font",Ee),i&&K.push("font",Ee),$=Ee),G=Math.max(G,b[A]);const j=[oe,N+D*m[A]+d*(m[A]-y[M]),.5*(f+G)+ie];N+=m[A],r&&Y.push("strokeText",j),i&&K.push("fillText",j),++A}return Array.prototype.push.apply(E,Y),Array.prototype.push.apply(E,K),this.labels_[s]=P,P}replayTextBackground_(e,t,i,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,r,s,o,a,l,u,c,h,d,f,g,p,_){a*=d[0],l*=d[1];let m=i-a,b=r-l;const y=s+u>e?e-u:s,x=o+c>t?t-c:o,E=g[3]+y*d[0]+g[1],C=g[0]+x*d[1]+g[2],S=m-g[3],P=b-g[0];(p||h!==0)&&(nr[0]=S,ir[0]=S,nr[1]=P,wi[1]=P,wi[0]=S+E,Ci[0]=wi[0],Ci[1]=P+C,ir[1]=Ci[1]);let D;return h!==0?(D=qn(wt(),i,r,1,1,h,-i,-r),ct(D,nr),ct(D,wi),ct(D,Ci),ct(D,ir),Gi(Math.min(nr[0],wi[0],Ci[0],ir[0]),Math.min(nr[1],wi[1],Ci[1],ir[1]),Math.max(nr[0],wi[0],Ci[0],ir[0]),Math.max(nr[1],wi[1],Ci[1],ir[1]),ws)):Gi(Math.min(S,S+E),Math.min(P,P+C),Math.max(S,S+E),Math.max(P,P+C),ws),f&&(m=Math.round(m),b=Math.round(b)),{drawImageX:m,drawImageY:b,drawImageW:y,drawImageH:x,originX:u,originY:c,declutterBox:{minX:ws[0],minY:ws[1],maxX:ws[2],maxY:ws[3],value:_},canvasTransform:D,scale:d}}replayImageOrLabel_(e,t,i,r,s,o,a){const l=!!(o||a),u=r.declutterBox,c=e.canvas,h=a?a[2]*r.scale[0]/2:0;return u.minX-h<=c.width/t&&u.maxX+h>=0&&u.minY-h<=c.height/t&&u.maxY+h>=0&&(l&&this.replayTextBackground_(e,nr,wi,Ci,ir,o,a),eI(e,r.canvasTransform,s,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=ct(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,r){const s=this.textStates[t],o=this.createLabel(e,t,r,i),a=this.strokeStates[i],l=this.pixelRatio,u=xc(Array.isArray(e)?e[0]:e,s.textAlign||ia),c=Ul[s.textBaseline||$l],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=u*d+2*(.5-u)*h,g=c*o.height/l+2*(.5-c)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,i,r,s,o,a,l){let u;this.pixelCoordinates_&&bi(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=pr(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),u4(this.renderedTransform_,i));let c=0;const h=r.length;let d=0,f,g,p,_,m,b,y,x,E,C,S,P,D=0,N=0,Y=null,K=null;const G=this.coordinateCache_,ie=this.viewRotation_,A=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,M={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ie},$=this.instructions!=r||this.overlaps?0:200;let Z,J,oe,Ee;for(;c<h;){const j=r[c];switch(j[0]){case ae.BEGIN_GEOMETRY:Z=j[1],Ee=j[3],Z.getGeometry()?a!==void 0&&!Yt(a,Ee.getExtent())?c=j[2]+1:++c:c=j[2];break;case ae.BEGIN_PATH:D>$&&(this.fill_(e),D=0),N>$&&(e.stroke(),N=0),!D&&!N&&(e.beginPath(),_=NaN,m=NaN),++c;break;case ae.CIRCLE:d=j[1];const ce=u[d],ve=u[d+1],Ze=u[d+2],fe=u[d+3],Q=Ze-ce,me=fe-ve,Ie=Math.sqrt(Q*Q+me*me);e.moveTo(ce+Ie,ve),e.arc(ce,ve,Ie,0,2*Math.PI,!0),++c;break;case ae.CLOSE_PATH:e.closePath(),++c;break;case ae.CUSTOM:d=j[1],f=j[2];const Le=j[3],Xe=j[4],ht=j.length==6?j[5]:void 0;M.geometry=Le,M.feature=Z,c in G||(G[c]=[]);const jt=G[c];ht?ht(u,d,f,2,jt):(jt[0]=u[d],jt[1]=u[d+1],jt.length=2),Xe(jt,M),++c;break;case ae.DRAW_IMAGE:d=j[1],f=j[2],x=j[3],g=j[4],p=j[5];let wn=j[6];const At=j[7],rn=j[8],Cn=j[9],gn=j[10];let dt=j[11];const Tn=j[12];let qe=j[13];const at=j[14],lt=j[15];if(!x&&j.length>=20){E=j[19],C=j[20],S=j[21],P=j[22];const Mt=this.drawLabelWithPointPlacement_(E,C,S,P);x=Mt.label,j[3]=x;const Ji=j[23];g=(Mt.anchorX-Ji)*this.pixelRatio,j[4]=g;const Wt=j[24];p=(Mt.anchorY-Wt)*this.pixelRatio,j[5]=p,wn=x.height,j[6]=wn,qe=x.width,j[13]=qe}let H;j.length>25&&(H=j[25]);let we,ut,St;j.length>17?(we=j[16],ut=j[17],St=j[18]):(we=Br,ut=!1,St=!1),gn&&A?dt+=ie:!gn&&!A&&(dt-=ie);let Sn=0;for(;d<f;d+=2){if(H&&H[Sn++]<qe/this.pixelRatio)continue;const Mt=this.calculateImageOrLabelDimensions_(x.width,x.height,u[d],u[d+1],qe,wn,g,p,rn,Cn,dt,Tn,s,we,ut||St,Z),Ji=[e,t,x,Mt,At,ut?Y:null,St?K:null];if(l){if(at==="none")continue;if(at==="obstacle"){l.insert(Mt.declutterBox);continue}else{let Wt,Nn;if(lt){const ft=f-d;if(!lt[ft]){lt[ft]=Ji;continue}if(Wt=lt[ft],delete lt[ft],Nn=Vp(Wt),l.collides(Nn))continue}if(l.collides(Mt.declutterBox))continue;Wt&&(l.insert(Nn),this.replayImageOrLabel_.apply(this,Wt)),l.insert(Mt.declutterBox)}}this.replayImageOrLabel_.apply(this,Ji)}++c;break;case ae.DRAW_CHARS:const ii=j[1],Rt=j[2],po=j[3],Wu=j[4];P=j[5];const Ia=j[6],mo=j[7],_o=j[8];S=j[9];const qi=j[10];E=j[11],C=j[12];const La=[j[13],j[13]],vo=this.textStates[C],Sr=vo.font,Rr=[vo.scale[0]*mo,vo.scale[1]*mo];let ri;Sr in this.widths_?ri=this.widths_[Sr]:(ri={},this.widths_[Sr]=ri);const Aa=pv(u,ii,Rt,2),Ma=Math.abs(Rr[0])*vp(Sr,E,ri);if(Wu||Ma<=Aa){const Mt=this.textStates[C].textAlign,Ji=(Aa-Ma)*xc(E,Mt),Wt=I8(u,ii,Rt,2,E,Ji,Ia,Math.abs(Rr[0]),vp,Sr,ri,A?0:this.viewRotation_);e:if(Wt){const Nn=[];let ft,fs,gs,Ot,Ut;if(S)for(ft=0,fs=Wt.length;ft<fs;++ft){Ut=Wt[ft],gs=Ut[4],Ot=this.createLabel(gs,C,"",S),g=Ut[2]+(Rr[0]<0?-qi:qi),p=po*Ot.height+(.5-po)*2*qi*Rr[1]/Rr[0]-_o;const $n=this.calculateImageOrLabelDimensions_(Ot.width,Ot.height,Ut[0],Ut[1],Ot.width,Ot.height,g,p,0,0,Ut[3],La,!1,Br,!1,Z);if(l&&l.collides($n.declutterBox))break e;Nn.push([e,t,Ot,$n,1,null,null])}if(P)for(ft=0,fs=Wt.length;ft<fs;++ft){Ut=Wt[ft],gs=Ut[4],Ot=this.createLabel(gs,C,P,""),g=Ut[2],p=po*Ot.height-_o;const $n=this.calculateImageOrLabelDimensions_(Ot.width,Ot.height,Ut[0],Ut[1],Ot.width,Ot.height,g,p,0,0,Ut[3],La,!1,Br,!1,Z);if(l&&l.collides($n.declutterBox))break e;Nn.push([e,t,Ot,$n,1,null,null])}l&&l.load(Nn.map(Vp));for(let $n=0,Uu=Nn.length;$n<Uu;++$n)this.replayImageOrLabel_.apply(this,Nn[$n])}}++c;break;case ae.END_GEOMETRY:if(o!==void 0){Z=j[1];const Mt=o(Z,Ee);if(Mt)return Mt}++c;break;case ae.FILL:$?D++:this.fill_(e),++c;break;case ae.MOVE_TO_LINE_TO:for(d=j[1],f=j[2],J=u[d],oe=u[d+1],b=J+.5|0,y=oe+.5|0,(b!==_||y!==m)&&(e.moveTo(J,oe),_=b,m=y),d+=2;d<f;d+=2)J=u[d],oe=u[d+1],b=J+.5|0,y=oe+.5|0,(d==f-2||b!==_||y!==m)&&(e.lineTo(J,oe),_=b,m=y);++c;break;case ae.SET_FILL_STYLE:Y=j,this.alignFill_=j[2],D&&(this.fill_(e),D=0,N&&(e.stroke(),N=0)),e.fillStyle=j[1],++c;break;case ae.SET_STROKE_STYLE:K=j,N&&(e.stroke(),N=0),this.setStrokeStyle_(e,j),++c;break;case ae.STROKE:$?N++:e.stroke(),++c;break;default:++c;break}}D&&this.fill_(e),N&&e.stroke()}execute(e,t,i,r,s,o){this.viewRotation_=r,this.execute_(e,t,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,i,r,s){return this.viewRotation_=i,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}const Ec=["Polygon","Circle","LineString","Image","Text","Default"];class jp{constructor(e,t,i,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=wt(),this.createExecutors_(s)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const t in e){let i=this.executorsByZIndex_[t];i===void 0&&(i={},this.executorsByZIndex_[t]=i);const r=e[t];for(const s in r){const o=r[s];i[s]=new A8(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,r,s,o){r=Math.round(r);const a=r*2+1,l=qn(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-i,-e[0],-e[1]),u=!this.hitDetectionContext_;u&&(this.hitDetectionContext_=Vt(a,a,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;c.canvas.width!==a||c.canvas.height!==a?(c.canvas.width=a,c.canvas.height=a):u||c.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=zt(),No(h,e),ls(h,t*(this.renderBuffer_+r),h));const d=M8(r);let f;function g(E,C){const S=c.getImageData(0,0,a,a).data;for(let P=0,D=d.length;P<D;P++)if(S[d[P]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(E)){const N=(d[P]-3)/4,Y=r-N%a,K=r-(N/a|0),G=s(E,C,Y*Y+K*K);if(G)return G}c.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(vr);let _,m,b,y,x;for(_=p.length-1;_>=0;--_){const E=p[_].toString();for(b=this.executorsByZIndex_[E],m=Ec.length-1;m>=0;--m)if(f=Ec[m],y=b[f],y!==void 0&&(x=y.executeHitDetection(c,l,i,g,h),x))return x}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],r=t[1],s=t[2],o=t[3],a=[i,r,i,o,s,o,s,r];return pr(a,0,8,2,e,a),a}isEmpty(){return qr(this.executorsByZIndex_)}execute(e,t,i,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(vr),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||Ec;let u,c,h,d,f,g;for(a&&l.reverse(),u=0,c=l.length;u<c;++u){const p=l[u].toString();for(f=this.executorsByZIndex_[p],h=0,d=o.length;h<d;++h){const _=o[h];g=f[_],g!==void 0&&g.execute(e,t,i,r,s,a)}}this.maxExtent_&&e.restore()}}const wc={};function M8(n){if(wc[n]!==void 0)return wc[n];const e=n*2+1,t=n*n,i=new Array(t+1);for(let s=0;s<=n;++s)for(let o=0;o<=n;++o){const a=s*s+o*o;if(a>t)break;let l=i[a];l||(l=[],i[a]=l),l.push(((n+s)*e+(n+o))*4+3),s>0&&l.push(((n-s)*e+(n+o))*4+3),o>0&&(l.push(((n+s)*e+(n-o))*4+3),s>0&&l.push(((n-s)*e+(n-o))*4+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return wc[n]=r,r}const hi=.5;function O8(n,e,t,i,r,s,o){const a=n[0]*hi,l=n[1]*hi,u=Vt(a,l);u.imageSmoothingEnabled=!1;const c=u.canvas,h=new cv(u,hi,r,null,o),d=t.length,f=Math.floor((256*256*256-1)/d),g={};for(let _=1;_<=d;++_){const m=t[_-1],b=m.getStyleFunction()||i;if(!b)continue;let y=b(m,s);if(!y)continue;Array.isArray(y)||(y=[y]);const E=(_*f).toString(16).padStart(7,"#00000");for(let C=0,S=y.length;C<S;++C){const P=y[C],D=P.getGeometryFunction()(m);if(!D||!Yt(r,D.getExtent()))continue;const N=P.clone(),Y=N.getFill();Y&&Y.setColor(E);const K=N.getStroke();K&&(K.setColor(E),K.setLineDash(null)),N.setText(void 0);const G=P.getImage();if(G){const $=G.getImageSize();if(!$)continue;const Z=Vt($[0],$[1],void 0,{alpha:!1}),J=Z.canvas;Z.fillStyle=E,Z.fillRect(0,0,J.width,J.height),N.setImage(new es({img:J,anchor:G.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:G.getOrigin(),opacity:1,size:G.getSize(),scale:G.getScale(),rotation:G.getRotation(),rotateWithView:G.getRotateWithView()}))}const ie=N.getZIndex()||0;let A=g[ie];A||(A={},g[ie]=A,A.Polygon=[],A.Circle=[],A.LineString=[],A.Point=[]);const M=D.getType();if(M==="GeometryCollection"){const $=D.getGeometriesArrayRecursive();for(let Z=0,J=$.length;Z<J;++Z){const oe=$[Z];A[oe.getType().replace("Multi","")].push(oe,N)}}else A[M.replace("Multi","")].push(D,N)}}const p=Object.keys(g).map(Number).sort(vr);for(let _=0,m=p.length;_<m;++_){const b=g[p[_]];for(const y in b){const x=b[y];for(let E=0,C=x.length;E<C;E+=2){h.setStyle(x[E+1]);for(let S=0,P=e.length;S<P;++S)h.setTransform(e[S]),h.drawGeometry(x[E])}}}return u.getImageData(0,0,c.width,c.height)}function F8(n,e,t){const i=[];if(t){const r=Math.floor(Math.round(n[0])*hi),s=Math.floor(Math.round(n[1])*hi),o=(Ke(r,0,t.width-1)+Ke(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],c=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);c&&c%h===0&&i.push(e[c/h-1])}return i}class k8 extends lv{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=zt(),this.wrappedRenderedExtent_=zt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,i){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,u=s.rotation,c=l.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,g=!(f[xt.ANIMATING]||f[xt.INTERACTING]),p=this.compositionContext_,_=Math.round(t.size[0]*d),m=Math.round(t.size[1]*d),b=h.getWrapX()&&l.canWrapX(),y=b?ke(c):null,x=b?Math.ceil((r[2]-c[2])/y)+1:1;let E=b?Math.floor((r[0]-c[0])/y):0;do{const C=this.getRenderTransform(o,a,u,d,_,m,E*y);e.execute(p,1,C,u,g,void 0,i)}while(++E<x)}setupCompositionContext_(){if(this.opacity_!==1){const e=Vt(this.context.canvas.width,this.context.canvas.height,Pp);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Eu(this.compositionContext_),Pp.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const i=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];c4(this.pixelTransform,1/i,1/i),Lu(this.inversePixelTransform,this.pixelTransform);const s=h_(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,u=this.declutterExecutorGroup;let c=l&&!l.isEmpty()||u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(Nt.PRERENDER)||this.getLayer().hasListener(Nt.POSTRENDER)))return null;const h=Math.round(e.size[0]*i),d=Math.round(e.size[1]*i);a.width!=h||a.height!=d?(a.width=h,a.height=d,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,h,d),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(c&&r.extent&&this.clipping){const p=hr(r.extent);c=Yt(p,e.extent),g=c&&!cr(p,e.extent),g&&this.clipUnrotated(this.compositionContext_,e,p)}return c&&this.renderWorlds(l,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];ct(this.pixelTransform,i);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,u=this.getLayer(),c=[],h=i[0]*hi,d=i[1]*hi;c.push(this.getRenderTransform(r,s,o,hi,h,d,0).slice());const f=u.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!cr(g,l)){let p=l[0];const _=ke(g);let m=0,b;for(;p<g[0];)--m,b=_*m,c.push(this.getRenderTransform(r,s,o,hi,h,d,b).slice()),p+=_;for(m=0,p=l[2];p>g[2];)++m,b=_*m,c.push(this.getRenderTransform(r,s,o,hi,h,d,b).slice()),p-=_}this.hitDetectionImageData_=O8(i,c,this.renderedFeatures_,u.getStyleFunction(),l,s,o)}t(F8(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),u={},c=function(f,g,p){const _=ne(f),m=u[_];if(m){if(m!==!0&&p<m.distanceSq){if(p===0)return u[_]=!0,s.splice(s.lastIndexOf(m),1),r(f,l,g);m.geometry=g,m.distanceSq=p}}else{if(p===0)return u[_]=!0,r(f,l,g);s.push(u[_]={feature:f,layer:l,geometry:g,distanceSq:p,callback:r})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,i,c,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const r=e.viewHints[xt.ANIMATING],s=e.viewHints[xt.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,u=e.viewState,c=u.projection,h=u.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let p=t.getRenderOrder();p===void 0&&(p=_6);const _=u.center.slice(),m=ls(l,g*h),b=m.slice(),y=[m.slice()],x=c.getExtent();if(i.getWrapX()&&c.canWrapX()&&!cr(x,e.extent)){const A=ke(x),M=Math.max(ke(m)/2,A);m[0]=x[0]-M,m[2]=x[2]+M,vd(_,c);const $=o_(y[0],c);$[0]<x[0]&&$[2]<x[2]?y.push([$[0]+A,$[1],$[2]+A,$[3]]):$[0]>x[0]&&$[2]>x[2]&&y.push([$[0]-A,$[1],$[2]-A,$[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&cr(this.wrappedRenderedExtent_,m))return bi(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=_,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const E=new Gp(_h(h,d),m,h,d);let C;this.getLayer().getDeclutter()&&(C=new Gp(_h(h,d),m,h,d));let S;for(let A=0,M=y.length;A<M;++A)i.loadFeatures(y[A],h,c);const P=dv(h,d);let D=!0;const N=A=>{let M;const $=A.getStyleFunction()||t.getStyleFunction();if($&&(M=$(A,h)),M){const Z=this.renderFeature(A,P,M,E,S,C);D=D&&!Z}},Y=Iu(m),K=i.getFeaturesInExtent(Y);p&&K.sort(p);for(let A=0,M=K.length;A<M;++A)N(K[A]);this.renderedFeatures_=K,this.ready=D;const G=E.finish(),ie=new jp(m,h,d,i.getOverlaps(),G,t.getRenderBuffer());return C&&(this.declutterExecutorGroup=new jp(m,h,d,i.getOverlaps(),C.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedExtent_=b,this.wrappedRenderedExtent_=m,this.renderedCenter_=_,this.renderedProjection_=c,this.replayGroup_=ie,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,r,s,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let l=0,u=i.length;l<u;++l)a=Ip(r,e,i[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=Ip(r,e,i,t,this.boundHandleStyleImageChange_,s,o);return a}}class Ra extends rf{constructor(e){super(e)}createRenderer(){return new k8(this)}}class Hl{constructor(e){this.rbush_=new _v(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[ne(t)]=i}load(e,t){const i=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[r]=l,this.items_[ne(a)]=l}this.rbush_.load(i)}remove(e){const t=ne(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[ne(t)],r=[i.minX,i.minY,i.maxX,i.maxY];Jr(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let r=0,s=e.length;r<s;r++)if(i=t(e[r]),i)return i;return i}isEmpty(){return qr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Gi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Vu extends wr{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new Vu(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<r){if(l===0)for(let u=0;u<this.stride;++u)i[u]=s[u];else{const u=this.getRadius()/Math.sqrt(l);i[0]=s[0]+u*o,i[1]=s[1]+u*a;for(let c=2;c<this.stride;++c)i[c]=s[c]}return i.length=this.stride,l}return r}containsXY(e,t){const i=this.flatCoordinates,r=e-i[0],s=t-i[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return Gi(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Yt(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:pd(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+i;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=y_(r,0,e,this.stride);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),r=this.getStride();this.setCenter(Id(i,0,i.length,r,e,t,i)),this.changed()}}Vu.prototype.transform;class la extends v_{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ae),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(he(this.geometries_[e],ue.CHANGE,this.changed,this))}clone(){const e=new la(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<us(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,i,r);return r}containsXY(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)if(i[r].containsXY(e,t))return!0;return!1}computeExtent(e){ba(e);const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)gd(e,t[i].getExtent());return e}getGeometries(){return Wp(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let r=!1;for(let s=0,o=i.length;s<o;++s){const a=i[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}if(r){const s=new la(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].rotate(e,t);this.changed()}scale(e,t,i){i||(i=Vi(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(Wp(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,r=t.length;i<r;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Wp(n){const e=[];for(let t=0,i=n.length;t<i;++t)e.push(n[t].clone());return e}class to extends wr{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const r=e,s=[],o=[];for(let l=0,u=r.length;l<u;++l){const c=r[l];Pn(s,c.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){Pn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new to(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,r){return r<us(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Ad(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Od(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,r))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,M6(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return Qo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new In(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],u=new In(e.slice(s,l),i);r.push(u),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],u=jl(t,i,l,s,.5);Pn(e,u),i=l}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=x_(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new to(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return $4(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Ea(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class Pa extends wr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Pn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Pa(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,r){if(r<us(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const u=Fi(e,t,s[a],s[a+1]);if(u<r){r=u;for(let c=0;c<o;++c)i[c]=s[a+c];i.length=o}}return r}getCoordinates(){return dr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new mt(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=i){const a=new mt(e.slice(s,s+i),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let r=0,s=t.length;r<s;r+=i){const o=t[r],a=t[r+1];if(dd(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Au(this.flatCoordinates,0,e,this.stride),this.changed()}}function Sv(n,e,t,i){const r=[];let s=zt();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=fd(n,e,l[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class no extends wr{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const u=r[a],c=s.length,h=u.getEnds();for(let d=0,f=h.length;d<f;++d)h[d]+=c;Pn(s,u.getFlatCoordinates()),o.push(h)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,i=o}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Pn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const i=new no(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,r){return r<us(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(A4(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),M4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,r))}containsXY(e,t){return N4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return k4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),oh(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,sh(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Sv(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=C_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Pa(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;P_(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=oh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=F4(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new no(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),r=i[i.length-1];if(t!==0)for(let s=0,o=i.length;s<o;++s)i[s]-=t;return new xn(this.flatCoordinates.slice(t,r),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o].slice(),u=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const c=new xn(t.slice(s,u),e,l);r.push(c),s=u}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return B4(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=b_(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const r=i[i.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const Up=wt();class on{constructor(e,t,i,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?$s(this.flatCoordinates_):fd(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Vi(this.getExtent());this.flatInteriorPoints_=Dd(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=V4(this.flatCoordinates_,this.ends_),t=Sv(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=C_(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=jl(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let r=0,s=i.length;r<s;++r){const o=i[r],a=jl(e,t,o,2,.5);Pn(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=it(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const r=fn(i)/fn(t);qn(Up,i[0],i[3],r,-r,0,0,0),pr(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Up,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new on(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Km((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":i.length=Mu(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=x_(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=Fd(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break}return r&&(this.simplifiedGeometry_=new on(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}on.prototype.getFlatCoordinates=on.prototype.getOrientedFlatCoordinates;const gt={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function D8(n,e){return[[-1/0,-1/0,1/0,1/0]]}let N8=!1;function $8(n,e,t,i,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,i,r):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=N8,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const u=e.getType();let c;u=="json"?c=JSON.parse(a.responseText):u=="text"?c=a.responseText:u=="xml"?(c=a.responseXML,c||(c=new DOMParser().parseFromString(a.responseText,"application/xml"))):u=="arraybuffer"&&(c=a.response),c?s(e.readFeatures(c,{extent:t,featureProjection:r}),e.readProjection(c)):o()}else o()},a.onerror=o,a.send()}function Hp(n,e){return function(t,i,r,s,o){const a=this;$8(n,e,t,i,r,function(l,u){a.addFeatures(l),s!==void 0&&s(l)},o||Ys)}}class rr extends En{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class ds extends nv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ys,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Re(this.format_,"`format` must be set when `url` is set"),this.loader_=Hp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:D8;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Hl:null,this.loadedExtentsRtree_=new Hl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!t&&i===void 0&&(i=new Jt(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ne(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new rr(gt.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof on||(this.featureChangeKeys_[e]=[he(t,ue.CHANGE,this.handleFeatureChange_,this),he(t,Zr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof on){const s=this.idIndex_[r];s instanceof on?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:i=!1}else i=!1}return i&&(Re(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ne(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=ne(a);this.setupChangeEvents_(l,a);const u=a.getGeometry();if(u){const c=u.getExtent();t.push(c),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(gt.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new rr(gt.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(gt.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(gt.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Je.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Je.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ae);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new rr(gt.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){const s=r.getGeometry();if(s instanceof on||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const r=i.getGeometry();if(r instanceof on||r.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),qr(this.nullGeometryFeatures_)||Pn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=U3(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Bi,this.featuresRtree_.forEachInExtent(l,function(u){if(t(u)){const c=u.getGeometry(),h=a;if(a=c instanceof on?0:c.closestPointXY(i,r,o,a),a<h){s=u;const d=Math.sqrt(a);l[0]=i-d,l[1]=r-d,l[2]=i+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=ne(t),r=t.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const o=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new rr(gt.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ne(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&qr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(c){return cr(c.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new rr(gt.FEATURESLOADSTART)),this.loader_.call(this,l,t,i,c=>{--this.loadingExtentsCount_,this.dispatchEvent(new rr(gt.FEATURESLOADEND,void 0,c))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new rr(gt.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let i;t.forEachInExtent(e,function(r){if(Jr(r.extent,e))return i=r,!0}),i&&t.remove(i)}removeFeature(e){if(!e)return;const t=ne(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ne(e),i=this.featureChangeKeys_[t];if(!i)return;i.forEach(Ae),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new rr(gt.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const i in this.idIndex_){const r=this.idIndex_[i];if(e instanceof on&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){Re(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Hp(e,this.format_))}}const sf=34962,of=34963,B8=35040,G8=35044,bh=35048,V8=5121,z8=5123,j8=5125,Rv=5126,Xp=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function W8(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!b3},e);const t=Xp.length;for(let i=0;i<t;++i)try{const r=n.getContext(Xp[i],e);if(r)return r}catch{}return null}const U8={STATIC_DRAW:G8,STREAM_DRAW:B8,DYNAMIC_DRAW:bh};class Kp{constructor(e,t){this.array_=null,this.type_=e,Re(e===sf||e===of,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:U8.STATIC_DRAW}ofSize(e){return this.array_=new(Cc(this.type_))(e),this}fromArray(e){return this.array_=Cc(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(Cc(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Cc(n){switch(n){case sf:return Float32Array;case of:return Uint32Array;default:return Float32Array}}const nl={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},H8=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,X8=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class Yp{constructor(e){this.gl_=e.webGlContext;const t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();const i=t.createShader(t.VERTEX_SHADER);t.shaderSource(i,e.vertexShader||H8),t.compileShader(i);const r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e.fragmentShader||X8),t.compileShader(r),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,i),t.attachShader(this.renderTargetProgram_,r),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:t.getUniformLocation(this.renderTargetProgram_,o)})})}getGL(){return this.gl_}init(e){const t=this.getGL(),i=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const r=0,s=t.RGBA,o=0,a=t.RGBA,l=t.UNSIGNED_BYTE,u=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,r,s,i[0],i[1],o,a,l,u),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i[0],i[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,i,r){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,t?t.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!t){const l=ne(s.canvas);if(!e.renderTargets[l]){const u=s.getContextAttributes();u&&u.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),i&&i(s,e),s.drawArrays(s.TRIANGLES,0,6),r&&r(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const t=this.getGL();let i,r=1;this.uniforms_.forEach(function(s){if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof ImageData)s.texture||(s.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${r}`]),t.bindTexture(t.TEXTURE_2D,s.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,i.width,i.height,0,t.UNSIGNED_BYTE,new Uint8Array(i.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i),t.uniform1i(s.location,r++);else if(Array.isArray(i))switch(i.length){case 2:t.uniform2f(s.location,i[0],i[1]);return;case 3:t.uniform3f(s.location,i[0],i[1],i[2]);return;case 4:t.uniform4f(s.location,i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(s.location,i)})}}function K8(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Y8(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}const Si={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Ii={UNSIGNED_BYTE:V8,UNSIGNED_SHORT:z8,UNSIGNED_INT:j8,FLOAT:Rv},Xl={};function Zp(n){return"shared/"+n}let qp=0;function Z8(){const n="unique/"+qp;return qp+=1,n}function q8(n){let e=Xl[n];if(!e){const t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:W8(t)},Xl[n]=e}return e.users+=1,e.context}function J8(n){const e=Xl[n];if(!e||(e.users-=1,e.users>0))return;const t=e.context,i=t.getExtension("WEBGL_lose_context");i&&i.loseContext();const r=t.canvas;r.width=1,r.height=1,delete Xl[n]}class Q8 extends bu{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?Zp(e.canvasCacheKey):Z8(),this.gl_=q8(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const t=this.gl_.canvas;t.addEventListener(nl.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(nl.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=wt(),this.offsetScaleMatrix_=wt(),this.tmpMat4_=K8(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(i=>new Yp({webGlContext:this.gl_,scaleRatio:i.scaleRatio,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,uniforms:i.uniforms})):[new Yp({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===Zp(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}bindBuffer(e){const t=this.gl_,i=ne(e);let r=this.bufferCache_[i];if(!r){const s=t.createBuffer();r={buffer:e,webGlBuffer:s},this.bufferCache_[i]=r}t.bindBuffer(e.getType(),r.webGlBuffer)}flushBufferData(e){const t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const t=this.gl_,i=ne(e),r=this.bufferCache_[i];r&&!t.isContextLost()&&t.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(nl.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(nl.RESTORED,this.boundHandleWebGLContextRestored_),J8(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,i){const r=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,t?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindTexture(e,t,i){const r=this.gl_;r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.uniform1i(this.getUniformLocation(i),t)}prepareDrawToRenderTarget(e,t,i,r){const s=this.gl_,o=t.getSize();s.bindFramebuffer(s.FRAMEBUFFER,t.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,t.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,t.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,i?s.ZERO:s.ONE_MINUS_SRC_ALPHA),r?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,t){const i=this.gl_;this.getExtension("OES_element_index_uint");const r=i.UNSIGNED_INT,s=4,o=t-e,a=e*s;i.drawElements(i.TRIANGLES,o,r,a)}finalizeDraw(e,t,i){for(let r=0,s=this.postProcessPasses_.length;r<s;r++)r===s-1?this.postProcessPasses_[r].apply(e,null,t,i):this.postProcessPasses_[r].apply(e,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const t=e.size,i=e.viewState.rotation,r=e.pixelRatio;this.setUniformFloatValue(Si.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Si.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Si.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Si.PIXEL_RATIO,r),this.setUniformFloatVec2(Si.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Si.ROTATION,i)}applyHitDetectionUniform(e){const t=this.getUniformLocation(Si.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Si.PIXEL_RATIO,.5)}applyUniforms(e){const t=this.gl_;let i,r=0;this.uniforms_.forEach(s=>{if(i=typeof s.value=="function"?s.value(e):s.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData)s.texture||(s.prevValue=void 0,s.texture=t.createTexture()),this.bindTexture(s.texture,r,s.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(!(i instanceof HTMLImageElement)||i.complete)&&s.prevValue!==i&&(s.prevValue=i,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)),r++;else if(Array.isArray(i)&&i.length===6)this.setUniformMatrixValue(s.name,Y8(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:t.uniform2f(this.getUniformLocation(s.name),i[0],i[1]);return;case 3:t.uniform3f(this.getUniformLocation(s.name),i[0],i[1],i[2]);return;case 4:t.uniform4f(this.getUniformLocation(s.name),i[0],i[1],i[2],i[3]);return;default:return}else typeof i=="number"&&t.uniform1f(this.getUniformLocation(s.name),i)})}useProgram(e,t){this.gl_.useProgram(e),this.currentProgram_=e,this.applyFrameState(t),this.applyUniforms(t)}compileShader(e,t){const i=this.gl_,r=i.createShader(t);return i.shaderSource(r,e),i.compileShader(r),r}getProgram(e,t){const i=this.gl_,r=this.compileShader(e,i.FRAGMENT_SHADER),s=this.compileShader(t,i.VERTEX_SHADER),o=i.createProgram();if(i.attachShader(o,r),i.attachShader(o,s),i.linkProgram(o),!i.getShaderParameter(r,i.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(a)}if(i.deleteShader(r),!i.getShaderParameter(s,i.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${i.getShaderInfoLog(s)}`;throw new Error(a)}if(i.deleteShader(s),!i.getProgramParameter(o,i.LINK_STATUS)){const a=`GL program linking failed: ${i.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const t=ne(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){const t=ne(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){const i=e.size,r=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return qn(t,0,0,2/(s*i[0]),2/(s*i[1]),-r,-o[0],-o[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}enableAttributeArray_(e,t,i,r,s){const o=this.getAttributeLocation(e);o<0||(this.gl_.enableVertexAttribArray(o),this.gl_.vertexAttribPointer(o,t,i,!1,r,s))}enableAttributes(e){const t=ek(e);let i=0;for(let r=0;r<e.length;r++){const s=e[r];this.enableAttributeArray_(s.name,s.size,s.type||Rv,t,i),i+=s.size*Pv(s.type)}}handleWebGLContextLost(e){os(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,i){const r=this.gl_;i=i||r.createTexture();const s=0,o=r.RGBA,a=0,l=r.RGBA,u=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),t?r.texImage2D(r.TEXTURE_2D,s,o,l,u,t):r.texImage2D(r.TEXTURE_2D,s,o,e[0],e[1],a,l,u,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i}}function ek(n){let e=0;for(let t=0;t<n.length;t++){const i=n[t];e+=i.size*Pv(i.type)}return e}function Pv(n){switch(n){case Ii.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ii.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ii.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ii.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class af extends av{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=wt(),this.pixelContext_=null,this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,e.addChangeListener(Oe.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(Nt.PRECOMPOSE)){const r=new Bo(Nt.PRECOMPOSE,void 0,t,e);i.dispatchEvent(r)}}dispatchPostComposeEvent(e,t){const i=this.getLayer();if(i.hasListener(Nt.POSTCOMPOSE)){const r=new Bo(Nt.POSTCOMPOSE,void 0,t,e);i.dispatchEvent(r)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,i=-1,r;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,u=l.getRenderer();if(!(u instanceof af)){t=!0;continue}const c=l.getClassName();if((t||c!==r)&&(i+=1,t=!1),r=c,u===this)break}const s="map/"+e.mapId+"/group/"+i;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new Q8({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),r&&(this.helper.getCanvas().className=r),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(e,t,i){const r=this.getLayer();if(r.hasListener(e)){qn(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const s=new Bo(e,this.inversePixelTransform_,i,t);r.dispatchEvent(s)}}preRender(e,t){this.dispatchRenderEvent_(Nt.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Nt.POSTRENDER,e,t)}}const oi=new Uint8Array(4);class tk{constructor(e,t){this.helper_=e;const i=e.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.depthbuffer_=i.createRenderbuffer(),this.size_=t||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){bi(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,t=this.helper_.getGL();t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,t){if(e<0||t<0||e>this.size_[0]||t>=this.size_[1])return oi[0]=0,oi[1]=0,oi[2]=0,oi[3]=0,oi;this.readAll();const i=Math.floor(e)+(this.size_[1]-Math.floor(t)-1)*this.size_[0];return oi[0]=this.data_[i*4],oi[1]=this.data_[i*4+1],oi[2]=this.data_[i*4+2],oi[3]=this.data_[i*4+3],oi}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,t=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer_),t.viewport(0,0,e[0],e[1]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture_,0),t.bindRenderbuffer(t.RENDERBUFFER,this.depthbuffer_),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e[0],e[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}const Jp={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};var Iv={exports:{}};Iv.exports=zu;Iv.exports.default=zu;function zu(n,e,t){t=t||2;var i=e&&e.length,r=i?e[0]*t:n.length,s=Lv(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,d,f;if(i&&(s=ok(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(var g=t;g<r;g+=t)h=n[g],d=n[g+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return ua(s,o,t,a,l,f,0),o}function Lv(n,e,t,i,r){var s,o;if(r===wh(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Qp(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Qp(s,n[s],n[s+1],o);return o&&ju(o,o.next)&&(ha(o),o=o.next),o}function ts(n,e){if(!n)return n;e||(e=n);var t=n,i;do if(i=!1,!t.steiner&&(ju(t,t.next)||Ye(t.prev,t,t.next)===0)){if(ha(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ua(n,e,t,i,r,s,o){if(n){!o&&s&&hk(n,i,r,s);for(var a=n,l,u;n.prev!==n.next;){if(l=n.prev,u=n.next,s?ik(n,i,r,s):nk(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),ha(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=rk(ts(n),e,t),ua(n,e,t,i,r,s,2)):o===2&&sk(n,e,t,i,r,s):ua(ts(n),e,t,i,r,s,1);break}}}}function nk(n){var e=n.prev,t=n,i=n.next;if(Ye(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,g=i.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=h&&g.y<=f&&Fs(r,a,s,l,o,u,g.x,g.y)&&Ye(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function ik(n,e,t,i){var r=n.prev,s=n,o=n.next;if(Ye(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,g=c<h?c<d?c:d:h<d?h:d,p=a>l?a>u?a:u:l>u?l:u,_=c>h?c>d?c:d:h>d?h:d,m=xh(f,g,e,t,i),b=xh(p,_,e,t,i),y=n.prevZ,x=n.nextZ;y&&y.z>=m&&x&&x.z<=b;){if(y.x>=f&&y.x<=p&&y.y>=g&&y.y<=_&&y!==r&&y!==o&&Fs(a,c,l,h,u,d,y.x,y.y)&&Ye(y.prev,y,y.next)>=0||(y=y.prevZ,x.x>=f&&x.x<=p&&x.y>=g&&x.y<=_&&x!==r&&x!==o&&Fs(a,c,l,h,u,d,x.x,x.y)&&Ye(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;y&&y.z>=m;){if(y.x>=f&&y.x<=p&&y.y>=g&&y.y<=_&&y!==r&&y!==o&&Fs(a,c,l,h,u,d,y.x,y.y)&&Ye(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=b;){if(x.x>=f&&x.x<=p&&x.y>=g&&x.y<=_&&x!==r&&x!==o&&Fs(a,c,l,h,u,d,x.x,x.y)&&Ye(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function rk(n,e,t){var i=n;do{var r=i.prev,s=i.next.next;!ju(r,s)&&Av(r,i,i.next,s)&&ca(r,s)&&ca(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),ha(i),ha(i.next),i=n=s),i=i.next}while(i!==n);return ts(i)}function sk(n,e,t,i,r,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&gk(o,a)){var l=Mv(o,a);o=ts(o,o.next),l=ts(l,l.next),ua(o,e,t,i,r,s,0),ua(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function ok(n,e,t,i){var r=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=Lv(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(fk(u));for(r.sort(ak),s=0;s<r.length;s++)t=lk(r[s],t);return t}function ak(n,e){return n.x-e.x}function lk(n,e){var t=uk(n,e);if(!t)return e;var i=Mv(t,n);return ts(i,i.next),ts(t,t.next)}function uk(n,e){var t=e,i=n.x,r=n.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,d;t=o;do i>=t.x&&t.x>=u&&i!==t.x&&Fs(r<c?i:s,r,u,c,r<c?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),ca(t,n)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&ck(o,t)))&&(o=t,h=d)),t=t.next;while(t!==l);return o}function ck(n,e){return Ye(n.prev,n,e.prev)<0&&Ye(e.next,n,n.next)<0}function hk(n,e,t,i){var r=n;do r.z===0&&(r.z=xh(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,dk(r)}function dk(n){var e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function xh(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function fk(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Fs(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function gk(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!pk(n,e)&&(ca(n,e)&&ca(e,n)&&mk(n,e)&&(Ye(n.prev,n,e.prev)||Ye(n,e.prev,e))||ju(n,e)&&Ye(n.prev,n,n.next)>0&&Ye(e.prev,e,e.next)>0)}function Ye(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function ju(n,e){return n.x===e.x&&n.y===e.y}function Av(n,e,t,i){var r=rl(Ye(n,e,t)),s=rl(Ye(n,e,i)),o=rl(Ye(t,i,n)),a=rl(Ye(t,i,e));return!!(r!==s&&o!==a||r===0&&il(n,t,e)||s===0&&il(n,i,e)||o===0&&il(t,n,i)||a===0&&il(t,e,i))}function il(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function rl(n){return n>0?1:n<0?-1:0}function pk(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Av(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ca(n,e){return Ye(n.prev,n,n.next)<0?Ye(n,e,n.next)>=0&&Ye(n,n.prev,e)>=0:Ye(n,e,n.prev)<0||Ye(n,n.next,e)<0}function mk(n,e){var t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Mv(n,e){var t=new Eh(n.i,n.x,n.y),i=new Eh(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Qp(n,e,t,i){var r=new Eh(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ha(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Eh(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}zu.deviation=function(n,e,t,i){var r=e&&e.length,s=r?e[0]*t:n.length,o=Math.abs(wh(n,0,s,t));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:n.length;o-=Math.abs(wh(n,u,c,t))}var h=0;for(a=0;a<i.length;a+=3){var d=i[a]*t,f=i[a+1]*t,g=i[a+2]*t;h+=Math.abs((n[d]-n[g])*(n[f+1]-n[d+1])-(n[d]-n[f])*(n[g+1]-n[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function wh(n,e,t,i){for(var r=0,s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}zu.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(n[r][s][o]);r>0&&(i+=n[r-1].length,t.holes.push(i))}return t};const e0=.985;function _k(n,e){e=e||[];const t=256,i=t-1;return e[0]=Math.floor(n/t/t/t)/i,e[1]=Math.floor(n/t/t)%t/i,e[2]=Math.floor(n/t)%t/i,e[3]=n%t/i,e}function vk(n){let e=0;const t=256,i=t-1;return e+=Math.round(n[0]*t*t*t*i),e+=Math.round(n[1]*t*t*i),e+=Math.round(n[2]*t*i),e+=Math.round(n[3]*i),e}function yk(){const n='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(n,"binary").toString("base64"):URL.createObjectURL(new Blob([n],{type:"application/javascript"})))}function bk(n,e){const t=n.viewState.projection,r=e.getSource().getWrapX()&&t.canWrapX(),s=t.getExtent(),o=n.extent,a=r?ke(s):null,l=r?Math.ceil((o[2]-s[2])/a)+1:1;return[r?Math.floor((o[0]-s[0])/a):0,l,a]}class xk extends af{constructor(e,t){const i=t.uniforms||{},r=wt();i[Si.PROJECTION_MATRIX]=r,super(e,{uniforms:i,postProcesses:t.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Kp(sf,bh),this.indicesBuffer_=new Kp(of,bh),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.program_,this.hitDetectionEnabled_=t.hitDetectionEnabled??!0;const s=t.attributes?t.attributes.map(function(a){return{name:"a_prop_"+a.name,size:1,type:Ii.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Ii.FLOAT},{name:"a_index",size:1,type:Ii.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:Ii.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Ii.FLOAT})),this.attributes.push(...s),this.customAttributes=t.attributes?t.attributes:[],this.previousExtent_=zt(),this.currentTransform_=r,this.renderTransform_=wt(),this.invertRenderTransform_=wt(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=yk(),this.worker_.addEventListener("message",a=>{const l=a.data;if(l.type===Jp.GENERATE_POINT_BUFFERS){const u=l.projectionTransform;this.verticesBuffer_.fromArrayBuffer(l.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(l.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=u,Lu(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(a.data.renderInstructions),l.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const o=this.getLayer().getSource();this.sourceListenKeys_=[he(o,gt.ADDFEATURE,this.handleSourceFeatureAdded_,this),he(o,gt.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),he(o,gt.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),he(o,gt.CLEAR,this.handleSourceFeatureClear_,this)],o.forEachFeature(a=>{this.featureCache_[ne(a)]={feature:a,properties:a.getProperties(),geometry:a.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new tk(this.helper))}handleSourceFeatureAdded_(e){const t=e.feature;this.featureCache_[ne(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(e){const t=e.feature;this.featureCache_[ne(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()}}handleSourceFeatureDelete_(e){const t=e.feature;delete this.featureCache_[ne(t)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(e){const t=this.helper.getGL();this.preRender(t,e);const[i,r,s]=bk(e,this.getLayer());return this.renderWorlds(e,!1,i,r,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,i,r,s),this.hitRenderTarget_.clearCachedData()),this.postRender(t,e),this.helper.getCanvas()}prepareFrameInternal(e){const t=this.getLayer(),i=t.getSource(),r=e.viewState,s=!e.viewHints[xt.ANIMATING]&&!e.viewHints[xt.INTERACTING],o=!Jr(this.previousExtent_,e.extent),a=this.sourceRevision_<i.getRevision();if(a&&(this.sourceRevision_=i.getRevision()),s&&(o||a)){const l=r.projection,u=r.resolution,c=t instanceof rf?t.getRenderBuffer():0,h=ls(e.extent,c*u);i.loadFeatures(h,u,l),this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()}return this.helper.useProgram(this.program_,e),this.helper.prepareDraw(e),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(e){const t=wt();this.helper.makeProjectionTransform(e,t);const r=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,s=r*this.featureCount_;(!this.renderInstructions_||this.renderInstructions_.length!==s)&&(this.renderInstructions_=new Float32Array(s));let o,a;const l=[],u=[];let c=-1;for(const d in this.featureCache_)if(o=this.featureCache_[d],a=o.geometry,!(!a||a.getType()!=="Point")){if(l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1],ct(t,l),this.renderInstructions_[++c]=l[0],this.renderInstructions_[++c]=l[1],this.hitDetectionEnabled_){const f=_k(c+5,u);this.renderInstructions_[++c]=f[0],this.renderInstructions_[++c]=f[1],this.renderInstructions_[++c]=f[2],this.renderInstructions_[++c]=f[3],this.renderInstructions_[++c]=Number(d)}for(let f=0;f<this.customAttributes.length;f++){const g=this.customAttributes[f].callback(o.feature,o.properties);this.renderInstructions_[++c]=g}}const h={id:++this.lastSentId,type:Jp.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:r-2};h.projectionTransform=t,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(e,t,i,r,s){if(Re(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const o=ct(t.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],u=vk(l),c=this.renderInstructions_[u],h=Math.floor(c).toString(),f=this.getLayer().getSource().getFeatureByUid(h);if(f)return r(f,this.getLayer(),null)}renderWorlds(e,t,i,r,s){let o=i;this.helper.useProgram(this.program_,e),t&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(e,this.currentTransform_),h4(this.currentTransform_,o*s,0),Ed(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(e),this.helper.applyHitDetectionUniform(t);const a=this.indicesBuffer_.getSize();this.helper.drawElements(0,a)}while(++o<r)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(e){Ae(e)}),this.sourceListenKeys_=null,super.disposeInternal()}}function Go(n){const e=n.toString();return e.includes(".")?e:e+".0"}function Ek(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(Go).join(", ")})`}function Tc(n){const e=Jo(n),t=e.length>3?e[3]:1;return Ek([e[0]/255*t,e[1]/255*t,e[2]/255*t,t])}const Sc={};let wk=0;function Ck(n){return n in Sc||(Sc[n]=wk++),Sc[n]}function Cs(n){return Go(Ck(n))}function Tk(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const Ts=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,Ss=Tk();class Sk{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Go(Ss["circle-radius"])} + ${Go(Ss["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=Tc(Ss["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Go(Ss["stroke-width"]),this.strokeColorExpression_=Tc(Ss["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Cs("round"),this.strokeJoinExpression_=Cs("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=Tc(Ss["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e){return this.uniforms_.push(e),this}addAttribute(e){return this.attributes_.push(e),this}addVarying(e,t,i){return this.varyings_.push({name:e,type:t,expression:i}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){this.vertexShaderFunctions_.includes(e)||this.vertexShaderFunctions_.push(e)}addFragmentShaderFunction(e){this.fragmentShaderFunctions_.includes(e)||this.fragmentShaderFunctions_.push(e)}getSymbolVertexShader(){return this.hasSymbol_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${e0} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * lineWidth * 0.5;
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${e0}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Cs("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Cs("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Cs("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Cs("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0., -1., distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(e){return"attribute "+e+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(e){return"  "+e.name+" = "+e.expression+";"}).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${Ts}
${this.uniforms_.map(function(e){return"uniform "+e+";"}).join(`
`)}
varying vec4 v_hitColor;
${this.varyings_.map(function(e){return"varying "+e.type+" "+e.name+";"}).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}const Gn={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},Rk=["#00f","#0ff","#0f0","#ff0","#f00"];class Pk extends rf{constructor(e){e=e||{};const t=Object.assign({},e);delete t.gradient,delete t.radius,delete t.blur,delete t.weight,super(t),this.gradient_=null,this.addChangeListener(Gn.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:Rk),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const i=e.weight?e.weight:"weight";typeof i=="string"?this.weightFunction_=function(r){return r.get(i)}:this.weightFunction_=i,this.setRenderOrder(null)}getBlur(){return this.get(Gn.BLUR)}getGradient(){return this.get(Gn.GRADIENT)}getRadius(){return this.get(Gn.RADIUS)}handleGradientChanged_(){this.gradient_=Ik(this.getGradient())}setBlur(e){this.set(Gn.BLUR,e)}setGradient(e){this.set(Gn.GRADIENT,e)}setRadius(e){this.set(Gn.RADIUS,e)}createRenderer(){const e=new Sk().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new xk(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const i=this.weightFunction_(t);return i!==void 0?Ke(i,0,1):1}}],uniforms:{u_size:()=>(this.get(Gn.RADIUS)+this.get(Gn.BLUR))*2,u_blurSlope:()=>this.get(Gn.RADIUS)/Math.max(1,this.get(Gn.BLUR))},hitDetectionEnabled:!0,vertexShader:e.getSymbolVertexShader(),fragmentShader:e.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function Ik(n){const i=Vt(1,256),r=i.createLinearGradient(0,0,1,256),s=1/(n.length-1);for(let o=0,a=n.length;o<a;++o)r.addColorStop(o*s,n[o]);return i.fillStyle=r,i.fillRect(0,0,1,256),i.canvas}class Lk extends ds{constructor(e){super({attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=e.distance!==void 0?e.distance:20,this.minDistance=e.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=e.geometryFunction||function(t){const i=t.getGeometry();return Re(!i||i.getType()==="Point","The default `geometryFunction` can only handle `Point` or null geometries"),i},this.createCustomCluster_=e.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(e.source||null)}clear(e){this.features.length=0,super.clear(e)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(e,t,i){this.source.loadFeatures(e,t,i),t!==this.resolution&&(this.resolution=t,this.refresh())}setDistance(e){this.updateDistance(e,this.minDistance)}setMinDistance(e){this.updateDistance(this.distance,e)}getMinDistance(){return this.minDistance}setSource(e){this.source&&this.source.removeEventListener(ue.CHANGE,this.boundRefresh_),this.source=e,e&&e.addEventListener(ue.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(e,t){const i=e===0?0:Math.min(t,e)/e,r=e!==this.distance||this.interpolationRatio!==i;this.distance=e,this.minDistance=t,this.interpolationRatio=i,r&&this.refresh()}cluster(){if(this.resolution===void 0||!this.source)return;const e=zt(),t=this.distance*this.resolution,i=this.source.getFeatures(),r={};for(let s=0,o=i.length;s<o;s++){const a=i[s];if(!(ne(a)in r)){const l=this.geometryFunction(a);if(l){const u=l.getCoordinates();$s(u,e),ls(e,t,e);const c=this.source.getFeaturesInExtent(e).filter(function(h){const d=ne(h);return d in r?!1:(r[d]=!0,!0)});this.features.push(this.createCluster(c,e))}}}}createCluster(e,t){const i=[0,0];for(let a=e.length-1;a>=0;--a){const l=this.geometryFunction(e[a]);l?a_(i,l.getCoordinates()):e.splice(a,1)}l_(i,1/e.length);const r=Vi(t),s=this.interpolationRatio,o=new mt([i[0]*(1-s)+r[0]*s,i[1]*(1-s)+r[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,e):new Zt({geometry:o,features:e})}}class Ak{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Zt,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?it(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=it(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ge()}readFeature(e,t){return ge()}readFeatures(e,t){return ge()}readGeometry(e,t){return ge()}readProjection(e){return ge()}writeFeature(e,t){return ge()}writeFeatures(e,t){return ge()}writeGeometry(e,t){return ge()}}function lf(n,e,t){const i=t?it(t.featureProjection):null,r=t?it(t.dataProjection):null;let s=n;if(i&&r&&!kr(i,r)){e&&(s=n.clone());const o=e?i:r,a=e?r:i;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Zo(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let u=0,c=l.length;u<c;++u)l[u]=Math.round(l[u]*o)/o;return l};s===n&&(s=n.clone()),s.applyTransform(a)}return s}const Mk={Point:mt,LineString:In,Polygon:xn,MultiPoint:Pa,MultiLineString:to,MultiPolygon:no};function Ok(n,e,t){return Array.isArray(e[0])?(P_(n,0,e,t)||(n=n.slice(),oh(n,0,e,t)),n):($d(n,0,e,t)||(n=n.slice(),Nl(n,0,e,t)),n)}function Ov(n,e){var s;const t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>Ov({...n,geometry:o})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const r=t.layout.length;return lf(new on(i,i==="Polygon"?Ok(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function uf(n,e){if(!n)return null;if(Array.isArray(n)){const i=n.map(r=>uf(r,e));return new la(i)}const t=Mk[n.type];return lf(new t(n.flatCoordinates,n.layout,n.ends),!1,e)}class Fk extends Ak{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(sl(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(sl(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ge()}readFeaturesFromObject(e,t){return ge()}readGeometry(e,t){return this.readGeometryFromObject(sl(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ge()}readProjection(e){return this.readProjectionFromObject(sl(e))}readProjectionFromObject(e){return ge()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ge()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ge()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ge()}}function sl(n){if(typeof n=="string"){const e=JSON.parse(n);return e||null}return n!==null?n:null}class Fv extends Fk{constructor(e){e=e||{},super(),this.dataProjection=it(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=it(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const r=cf(i.geometry);if(this.featureClass===on)return Ov({geometry:r,id:i.id,properties:i.properties},t);const s=new Zt;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(uf(r,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let r=null;if(i.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const u=this.readFeatureFromObject(o[a],t);u&&r.push(u)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return kk(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=it(t.properties.name);else if(t.type==="EPSG")i=it("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(i.id=r),!e.hasProperties())return i;const s=e.getProperties(),o=e.getGeometry();return o&&(i.geometry=Ch(o,t),delete s[e.getGeometryName()]),qr(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let r=0,s=e.length;r<s;++r)i.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return Ch(e,this.adaptOptions(t))}}function cf(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=Nk(n);break}case"LineString":{t=$k(n);break}case"Polygon":{t=zk(n);break}case"MultiPoint":{t=Gk(n);break}case"MultiLineString":{t=Bk(n);break}case"MultiPolygon":{t=Vk(n);break}case"GeometryCollection":{t=Dk(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function kk(n,e){const t=cf(n);return uf(t,e)}function Dk(n,e){return n.geometries.map(function(i){return cf(i)})}function Nk(n){const e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:hs(e.length)}}function $k(n){const e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:hs(e[0].length)}}function Bk(n){const e=n.coordinates,t=e[0][0].length,i=[],r=Ea(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:hs(t)}}function Gk(n){const e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:hs(e[0].length)}}function Vk(n){const e=n.coordinates,t=[],i=e[0][0][0].length,r=b_(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:hs(i)}}function zk(n){const e=n.coordinates,t=[],i=e[0][0].length,r=Ea(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:r,layout:hs(i)}}function Ch(n,e){n=lf(n,!0,e);const t=n.getType();let i;switch(t){case"Point":{i=Kk(n);break}case"LineString":{i=Wk(n);break}case"Polygon":{i=Yk(n,e);break}case"MultiPoint":{i=Hk(n);break}case"MultiLineString":{i=Uk(n);break}case"MultiPolygon":{i=Xk(n,e);break}case"GeometryCollection":{i=jk(n,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function jk(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(i){return Ch(i,e)})}}function Wk(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function Uk(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function Hk(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function Xk(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function Kk(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Yk(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}const Zk={SELECT:"select"};class qk extends En{constructor(e,t,i,r){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=r}}const ol={};class hf extends co{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:jd,this.addCondition_=e.addCondition?e.addCondition:hh,this.removeCondition_=e.removeCondition?e.removeCondition:hh,this.toggleCondition_=e.toggleCondition?e.toggleCondition:Ud,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Bi,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:Jk(),this.features_=e.features||new Jt;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const i=e.layers;t=function(r){return i.includes(r)}}else t=Bi;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ne(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ne(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Je.ADD,this.boundAddFeature_),this.features_.addEventListener(Je.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Je.ADD,this.boundAddFeature_),this.features_.removeEventListener(Je.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(r){if(r instanceof Ra&&r.getSource()&&r.getSource().hasFeature(t))return r});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=ne(e);t in ol||(ol[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof hf&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const i=ne(e);e.setStyle(ol[i]),delete ol[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ne(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!i&&!r,o=e.map,a=this.getFeatures(),l=[],u=[];if(s){os(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof Zt)||!this.filter_(c,h)))return this.addFeatureLayerAssociation_(c,h),u.push(c),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=a.getLength()-1;c>=0;--c){const h=a.item(c),d=u.indexOf(h);d>-1?u.splice(d,1):(a.remove(h),l.push(h))}u.length!==0&&a.extend(u)}else{o.forEachFeatureAtPixel(e.pixel,(c,h)=>{if(!(!(c instanceof Zt)||!this.filter_(c,h)))return(t||r)&&!a.getArray().includes(c)?(this.addFeatureLayerAssociation_(c,h),u.push(c)):(i||r)&&a.getArray().includes(c)&&(l.push(c),this.removeFeatureLayerAssociation_(c)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let c=l.length-1;c>=0;--c)a.remove(l[c]);a.extend(u)}return(u.length>0||l.length>0)&&this.dispatchEvent(new qk(Zk.SELECT,u,l,e)),!0}}function Jk(){const n=tf();return Pn(n.Polygon,n.LineString),Pn(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}const al={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class ll extends En{constructor(e,t){super(e),this.feature=t}}function Qk(n,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();kv(n,s,t)}return t}function ul(n,e){return Fi(n[0],n[1],e[0],e[1])}function ks(n,e){const t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function cl(n,e,t){let i,r;e<t?(i=e,r=t):(i=t,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o){const l=Ds(n,i),u=Ds(n,r);return ul(l,u)}let a=0;if(i<s){const l=Ds(n,i),u=ks(n,s);a+=ul(l,u)}if(o<r){const l=ks(n,o),u=Ds(n,r);a+=ul(l,u)}for(let l=s;l<o-1;++l){const u=ks(n,l),c=ks(n,l+1);a+=ul(u,c)}return a}function kv(n,e,t){if(e instanceof In){hl(n,e.getCoordinates(),!1,t);return}if(e instanceof to){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)hl(n,i[r],!1,t);return}if(e instanceof xn){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r)hl(n,i[r],!0,t);return}if(e instanceof no){const i=e.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length;a<l;++a)hl(n,o[a],!0,t)}return}if(e instanceof la){const i=e.getGeometries();for(let r=0;r<i.length;++r)kv(n,i[r],t);return}}const Rc={index:-1,endIndex:NaN};function eD(n,e,t,i){const r=n[0],s=n[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const d=e.targets[h],f=d.coordinates;let g=1/0,p;for(let _=0;_<f.length-1;++_){const m=f[_],b=f[_+1],y=Dv(r,s,m,b);y.squaredDistance<g&&(g=y.squaredDistance,p=_+y.along)}g<o&&(o=g,d.ring&&e.targetIndex===h&&(d.endIndex>d.startIndex?p<d.startIndex&&(p+=f.length):d.endIndex<d.startIndex&&p>d.startIndex&&(p-=f.length)),l=p,a=h)}const u=e.targets[a];let c=u.ring;if(e.targetIndex===a&&c){const h=Ds(u.coordinates,l),d=t.getPixelFromCoordinate(h);Ol(d,e.startPx)>i&&(c=!1)}if(c){const h=u.coordinates,d=h.length,f=u.startIndex,g=l;if(f<g){const p=cl(h,f,g);cl(h,f,g-d)<p&&(l-=d)}else{const p=cl(h,f,g);cl(h,f,g+d)<p&&(l+=d)}}return Rc.index=a,Rc.endIndex=l,Rc}function hl(n,e,t,i){const r=n[0],s=n[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],u=e[o+1],c=Dv(r,s,l,u);if(c.squaredDistance===0){const h=o+c.along;i.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const Pc={along:0,squaredDistance:0};function Dv(n,e,t,i){const r=t[0],s=t[1],o=i[0],a=i[1],l=o-r,u=a-s;let c=0,h=r,d=s;return(l!==0||u!==0)&&(c=Ke(((n-r)*l+(e-s)*u)/(l*l+u*u),0,1),h+=l*c,d+=u*c),Pc.along=c,Pc.squaredDistance=Ru(Fi(n,e,h,d),10),Pc}function Ds(n,e){const t=n.length;let i=Math.floor(e);const r=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const o=n[i],a=o[0],l=o[1],u=n[s],c=u[0]-a,h=u[1]-l;return[a+c*r,l+h*r]}class tD extends Cr{constructor(e){const t=e;t.stopDown||(t.stopDown=ss),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=iD(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Bi,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const r=this.mode_;if(r==="Circle")i=function(s,o,a){const l=o||new Vu([NaN,NaN]),u=Ue(s[0]),c=ki(u,Ue(s[s.length-1]));return l.setCenterAndRadius(u,Math.sqrt(c),this.geometryLayout_),l};else{let s;r==="Point"?s=mt:r==="LineString"?s=In:r==="Polygon"&&(s=xn),i=function(o,a,l){return a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ra({source:new ds({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:nD(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Wd,this.freehandCondition_,e.freehand?this.freehandCondition_=Vl:this.freehandCondition_=e.freehandCondition?e.freehandCondition:Ud,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(uh.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Vl:t=e:t=hh,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===ue.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Te.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Te.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Te.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Te.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Te.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Te.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Te.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Pi(Te.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Ht([i,r]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=Qk(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,r=e.startIndex<=t;i===r?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=r-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const r=[];if(t<i){const s=Math.ceil(t);let o=Math.floor(i);o===i&&(o-=1);for(let a=s;a<=o;++a)r.push(ks(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(i);o===i&&(o+=1);for(let a=s;a>=o;--a)r.push(ks(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Ol(t.startPx,e.pixel)<this.snapTolerance_)return;const i=eD(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}t.targetIndex=i.index;const r=t.targets[t.targetIndex];r.endIndex=i.endIndex;const s=Ds(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,r=t[0]-i[0],s=t[1]-i[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")r=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let l=0,u=s.length;l<u;l++){const c=s[l],h=a.getPixelFromCoordinate(c),d=e[0]-h[0],f=e[1]-h[1],g=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(d*d+f*f)<=g,i){this.finishCoordinate_=c;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Zt(new mt(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Zt);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new In(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=Dl(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Zt(new In(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Zt,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new ll(al.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=Dl(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let r,s;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const i=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,r)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,r),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Pa([t])):this.type_==="MultiLineString"?e.setGeometry(new to([t])):this.type_==="MultiPolygon"&&e.setGeometry(new no([t])),this.dispatchEvent(new ll(al.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new ll(al.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let r;if(t==="LineString"||t==="Circle")r=this.sketchCoords_;else if(t==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Zt(new mt(r)),this.updateSketchFeatures_(),this.dispatchEvent(new ll(al.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function nD(){const n=tf();return function(e,t){return n[e.getGeometry().getType()]}}function iD(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}const t0=0,Vo=1,n0=[0,0,0,0],Gs=[],Ic={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class Lc extends En{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class rD extends Cr{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:D_,this.defaultDeleteCondition_=function(i){return uI(i)&&jd(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Vl,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Hl,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ra({source:new ds({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:oD(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Jt(this.source_.getFeatures()),this.source_.addEventListener(gt.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(gt.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Je.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Je.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener(ue.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Jt;const i=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,l=o.length;a<l;++a){const u=o[a].feature;u&&!i.includes(u)&&this.featuresBeingModified_.push(u)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new Lc(Ic.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(ue.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(r){e===r.feature&&i.push(r)});for(let r=i.length-1;r>=0;--r){const s=i[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),r={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r){const o=i.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(Ht(o),a)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[r],index:a,segment:u};this.rBush_.insert(Ht(u),c)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length-1;a<l;++a){const u=o.slice(a,a+2),c={feature:e,geometry:t,depth:[r],index:a,segment:u};this.rBush_.insert(Ht(u),c)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length;a<l;++a){const u=o[a];for(let c=0,h=u.length-1;c<h;++c){const d=u.slice(c,c+2),f={feature:e,geometry:t,depth:[a,r],index:c,segment:d};this.rBush_.insert(Ht(d),f)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),r={feature:e,geometry:t,index:t0,segment:[i,i]},s={feature:e,geometry:t,index:Vo,segment:[i,i]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert($s(i),r);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=i[r],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,i){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new Zt(new mt(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",i),r}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Te.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Te.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Te.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],l=a[0],u=l.feature;i.includes(u)||i.push(u);const c=l.geometry;r.includes(c)||r.push(c);const h=l.depth;let d;const f=l.segment,g=a[1];for(;t.length<c.getStride();)t.push(f[g][t.length]);switch(c.getType()){case"Point":d=t,f[0]=t,f[1]=t;break;case"MultiPoint":d=c.getCoordinates(),d[l.index]=t,f[0]=t,f[1]=t;break;case"LineString":d=c.getCoordinates(),d[l.index+g]=t,f[g]=t;break;case"MultiLineString":d=c.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"Polygon":d=c.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"MultiPolygon":d=c.getCoordinates(),d[h[1]][h[0]][l.index+g]=t,f[g]=t;break;case"Circle":if(f[0]=t,f[1]=t,l.index===t0)this.changingFeature_=!0,c.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let p=Ol(Ue(c.getCenter()),Ue(t));c.setRadius(p),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(c,d)}this.createOrUpdateVertexFeature_(t,i,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){e.map.getView().getProjection();const r=[],s=i.getGeometry().getCoordinates(),o=Ht([s]),a=this.rBush_.getInExtent(o),l={};a.sort(sD);for(let u=0,c=a.length;u<c;++u){const h=a[u],d=h.segment;let f=ne(h.geometry);const g=h.depth;if(g&&(f+="-"+g.join("-")),l[f]||(l[f]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===Vo){const p=r0(t,h);zn(p,s)&&!l[f][0]&&(this.dragSegments_.push([h,0]),l[f][0]=h);continue}if(zn(d[0],s)&&!l[f][0]){this.dragSegments_.push([h,0]),l[f][0]=h;continue}if(zn(d[1],s)&&!l[f][1]){if(l[f][0]&&l[f][0].index===0){let p=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":p=p[g[1]];case"Polygon":if(h.index!==p[g[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[f][1]=h;continue}ne(d)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(e)&&r.push(h)}r.length&&this.willModifyFeatures_(e,[r]);for(let u=r.length-1;u>=0;--u)this.insertVertex_(r[u],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],r=i.geometry;if(r.getType()==="Circle"){const s=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update($s(s),o);let l=r;this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(Ht(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new Lc(Ic.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,i){const r=i||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(l,u){return i0(r,l)-i0(r,u)};let o,a;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?u=>u===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(u,c,h)=>{h&&h.getType()==="Point"&&(h=new mt(Qr(h.getCoordinates())));const d=h||u.getGeometry();if(u instanceof Zt&&this.features_.getArray().includes(u)){a=d;const f=u.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:u,geometry:a,segment:[f,f]}]}return!0},{layerFilter:l})}if(!o){const l=hr($s(r,n0)),u=t.getView().getResolution()*this.pixelTolerance_,c=Iu(ls(l,u,n0));o=this.rBush_.getInExtent(c)}if(o&&o.length>0){const l=o.sort(s)[0],u=l.segment;let c=r0(r,l);const h=t.getPixelFromCoordinate(c);let d=Ol(e,h);if(a||d<=this.pixelTolerance_){const f={};if(f[ne(u)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-r[0],this.delta_[1]=c[1]-r[1]),l.geometry.getType()==="Circle"&&l.index===Vo)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);else{const g=t.getPixelFromCoordinate(u[0]),p=t.getPixelFromCoordinate(u[1]),_=ki(h,g),m=ki(h,p);d=Math.sqrt(Math.min(_,m)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(c=_>m?u[1]:u[0]),this.createOrUpdateVertexFeature_(c,[l.feature],[l.geometry]);const b={};b[ne(l.geometry)]=!0;for(let y=1,x=o.length;y<x;++y){const E=o[y].segment;if(zn(u[0],E[0])&&zn(u[1],E[1])||zn(u[0],E[1])&&zn(u[1],E[0])){const C=ne(o[y].geometry);C in b||(b[C]=!0,f[ne(E)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,l);const u=this.rBush_;u.remove(e),this.updateSegmentIndices_(s,a,o,1);const c={segment:[i[0],t],feature:r,geometry:s,depth:o,index:a};u.insert(Ht(c.segment),c),this.dragSegments_.push([c,1]);const h={segment:[t,i[1]],feature:r,geometry:s,depth:o,index:a+1};u.insert(Ht(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Te.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Lc(Ic.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,r,s,o,a,l,u,c,h,d,f,g;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],g=ne(f.feature),f.depth&&(g+="-"+f.depth.join("-")),g in t||(t[g]={}),o[1]===0?(t[g].right=f,t[g].index=f.index):o[1]==1&&(t[g].left=f,t[g].index=f.index+1);for(g in t){switch(d=t[g].right,c=t[g].left,u=t[g].index,h=u-1,c!==void 0?f=c:f=d,h<0&&(h=0),a=f.geometry,s=a.getCoordinates(),r=s,i=!1,a.getType()){case"MultiLineString":s[f.depth[0]].length>2&&(s[f.depth[0]].splice(u,1),i=!0);break;case"LineString":s.length>2&&(s.splice(u,1),i=!0);break;case"MultiPolygon":r=r[f.depth[1]];case"Polygon":r=r[f.depth[0]],r.length>4&&(u==r.length-1&&(u=0),r.splice(u,1),i=!0,u===0&&(r.pop(),r.push(r[0]),h=r.length-1));break}if(i){this.setGeometryCoordinates_(a,s);const p=[];if(c!==void 0&&(this.rBush_.remove(c),p.push(c.segment[0])),d!==void 0&&(this.rBush_.remove(d),p.push(d.segment[1])),c!==void 0&&d!==void 0){const _={depth:f.depth,feature:f.feature,geometry:f.geometry,index:h,segment:p};this.rBush_.insert(Ht(_.segment),_)}this.updateSegmentIndices_(a,u,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||bi(s.depth,i))&&s.index>t&&(s.index+=r)})}}function sD(n,e){return n.index-e.index}function i0(n,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===Vo){const o=ki(s.getCenter(),Ue(n)),a=Math.sqrt(o)-s.getRadius();return a*a}}const r=Ue(n);return Gs[0]=Ue(e.segment[0]),Gs[1]=Ue(e.segment[1]),Z3(r,Gs)}function r0(n,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===Vo)return Qr(i.getClosestPoint(Ue(n)));const r=Ue(n);return Gs[0]=Ue(e.segment[0]),Gs[1]=Ue(e.segment[1]),Qr(md(r,Gs))}function oD(){const n=tf();return function(e,t){return n.Point}}const aD={SNAP:"snap"};class lD extends En{constructor(e,t){super(e),this.vertex=t.vertex,this.vertexPixel=t.vertexPixel,this.feature=t.feature,this.segment=t.segment}}function s0(n){return n.feature?n.feature:n.element?n.element:null}const Ac=[];class uD extends Cr{constructor(e){e=e||{};const t=e;t.handleDownEvent||(t.handleDownEvent=Bi),t.stopDown||(t.stopDown=ss),super(t),this.on,this.once,this.un,this.source_=e.source?e.source:null,this.vertex_=e.vertex!==void 0?e.vertex:!0,this.edge_=e.edge!==void 0?e.edge:!0,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.rBush_=new Hl,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(e,t){t=t!==void 0?t:!0;const i=ne(e),r=e.getGeometry();if(r){const s=this.GEOMETRY_SEGMENTERS_[r.getType()];if(s){this.indexedFeaturesExtents_[i]=r.getExtent(zt());const o=[];if(s(o,r),o.length===1)this.rBush_.insert(Ht(o[0]),{feature:e,segment:o[0]});else if(o.length>1){const a=o.map(u=>Ht(u)),l=o.map(u=>({feature:e,segment:u}));this.rBush_.load(a,l)}}}t&&(this.featureChangeListenerKeys_[i]=he(e,ue.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}handleEvent(e){const t=this.snapTo(e.pixel,e.coordinate,e.map);return t&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel,this.dispatchEvent(new lD(aD.SNAP,{vertex:e.coordinate,vertexPixel:e.pixel,feature:t.feature,segment:t.segment}))),super.handleEvent(e)}handleFeatureAdd_(e){const t=s0(e);t&&this.addFeature(t)}handleFeatureRemove_(e){const t=s0(e);t&&this.removeFeature(t)}handleFeatureChange_(e){const t=e.target;if(this.handlingDownUpSequence){const i=ne(t);i in this.pendingFeatures_||(this.pendingFeatures_[i]=t)}else this.updateFeature_(t)}handleUpEvent(e){const t=Object.values(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(e,t){const i=t!==void 0?t:!0,r=ne(e),s=this.indexedFeaturesExtents_[r];if(s){const o=this.rBush_,a=[];o.forEachInExtent(s,function(l){e===l.feature&&a.push(l)});for(let l=a.length-1;l>=0;--l)o.remove(a[l])}i&&(Ae(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])}setMap(e){const t=this.getMap(),i=this.featuresListenerKeys_,r=this.getFeatures_();t&&(i.forEach(Ae),i.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(Ae),this.featureChangeListenerKeys_={}),super.setMap(e),e&&(this.features_?i.push(he(this.features_,Je.ADD,this.handleFeatureAdd_,this),he(this.features_,Je.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push(he(this.source_,gt.ADDFEATURE,this.handleFeatureAdd_,this),he(this.source_,gt.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(s=>this.addFeature(s)))}snapTo(e,t,i){i.getView().getProjection();const r=Ue(t),s=Iu(ls(Ht([r]),i.getView().getResolution()*this.pixelTolerance_)),o=this.rBush_.getInExtent(s),a=o.length;if(a===0)return null;let l,u=1/0,c,h=null;const d=this.pixelTolerance_*this.pixelTolerance_,f=()=>{if(l){const g=i.getPixelFromCoordinate(l);if(ki(e,g)<=d)return{vertex:l,vertexPixel:[Math.round(g[0]),Math.round(g[1])],feature:c,segment:h}}return null};if(this.vertex_){for(let p=0;p<a;++p){const _=o[p];_.feature.getGeometry().getType()!=="Circle"&&_.segment.forEach(m=>{const b=Ue(m),y=ki(r,b);y<u&&(l=m,u=y,c=_.feature)})}const g=f();if(g)return g}if(this.edge_){for(let p=0;p<a;++p){let _=null;const m=o[p];if(m.feature.getGeometry().getType()==="Circle"){let b=m.feature.getGeometry();_=K3(r,b)}else{const[b,y]=m.segment;y&&(Ac[0]=Ue(b),Ac[1]=Ue(y),_=md(r,Ac))}if(_){const b=ki(r,_);b<u&&(l=Qr(_),h=m.feature.getGeometry().getType()==="Circle"?null:m.segment,u=b)}}const g=f();if(g)return g}return null}updateFeature_(e){this.removeFeature(e,!1),this.addFeature(e,!1)}segmentCircleGeometry_(e,t){this.getMap().getView().getProjection();const s=z4(t).getCoordinates()[0];for(let o=0,a=s.length-1;o<a;++o)e.push(s.slice(o,o+2))}segmentGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let r=0;r<i.length;++r){const s=this.GEOMETRY_SEGMENTERS_[i[r].getType()];s&&s(e,i[r])}}segmentLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length-1;r<s;++r)e.push(i.slice(r,r+2))}segmentMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length-1;a<l;++a)e.push(o.slice(a,a+2))}}segmentMultiPointGeometry_(e,t){t.getCoordinates().forEach(i=>{e.push([i])})}segmentMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length;a<l;++a){const u=o[a];for(let c=0,h=u.length-1;c<h;++c)e.push(u.slice(c,c+2))}}}segmentPointGeometry_(e,t){e.push([t.getCoordinates()])}segmentPolygonGeometry_(e,t){const i=t.getCoordinates();for(let r=0,s=i.length;r<s;++r){const o=i[r];for(let a=0,l=o.length-1;a<l;++a)e.push(o.slice(a,a+2))}}}const ot=(n,e)=>{const t=n,i=[n,...Object.values({})];return t.install=r=>{for(const s of i)r.component(s.name,s)},n},Nv=n=>n!==null&&typeof n=="object",Wr=n=>n!==null&&typeof n=="function",Kl=n=>{let e=[];return typeof n=="string"?e=n.split(","):e=n,e==null?void 0:e.map(t=>+t)},cD={fill:zi,text:$u,stroke:mr,circle:ho,icon:es,regularShape:Ca},hD=["circle","icon","regularShape"];function dD(n){const e=Nv(n)?n:{color:n};return new zi(e)}function fD(n,e,t){if(t!=null)return n?["fill"].includes(e)?dD(t):e==="text"?Nv(t)?Th(t,n):t:Th(t,n):t}function Th(n,e){const t={};return Object.entries(n).forEach(([i,r])=>{const s=cD[i];i==="font"&&(r=`${r} sans-serif`),t[hD.includes(i)?"image":i]=fD(s,i,r)}),new e(t)}function _t(n){const e=Ph(n);return typeof e=="function"?(t,i,r)=>{const s=e(t,i,r);return _t(s)}:Th(e,cn)}function df(){const n=it("EPSG:4326"),e=n.getExtent(),t=ke(e)/256,i=new Array(20),r=new Array(20);for(let s=0;s<21;++s)i[s]=t/Math.pow(2,s),r[s]=s;return{projection:n,projectionExtent:e,resolutions:i,matrixIds:r}}function io(n,e,t){const{projection:i,projectionExtent:r,resolutions:s,matrixIds:o}=t,a=Ki(r),l=new QF({origin:a,matrixIds:o,resolutions:s}),u=new c6({url:n,layer:e,matrixSet:"c",format:"tiles",version:"1.0.0",projection:i,style:"default",wrapX:!0,tileGrid:l});return new g6({source:u,opacity:1})}function Mc(n,e){const t=e.enc.Base64.stringify(n),i=new RegExp("/","g");return t.replace(/=+$/,"").replace(/\+/g,"-").replace(i,"_")}async function gD(n,e){const t={},i=JSON.stringify({alg:"HS256",typ:"JWT"}),r=JSON.stringify({key:n,exp:new Date().setHours(new Date().getHours()+1)}),s=Mc(t.enc.Utf8.parse(i),t)+"."+Mc(t.enc.Utf8.parse(r),t),o=t.HmacSHA256(s,e);return`${s}.${Mc(o,t)}`}function o0(n,e){const t=Object.entries(e).reduce((i,[r,s])=>(i.push(`${r}=${s}`),i),[]);return`${n}?${t.join("&")}`}const pD={stroke:{color:""}};function ro(n,e,t){var i;const r=new Zt({geometry:new xn(e)});n.on("prerender",s=>{const o=gv(s);s.context.globalCompositeOperation="source-over";const a=s.context;a.save(),o.drawFeature(r,_t(t??pD)),a.clip()}),n.on("postrender",s=>{s.context.restore()}),n.setExtent((i=r==null?void 0:r.getGeometry())==null?void 0:i.getExtent())}const mD=(n=[],e=[],t=[],i=0)=>{pe("tk");const r=B([]);async function s(){const o=v(n),a=v(e),l=v(t);return o.length>0&&a.length>0?(o.join(","),a.join(","),l==null||l.join(","),{}):{}}return{getData:s,coordinates:r}},Zi=n=>{const e=pe("map");return Ge(()=>{new Promise(t=>{const i=()=>{if(e!=null&&e.value)return t(n&&n(e.value));const r=setTimeout(()=>{i(),clearTimeout(r)},0)};i()})}),e};function dl(n,e,t){const i=Zi(()=>{i==null||i.value.on(n,r)}),r=s=>{e({type:n,event:s})};Tt(()=>i==null?void 0:i.value.un(n,r))}function _D(n,e,t){const i=Zi(),r=[],s=()=>{let l=!1;return u=>{const c=u.type;if(!(n!=null&&n.value)&&!(e!=null&&e.value))return;let h,d;if(i==null||i.value.forEachFeatureAtPixel(u.pixel,(f,g)=>(h=f,d=g)),e!=null&&e.value&&n!=null&&n.value)if(d===(e==null?void 0:e.value)&&h===(n==null?void 0:n.value)){l=!0;const f=h==null?void 0:h.getId(),g=h==null?void 0:h.get("data");t&&t({layer:d,feature:h,event:u,type:c,id:f,data:g})}else l&&(l=!1,t&&t({event:u,type:c}));else if(d===(e==null?void 0:e.value)||(e==null?void 0:e.value)instanceof Set&&e!=null&&e.value.has(d)){l=!0;const f=h==null?void 0:h.getId(),g=h==null?void 0:h.get("data");t&&t({layer:d,feature:h,event:u,type:c,id:f,data:g})}else l&&(l=!1,t&&t({event:u,type:c}))}};Tt(()=>{r.forEach(l=>{i==null||i.value.un(l.type,s)})});function o(l){const u=s();r.push({type:l,event:u}),i==null||i.value.on(l,u)}function a(l){l&&(t=l),["singleclick","dblclick","pointermove"].forEach(u=>o(u))}return{on:o,createOnAll:a,layerRef:e,featureRef:n}}function ni(){let n=!1;const e=Xt(),t=Xt(),i=Xt();let r;const s=g=>r=g,o=pe("selectSet"),a=pe("layer"),l=pe("olayers"),{createOnAll:u,on:c}=_D(i,e),h=(g,p)=>{a!=null&&a.value||(i.value=p||void 0,u(({layer:_,feature:m,event:b,type:y,id:x,data:E})=>{g&&g(y,{layer:_,feature:m,event:b,type:y,id:x,data:E})}))},d=(g=!0)=>{var p,_,m;return l!=null&&l.value?(e.value=l.value,{layer:l,source:Xt((p=l==null?void 0:l.value)==null?void 0:p.getSource())}):a!=null&&a.value?(e.value=a.value,{layer:a,source:Xt((_=a==null?void 0:a.value)==null?void 0:_.getSource())}):(n=!0,e.value=new Ra,t.value=new ds,g&&e.value.setSource(t.value),(m=o==null?void 0:o.value)==null||m.add(e.value),{layer:e,source:t})},f=Zi(g=>{var p;r&&r(g),!(a!=null&&a.value)&&!l&&e!=null&&e.value&&((p=f==null?void 0:f.value)==null||p.addLayer(e.value))});return Tt(()=>{var g;n&&((g=t.value)==null||g.clear(),!(a!=null&&a.value)&&!l&&e!=null&&e.value&&(f==null||f.value.removeLayer(e.value)),o!=null&&o.value&&o.value.delete(e.value))}),{map:f,onMapMounted:s,createLayer:d,onAll:h,layerGroup:a,on:c}}const $v=F({props:{tk:{type:String},clipCoordinates:{type:Array},clipStyle:Object},name:"OLayerImg",setup(n){const e=df(),t=pe("tk");let i,r;const s=Zi(()=>{const o=n.tk??t,a=s==null?void 0:s.value.getLayers(),l=a==null?void 0:a.getArray();i=l==null?void 0:l.find(u=>{var c,h;return((h=(c=u==null?void 0:u.sourceChangeKey_)==null?void 0:c.target)==null?void 0:h.layer_)==="img"}),r=l==null?void 0:l.find(u=>{var c,h;return((h=(c=u==null?void 0:u.sourceChangeKey_)==null?void 0:c.target)==null?void 0:h.layer_)==="cia"}),i?(i==null||i.setVisible(!0),r==null||r.setVisible(!0)):(i=io(`http://t${Math.round(Math.random()*7)}.tianditu.gov.cn/img_c/wmts?tk=${o}`,"img",e),r=io(`http://t${Math.round(Math.random()*7)}.tianditu.gov.cn/cia_c/wmts?tk=${o}`,"cia",e),a==null||a.insertAt(0,i),a==null||a.insertAt(1,r),a&&(s==null||s.value.setLayers(a)),n.clipCoordinates&&ro(i,n.clipCoordinates,n.clipStyle),n.clipCoordinates&&ro(r,n.clipCoordinates,n.clipStyle))});Tt(()=>{i==null||i.setVisible(!1),r==null||r.setVisible(!1)})}}),vD=F({name:"OMap",props:{id:{type:String,default:"olmap"},width:{type:String,default:"100%"},height:{type:String,default:"100%"},minZoom:{type:Number,default:1},maxZoom:{type:Number,default:18},zoom:{type:Number,default:10},center:{type:Array,default:()=>[120.25664,29.153607]},projection:{type:String,default:"EPSG:4326"},options:{type:Object,default:()=>({})},tk:{type:String}},emits:["initMap"],setup(n,{slots:e,emit:t}){const{height:i,width:r,id:s,minZoom:o,maxZoom:a,zoom:l,center:u,projection:c}=n,h=n.tk??pe("tk"),d=B(),f=Xt();st("map",f),st("tk",h),Ge(()=>p());const g=_=>{var m,b;const y=(m=f==null?void 0:f.value)==null?void 0:m.getEventPixel(_.originalEvent);((b=f==null?void 0:f.value)==null?void 0:b.forEachFeatureAtPixel(y,x=>x))==null?f.value&&(f.value.getTargetElement().style.cursor="auto"):f.value&&(f.value.getTargetElement().style.cursor="pointer")};function p(){const _=new Hn({minZoom:o,maxZoom:a,zoom:l,center:u,projection:c});f.value=new B_({layers:[],target:d.value,view:_,controls:Gd({zoom:!1,attribution:!1,rotate:!1})}),t("initMap",f.value),f==null||f.value.on("pointermove",g)}return Tt(()=>{var _,m;(_=f==null?void 0:f.value)==null||_.un("pointermove",g),(m=f==null?void 0:f.value)==null||m.dispose()}),()=>z("div",{id:s,style:{height:i,width:r},ref:d},[e.layer?e==null?void 0:e.layer():z($v,null,null),e.default&&e.default()])}}),yD=F({props:{tk:{type:String},clipCoordinates:{type:Array},clipStyle:Object},name:"OLayerVec",setup(n){const e=df(),t=pe("tk");let i,r;const s=Zi(()=>{const o=n.tk??t,a=s==null?void 0:s.value.getLayers(),l=a==null?void 0:a.getArray();i=l==null?void 0:l.find(u=>{var c,h;return((h=(c=u==null?void 0:u.sourceChangeKey_)==null?void 0:c.target)==null?void 0:h.layer_)==="vec"}),r=l==null?void 0:l.find(u=>{var c,h;return((h=(c=u==null?void 0:u.sourceChangeKey_)==null?void 0:c.target)==null?void 0:h.layer_)==="cva"}),i?(i==null||i.setVisible(!0),r==null||r.setVisible(!0)):(i=io(`http://t${Math.round(Math.random()*7)}.tianditu.gov.cn/vec_c/wmts?tk=${o}`,"vec",e),r=io(`http://t${Math.round(Math.random()*7)}.tianditu.gov.cn/cva_c/wmts?tk=${o}`,"cva",e),a==null||a.insertAt(0,i),a==null||a.insertAt(1,r),a&&(s==null||s.value.setLayers(a)),n.clipCoordinates&&ro(i,n.clipCoordinates,n.clipStyle),n.clipCoordinates&&ro(r,n.clipCoordinates,n.clipStyle))});Tt(()=>{i==null||i.setVisible(!1),r==null||r.setVisible(!1)})}}),bD=F({props:{ak:{type:String,required:!0},sk:{type:String,required:!0},clipCoordinates:{type:Array},clipStyle:Object,baseURL:{type:String,default:"https://ibcdsg.zj.gov.cn:8443/"}},name:"OLayerZjvmap",setup(n){const e=df();let t,i;const r=Zi(async function(){const{ak:s,sk:o,baseURL:a}=n,l=r==null?void 0:r.value.getLayers(),u=l==null?void 0:l.getArray();if(t=u==null?void 0:u.find(c=>{var h,d;return((d=(h=c==null?void 0:c.sourceChangeKey_)==null?void 0:h.target)==null?void 0:d.layer_)==="zjvmap"}),i=u==null?void 0:u.find(c=>{var h,d;return((d=(h=c==null?void 0:c.sourceChangeKey_)==null?void 0:h.target)==null?void 0:d.layer_)==="zjvmap_lab"}),t)t==null||t.setVisible(!0),i==null||i.setVisible(!0);else{const c=await gD(s,o),h=o0(a+"/restapi/prod/IC33000020220811000009/mapserver/vmap/WMTS/1.0/zjvmap/tdt_kejiganyangshi_2017",{jwt:c,"x-bg-auth-type":"jwt_auth"}),d=o0(a+"/restapi/prod/IC33000020220811000011/mapserver/label/WMTS/1.0/zjvmap/tdt_kejiganyangshi_2017",{jwt:c,"x-bg-auth-type":"jwt_auth"});t=io(h,"zjvmap",e),i=io(d,"zjvmap_lab",e),l==null||l.insertAt(0,t),l==null||l.insertAt(1,i),l&&(r==null||r.value.setLayers(l)),n.clipCoordinates&&ro(t,n.clipCoordinates,n.clipStyle),n.clipCoordinates&&ro(i,n.clipCoordinates,n.clipStyle)}});Tt(()=>{t==null||t.setVisible(!1),i==null||i.setVisible(!1)})}}),xD=ot(vD),ED=ot($v),wD=ot(yD),CD=ot(bD);class Bv{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const TD={PROPERTYCHANGE:"propertychange"};class SD{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function a0(){}function Gv(n){for(const e in n)delete n[e]}function RD(n){let e;for(e in n)return!1;return!e}class PD extends SD{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;const s=t?new Bv(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let u=0,c=r.length;u<c;++u)if("handleEvent"in r[u]?l=r[u].handleEvent(s):l=r[u].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let u=a[i];for(delete a[i];u--;)this.removeEventListener(i,a0);delete o[i]}return l}disposeInternal(){this.listeners_&&Gv(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const r=i.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=a0,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}}const Vv={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Yl(n,e,t,i,r){if(i&&i!==n&&(t=t.bind(i)),r){const o=t;t=function(){n.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:n,type:e,listener:t};return n.addEventListener(e,t),s}function l0(n,e,t,i){return Yl(n,e,t,i,!0)}function Sh(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Gv(n))}class ID extends PD{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Vv.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=Yl(this,e[s],t);return r}return Yl(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const r=e.length;i=new Array(r);for(let s=0;s<r;++s)i[s]=l0(this,e[s],t)}else i=l0(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)LD(i);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}function LD(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)Sh(n[e]);else Sh(n)}let AD=0;function MD(n){return n.ol_uid||(n.ol_uid=String(++AD))}class u0 extends Bv{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class OD extends ID{constructor(e){super(),this.on,this.once,this.un,MD(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new u0(i,e,t)),i=TD.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new u0(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const r=this.values_||(this.values_={});if(i)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],RD(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}function FD(n,e){if(!n)throw new Error(e)}let xr=class zv extends OD{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new zv(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Sh(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yl(e,Vv.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?kD(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function kD(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(FD(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}const DD=F({props:{position:{type:Array,required:!0},olStyle:Object,id:[Number,String],data:Object},emits:["singleclick","pointermove","dblclick"],name:"OPoint",setup(n,{expose:e,emit:t}){const{position:i,data:r}=tn(n),s=new xr({geometry:new mt(Kl(i==null?void 0:i.value)??[])}),{onMapMounted:o,createLayer:a,onAll:l}=ni(),{layer:u,source:c}=a();o(()=>{var h;(h=c.value)==null||h.addFeature(s),l(t)}),Ui(()=>{var h;i!=null&&i.value&&((h=s==null?void 0:s.getGeometry())==null||h.setCoordinates(Kl(i.value))),r!=null&&r.value&&(s==null||s.set("data",(r==null?void 0:r.value)??{})),n.id!==void 0&&s.setId(n.id),s.changed()}),ee(()=>n.olStyle,()=>n.olStyle&&s.setStyle(_t(n.olStyle)),{deep:!0,immediate:!0}),Tt(()=>{s&&c.value.removeFeature(s)}),e({layer:u,point:s})}}),ND=F({props:{olStyle:{type:Object,required:!0}},name:"OPointGroup",setup(n,{slots:e,expose:t,emit:i}){var r;const{olStyle:s}=tn(n),{createLayer:o,onAll:a,onMapMounted:l}=ni(),{layer:u}=o();st("layer",u),l(()=>a(i));const c=s.value?_t(s.value):void 0;return(r=u==null?void 0:u.value)==null||r.setStyle(h=>{let d;const f=h==null?void 0:h.get("text");return f?(d=s.value?_t(s.value):s,d==null||d.getText().setText(f)):d=c,d}),t({layer:u}),()=>z("template",null,[(e==null?void 0:e.default)&&(e==null?void 0:e.default())])}}),jv=ot(DD),$D=ot(ND),BD=()=>({positioning:{type:String,default:"center-center"},openMove:{type:Boolean,default:!1},position:{type:Array,required:!0},offset:Array,stopEvent:{type:Boolean,default:!0},autoPan:{type:Object,default:()=>({animation:{duration:250}})}}),ff=F({props:BD(),name:"OHtml",setup(n,{slots:e}){const{position:t,positioning:i,offset:r,stopEvent:s,openMove:o,autoPan:a}=tn(n),l=f=>{c==null||c.setPosition(f==null?void 0:f.coordinate)},u=Zi(()=>{d(),o.value&&(u==null||u.value.on("pointermove",l))});let c;const h=B(),d=()=>{var f;c=new G_({element:h.value,positioning:i.value,position:(f=t==null?void 0:t.value)!=null&&f.length?Kl(t.value):void 0,offset:r.value,stopEvent:s.value,autoPan:a.value}),u==null||u.value.addOverlay(c)};return Ui(()=>{var f;(f=t.value)!=null&&f[0]?c==null||c.setPosition(Kl(t.value)):c==null||c.setPosition(void 0),i!=null&&i.value&&(c==null||c.setPositioning(i.value)),r!=null&&r.value&&(c==null||c.setOffset(r==null?void 0:r.value))}),Tt(()=>{c&&(u==null||u.value.removeOverlay(c)),u==null||u.value.un("pointermove",l)}),()=>z("div",{ref:h},[e.default?e==null?void 0:e.default():""])}}),GD=ot(ff),VD="data:image/svg+xml,%3csvg%20t='1700140489777'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2267'%20width='32'%20height='32'%3e%3cpath%20d='M908.75947268%20478.83040365l-650.62529297-323.25029297c-4.27939453-2.20166016-9.33837891-3.49365234-14.69794922-3.4998047l-2.80195312%200-0.74970705%200.12480469-0.62490233%200-1.12587892%200.1248047-0.37529295-1e-8-1.50029298%200.50009766c-3.97529297%200.71103516-7.50058594%202.24208984-10.53544921%204.41386718l1.16015625-0.91406249c-4.55537109%202.40996094-8.30830078%205.7796875-11.09619142%209.86220702l5.09589845-5.73749999-1.125%201.125-0.37529298%200.24960938-0.87539062%200.87539062-0.37529296%200.50009765c-0.64511719%200.60820313-1.13818359%201.36845703-1.42119141%202.22539063l0.04658203-0.72685548-0.50009765%200.62490236-0.62490235%200.87539062-0.37529298%200.50009766-0.87539061%201.125-0.12480469%200.24960936c-0.78574219%201.08632812-1.35087891%202.38447266-1.603125%203.79160158l0.72773437-2.16738282c-2.18496094%203.37060547-3.63339844%207.40742187-4.02626954%2011.75009766l0.52646486-3.62548829c-1.02744141%203.07529297-1.64091796%206.61904297-1.6866211%2010.29902344l0.06152344%204.45166016%200.12392577%201.37460938%200%200.12392576c0.89912109%205.78671875%202.94257812%2010.96435547%205.90009766%2015.49160158l-0.14941405-0.74179688%20192.25019531%20303.00029297-193.87529298%20305.99912109c-1.08544922%201.63828126-1.85273438%203.58242188-2.16474609%205.67509766l0.66533205-2.55058593-0.74970705%202.25-0.37529296%200.74970702-0.62490235%202.37480469-0.12480469%200.87539063-0.50009765%202.12519532%201e-8%200.62490234c-0.15996095%200.86660156-0.25224609%201.86591797-0.25576173%202.88632812l0.00527344%203.11396484c0%202.87490234%200.37529296%205.87460938%201.24980469%208.74951173l-1e-8%200.37529297c0.94746094%202.79228516%201.57236328%206.02050781%201.73935548%209.36914061l-0.73916016-6.24374999c1.19794922%203.62373047%203.0928711%206.73242188%205.54326172%209.30937499l-3.04277345-3.81005859c2.87050781%205.10292969%206.53291016%209.4078125%2010.87294924%2012.90498048l-8.62207032-9.40429689%201.00019531%201.37460939%201.99951172%202.49960936%200.24960936%200.12480468%201.37460939%201.50029298c0.37529296%200%200.50009766%200.12480469%200.74970703%200.37529298%201.69892578%201.64619141%203.76875%202.91884766%206.07236328%203.67734374l-3.94716798-1.80175781%200.87539064%200.62490234%200.50009765%200.37529298%200.74970703%200.24960936%202.00039062%201.2498047%200.1239258%200c0.93427734%200.73037109%202.08037109%201.23222656%203.33193357%201.40273437l-1.08105468-0.15292968c2.68857422%201.31835938%205.82451172%202.19111327%209.13623047%202.42666015-2.34140625-0.03339844-0.12919922%200.35507812%202.16914063%200.39375l-1.18125001%200.05361327%202.3748047%200.1248047%200.62490234%200%201.74990235-0.12480469%200.62490234-1e-8%202.00039062-0.12480468%201.00019531-0.12480469%201.87470704-0.37529297%200.87539062-0.12480468c0.74970703-0.24960937%201.24980469-0.50009766%201.87470703-0.50009766l0.62490234-0.24960938c1.01953125-0.16611328%201.92568359-0.55722655%202.6982422-1.12060546l-0.196875%200.24521484c4.57558594-2.27021484%209.89560547-3.88125%2015.50566406-4.53955079l637.49443359-319.83574217c11.96191406-6.15761719%2020.00302734-18.41923828%2020.00302736-32.55908203%200-0.15380859-0.00087891-0.31025391-0.00263673-0.4640625%200.00439453-0.17050781%200.00615234-0.40166016%200.00615234-0.63281251%200-14.0493164-7.99189453-26.23095703-19.67783204-32.24882812z'%20fill='%23409eff'%20p-id='2268'%3e%3c/path%3e%3c/svg%3e",Wv={arrowAnchor:{type:Array,default:()=>[.75,.5]},coordinates:{type:Array,default:[]},olStyle:Object,arrow:{type:[Boolean,String],default:()=>!1}},zD=F({name:"OLine",props:Wv,setup(n,{expose:e,emit:t}){const{coordinates:i,olStyle:r,arrow:s,arrowAnchor:o}=tn(n),{onMapMounted:a,createLayer:l,onAll:u}=ni(),{source:c,layer:h}=l();h.value.setStyle(()=>{var g,p;const _=[_t(r.value)];if(((g=i==null?void 0:i.value)==null?void 0:g.length)>=2&&s!=null&&s.value){const m=(p=i==null?void 0:i.value)==null?void 0:p.length,b=i.value[m-2],y=i.value[m-1];_.push(f(b,y))}return _});const d=new xr({geometry:new In(i.value)});c.value.addFeature(d),a(()=>u(t)),Ui(()=>{var g;i.value&&((g=d==null?void 0:d.getGeometry())==null||g.setCoordinates(i.value))});function f(g,p){const _=p[0]-g[0],m=p[1]-g[1],b=Math.atan2(m,_);return _t({geometry:new mt(p),icon:{src:(s==null?void 0:s.value)===!0?VD:s==null?void 0:s.value,anchor:o==null?void 0:o.value,rotateWithView:!0,rotation:-b}})}e({FeatureLine:d})}}),jD=ot(zD),WD=F({name:"OPolygon",props:{coordinates:{type:Array,required:!0},olStyle:Object,id:[Number,String],data:Object},setup(n,{expose:e,emit:t}){const{coordinates:i}=tn(n),{createLayer:r,onAll:s,onMapMounted:o}=ni(),a=new xr({geometry:new xn(i.value??[])}),{source:l,layer:u}=r();o(()=>s(t,a)),Ui(()=>{var c;n.id!==void 0&&a.setId(n.id),a.set("data",n.data??{}),i.value&&((c=a==null?void 0:a.getGeometry())==null||c.setCoordinates(i.value)),a.changed()}),ee(()=>n.olStyle,()=>n.olStyle&&a.setStyle(_t(n.olStyle)),{deep:!0,immediate:!0}),l.value.addFeature(a),e({layer:u})}}),UD=ot(WD),c0={id:"id",distance:20,minDistance:0,allZoom:0},HD=F({name:"OCluster",props:{clusterStyle:{type:Object,required:!0},olStyle:{type:Object,required:!0},data:{type:Object,required:!0},props:{type:Object,default:()=>c0},fit:{type:Object,default:()=>({duration:400,padding:[0,100,0,100]})}},setup(n,{expose:e,emit:t}){const{fit:i}=tn(n),{map:r,onMapMounted:s,createLayer:o}=ni(),{layer:a,source:l}=o(!1),u=n.olStyle?_t(n.olStyle):void 0,c=n.olStyle?_t(n.clusterStyle):void 0,{distance:h,minDistance:d,id:f,allZoom:g}={...c0,...n.props??{}},p=new Lk({source:l.value,distance:h,minDistance:d});a.value.setSource(p),a.value.setStyle(b=>{const y=b.get("features");if(y.length===1){const x=y[0];return Wr(u)?u(x):u}return Wr(c)?c(y):c}),s(()=>{_()}),ee(()=>n.data,()=>{_()},{deep:!1});const _=()=>{const b=[];l.value.clear();for(let y=0;y<n.data.length;y++){const x=n.data[y],E=new xr({geometry:new mt(x.position)});E==null||E.set("data",x),x!=null&&x[f]&&(E==null||E.setId(x==null?void 0:x[f])),b.push(E)}l.value.addFeatures(b)},m=()=>{let b=!1;return async function({event:y,type:x}){var E;const C=await a.value.getFeatures(y.pixel),S=(E=C==null?void 0:C[0])==null?void 0:E.get("features");if((C==null?void 0:C.length)>0&&(S==null?void 0:S.length)>1){if(b=!0,x==="singleclick"){const P=zt();S.forEach(Y=>gd(P,Y.getGeometry().getExtent()));const D=r==null?void 0:r.value.getView(),N=r==null?void 0:r.value.getView().getResolution();if(D.getZoom()===D.getMaxZoom()||ke(P)<N&&fn(P)<N)return 0;D.fit(P,{...i.value})}t(x,{features:S,event:y,layer:a.value})}else if((S==null?void 0:S.length)===1){b=!0;const P=S[0],D=P.getId(),N=P.get("data");t(x,{id:D,data:N,features:S,layer:a.value,event:y})}else b&&(t(x,{event:y,layer:a.value}),b=!1)}};dl("singleclick",m()),dl("pointermove",m()),dl("dblclick",m()),dl("moveend",()=>{const b=(r==null?void 0:r.value.getView().getZoom())??0;let y=h;g&&b>=g&&(y=0),p.setDistance(y)}),e({layer:a,source:l,cluster:p})}}),XD=ot(HD),KD={types:{type:String,default:"Zoom"},typeObject:{type:Object,default:()=>{}}};function YD(n,e){const t=n.split(","),i=[];return t.forEach(r=>{const s=bp==null?void 0:bp[r];s&&i.push(new s((e==null?void 0:e[r])??{}))}),i}function ZD(n,e){n.forEach(t=>e==null?void 0:e.value.addControl(t))}function qD(n,e){n.map(t=>t&&(e==null?void 0:e.value.removeControl(t)))}const JD=F({name:"OControl",props:KD,setup(n,{slots:e,emit:t}){const i=YD(n.types,n.typeObject),r=Zi(()=>{r&&ZD(i,r),t("onReady",{x:i,map:r})});return r&&Tt(()=>qD(i,r)),()=>z("div",{ref:n.types},[e.default&&e.default({})])}}),QD=ot(JD),e9={name:"Style",stroke:{name:"Stroke",color:"#28BBF1",width:2}},t9={features:{type:Object},url:{type:String},olStyle:{type:Object,default:()=>e9},single:{type:Boolean,default:!1}};function h0(n){return new ds({features:n??null,format:new Fv})}function n9(n,{features:e,olStyle:t,single:i}){const r=new Fv().readFeatures(e);if(!r)return;const s=new Ra({source:i?new ds:h0(r),style:_t(t)});return n==null||n.addLayer(s),i?i9(n,s,h0(r)):s}function i9(n,e,t){var i;const r=t.getFeatures()[0],s=r9(r.getGeometry()),o=new xr({geometry:s});return(i=e==null?void 0:e.getSource())==null||i.addFeature(o),e}function r9(n){const e=ea([-180,-90,180,90]);return(n==null?void 0:n.getCoordinates()).forEach(t=>{const i=new Js(t[0]);e.appendLinearRing(i)}),e}const s9=F({props:t9,name:"OGeoJson",setup(n,{slots:e}){let t={};const i=Zi(r=>n.features&&(t=n9(r,n)));return t&&Tt(()=>i==null?void 0:i.value.removeLayer(t)),()=>z("template",null,[e.default&&e.default({})])}}),o9=ot(s9),a9=F({name:"OSelect",setup(n,{slots:e}){const t=Xt(new Set);return st("selectSet",t),()=>(e==null?void 0:e.default)&&e.default()}}),l9={singleClick:jd,pointerMove:dI,doubleClick:fI},u9=F({name:"OSelectItem",props:{checkStyle:{type:Object},type:{type:String,default:"singleClick"}},setup(n,{expose:e,slots:t,emit:i}){const{type:r}=n,{map:s,onMapMounted:o}=ni(),a=pe("selectSet"),l=n.checkStyle?_t(n.checkStyle):void 0,u=(m,b)=>{const y=m==null?void 0:m.get("features");return y?Wr(l)?l(y[0],b):l:Wr(l)?l(m,b):l},c=new hf({condition:l9[r],filter:(m,b)=>{if(!(a!=null&&a.value.has(b)))return!1;const y=m==null?void 0:m.get("features");return y?(y==null?void 0:y.length)===1:!0},style:l?u:null}),h=B([]),d=B(!1),f=B([]),g=B([]),p=B({}),_=m=>{i("select",m)};return c.on("select",_),o(()=>{s==null||s.value.addInteraction(c)}),e({select:c}),Tt(()=>{c==null||c.un("select",_),s!=null&&s.value&&(s==null||s.value.removeInteraction(c))}),()=>z("template",null,[(t==null?void 0:t.default)&&(t==null?void 0:t.default({featureCoordinate:h,show:d,featureCenter:f,coordinate:g,featureData:p}))])}}),c9=ot(a9),h9=ot(u9),d9={fill:{color:"rgba(255, 255, 255, 0.2)"},stroke:{color:"#409eff",width:5},circle:{radius:7,fill:{color:"#409eff"}}},f9={type:{type:String,default:"Polygon"},olStyle:{type:Object,default:()=>d9},hand:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},g9=F({name:"ODraw",props:f9,setup(n,{expose:e,emit:t}){const{olStyle:i,type:r}=tn(n),{map:s,onMapMounted:o,createLayer:a}=ni(),{source:l,layer:u}=a();let c;const h=new uD({source:l.value}),d=Xt(),f=B(void 0),g=B(!1);ee(r,()=>{n.hand||(p(),P())});const p=()=>{_(),d.value=new tD({source:l.value,type:r==null?void 0:r.value,style:_t(i.value),...n.options}),s==null||s.value.addInteraction(d.value),K()},_=()=>{d.value&&(d.value.un("drawstart",N),d.value.un("drawend",Y),d.value.dispose(),d.value.finishDrawing(),s==null||s.value.removeInteraction(d.value),d.value=void 0),D()},m=()=>{var G;(G=l.value)==null||G.clear()},b=()=>{d.value&&d.value.removeLastPoint()},y=G=>{t("modifystart",G)},x=G=>{t("modifyend",G)},E=()=>{var G;return(G=l.value)==null?void 0:G.getFeatures()},C=G=>{var ie;(ie=l.value)==null||ie.removeFeature(G)},S=G=>{const ie=[].concat(G);l.value.addFeatures(ie)},P=()=>{D(),c=new rD({...n.options,source:l.value,style:_t(i.value)}),c.on("modifystart",y),c.on("modifyend",x),s==null||s.value.addInteraction(c)},D=()=>{c&&(c.un("modifystart",y),c.un("modifyend",x),c&&(s==null||s.value.removeInteraction(c)),c=void 0)},N=G=>{["Circle","Point"].indexOf(r.value)===-1&&(g.value=!0),t("drawstart",G)},Y=G=>{g.value=!1,t("drawend",G)},K=()=>{d.value&&d.value.on("drawstart",N),d.value&&d.value.on("drawend",Y)};return o(()=>{var G;(G=u.value)==null||G.setStyle(_t(i.value)),s==null||s.value.addInteraction(h),n.hand||(p(),P()),u.value.setZIndex(s==null?void 0:s.value.getLayers().getArray().length),t("ready")}),Tt(()=>{c&&(s==null||s.value.removeInteraction(c)),d.value&&d.value.finishDrawing(),d.value&&(s==null||s.value.removeInteraction(d.value)),h&&(s==null||s.value.removeInteraction(h))}),e({onDraw:p,onFinish:_,onUnModify:D,onRemoveLastPoint:b,onModify:P,onClear:m,getFeatures:E,removeFeature:C,addFeature:S,layer:u,source:l}),()=>Et(z(ff,{position:f.value,autoPan:!1,openMove:!0,positioning:"top-left",offset:[0,20]},{default:()=>[z("div",{class:"omap-overlay-text-container"},[Lt("单机执行下一个点，双击完成绘制")])]}),[[vn,d.value&&g.value]])}}),p9=ot(g9),m9=F({props:{olStyle:{type:Object,required:!0}},name:"OLayer",setup(n,{slots:e,expose:t,emit:i}){var r;const{olStyle:s}=tn(n),{createLayer:o,onAll:a,onMapMounted:l}=ni(),{layer:u,source:c}=o();st("olayers",u),l(()=>a(i));const h=s.value?_t(s.value):void 0;return(r=u==null?void 0:u.value)==null||r.setStyle(h),ee(()=>n.olStyle,()=>{var d;return n.olStyle&&((d=u==null?void 0:u.value)==null?void 0:d.setStyle(_t(n.olStyle)))},{deep:!0,immediate:!0}),t({layer:u,source:c}),()=>z("template",null,[(e==null?void 0:e.default)&&(e==null?void 0:e.default())])}}),Uv=ot(m9),_9=n=>(kn("data-v-7650c2ac"),n=n(),Dn(),n),v9={class:"opopup"},y9=_9(()=>I("div",{class:"opopup__arrow"},null,-1)),b9={class:"opopup-header"},x9={class:"opopup-content"},E9=F({name:"OPopup",__name:"popup",props:{title:{},modelValue:{},width:{default:"100px"},positioning:{default:"bottom-center"}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=T({get:()=>t.modelValue,set:s=>i("update:modelValue",s)});return(s,o)=>(w(),X(v(ff),Bt(s.$attrs,{style:{width:s.width},position:r.value,positioning:s.positioning}),{default:O(()=>[I("div",v9,[y9,I("div",b9,[I("span",null,se(t.title),1),I("div",{class:"opopup-close",onClick:o[0]||(o[0]=a=>r.value=void 0)})]),I("div",x9,[L(s.$slots,"default",{},void 0,!0)])])]),_:3},16,["style","position","positioning"]))}}),Hv=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},w9=Hv(E9,[["__scopeId","data-v-7650c2ac"]]),C9=ot(w9),T9={position:"position",weight:"weight"},S9={data:{type:Array,default:()=>[]},opacity:{type:Number,default:1},zIndex:Number,minResolution:Number,maxResolution:Number,minZoom:Number,maxZoom:Number,gradient:{type:Array,default:()=>["#00f","#0ff","#0f0","#ff0","#f00"]},radius:{type:Number,default:8},blur:{type:Number,default:15},weightFun:{type:Function},options:{type:Object,default:()=>({...T9})}},R9=F({props:S9,name:"OHeatmap",setup(n,{slots:e,expose:t}){const{onMapMounted:i,map:r}=ni(),{position:s,weight:o}=n.options,a=new ds,l=h=>{const d=h.get("data");return n.weightFun?n.weightFun(d):h.get("data")[o]??1};ee(n.data,()=>c());const u=new Pk({...n,source:a,weight:l});i(()=>{var h;c(),(h=r==null?void 0:r.value)==null||h.addLayer(u)});const c=()=>{const h=[];a.clear();for(let d=0;d<n.data.length;d++){const f=n.data[d],g=new xr({geometry:new mt(f[s])});g==null||g.set("data",f),h.push(g)}a.addFeatures(h)};return Tt(()=>{u&&(r==null||r.value.removeLayer(u))}),t({heatmap:u,source:a}),()=>z("template",null,[(e==null?void 0:e.default)&&(e==null?void 0:e.default())])}}),P9=ot(R9),Xv={loop:{type:Boolean,default:!0},arrowWidth:{type:Number,default:5},showDir:{type:Boolean,default:!1},tStyle:{olStyle:Object,default(){return{circle:{fill:"red",radius:10}}}},speed:{type:Number,default:100},play:{type:Boolean,default:!0},...Wv},d0="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1638325130878'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='2942'%20width='32'%20height='32'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M723.617792%20522.446848%20461.110272%20239.74912%20339.95264%20239.74912%20602.46016%20522.446848%20339.95264%20784.945152l121.157632%200L723.617792%20522.446848z'%20p-id='2943'%20fill='%23ffffff'%3e%3c/path%3e%3c/svg%3e",I9=F({name:"OTrajectory",props:Xv,setup(n){const e=new In(n.coordinates??[]),t=new xr({geometry:e});ee(()=>n.play,()=>y()),ee(()=>n.coordinates,()=>{e.setCoordinates(n.coordinates??[]),t==null||t.changed(),h.setCoordinates(c.value),y(),He(()=>{s==null||s.value.getView().fit(e,{padding:[50,50,50,50],duration:2e3})})});const{speed:i}=n,r=n.tStyle?_t(n.olStyle):void 0;t.setStyle(()=>[Wr(r)?r(t):r,...x()]);const{map:s,onMapMounted:o,createLayer:a}=ni(),{layer:l,source:u}=a(),c=T(()=>{var E;return((E=n.coordinates)==null?void 0:E[0])??[]}),h=new mt(c.value);let d=0,f;const g=new xr({type:"geoMarker",geometry:h}),p=n.tStyle?_t(n.tStyle):void 0,_=E=>Wr(p)?(C,S)=>p(C,S,E):p;g.setStyle(_());function m(E,C){if(E!=null&&E.length&&C!=null&&C.length){const S=E[0]-C[0],P=E[1]-C[1];return Math.atan2(P,S)}return 0}function b(E){if(!n.loop&&d>.999||!n.coordinates.length)return;const C=E.frameState.time,S=C-f;d=(d+i*S/1e6)%1,f=C;const P=t.getGeometry(),D=P==null?void 0:P.getCoordinateAt(d),N=P==null?void 0:P.getCoordinateAt(Math.min(d+1e-4,1)),Y=m(D,N),K=gv(E),G=_(Y),ie=Wr(G)?G(g):G,A=ie.getImage();g.setStyle(_(Y)),h.setCoordinates(D??[]),K.setStyle(ie),A&&K.setImageStyle(A),K.drawGeometry(h),s==null||s.value.render()}function y(){var E;n.play?(f=Date.now(),l.value.on("postrender",b),s==null||s.value.render(),g.setGeometry(void 0)):(g.setGeometry(h),(E=l.value)==null||E.un("postrender",b))}o(()=>{var E;(E=u.value)==null||E.addFeatures([g,t]),y()});function x(){if(!n.showDir)return[];const E=[],C=n.coordinates,S=40;let P=S/2,D=(s==null?void 0:s.value.getPixelFromCoordinate(c.value))??[],N;for(let Y=1;Y<C.length;Y++){let K,G,ie;N=(s==null?void 0:s.value.getPixelFromCoordinate(C[Y]))??[];const A=Math.sqrt(Math.pow(D[0]-N[0],2)+Math.pow(D[1]-N[1],2));A>P?(G=[P*(N[0]-D[0])/A+D[0],P*(N[1]-D[1])/A+D[1]],K=s==null?void 0:s.value.getCoordinateFromPixel(G),ie=new cn({geometry:new mt(K),image:new es({src:d0,rotateWithView:!0,rotation:Math.atan2(N[1]-D[1],N[0]-D[0]),scale:n.arrowWidth/12})}),D=G,P=S,Y--):A==P?(ie=new cn({geometry:new mt(C[Y]),image:new es({src:d0,rotateWithView:!0,rotation:Math.atan2(N[1]-D[1],N[0]-D[0]),scale:n.arrowWidth/12})}),D=N,P=S):(P=P-A,D=N),ie&&E.push(ie)}return E}}}),Kv=ot(I9),L9={orig:{type:Array,required:!0,default:[]},dest:{type:Array,required:!0,default:[]},mid:{type:Array},routeType:{type:Number,default:0},...Xv},A9=F({name:"ODrive",props:L9,setup(n,{expose:e}){const{orig:t,dest:i}=tn(n),{getData:r,coordinates:s}=mD(t,i);return e({getData:r}),()=>z("template",null,[z(Kv,Bt(n,{coordinates:s.value}),null)])}}),M9=ot(A9),O9={icon:{src:"",scale:1.2}},F9=F({name:"OSearch",__name:"search",props:{modelValue:{},olStyle:{default:O9},options:{default:{queryType:1,start:0,count:100,level:12,mapBound:"-180,-90,180,90"}}},emits:["update:modelValue","search","select"],setup(n,{emit:e}){const t=n,i=e;T({get:()=>t.modelValue,set:s=>i("update:modelValue",s)}),B(1),pe("tk");const r=B();return ni(),(s,o)=>(w(),R("div",null,[z(v(Uv),{"ol-style":s.olStyle},{default:O(()=>[(w(!0),R(Pe,null,Ct(r.value,(a,l)=>(w(),X(v(jv),{key:a,id:l,position:a.lonlat,data:a},null,8,["id","position","data"]))),128))]),_:1},8,["ol-style"])]))}}),k9=Hv(F9,[["__scopeId","data-v-a2f7b9f3"]]),D9=ot(k9),Oc=Object.freeze(Object.defineProperty({__proto__:null,OCluster:XD,OControl:QD,ODraw:p9,ODrive:M9,OGeoJson:o9,OHeatmap:P9,OHtml:GD,OLayer:Uv,OLayerImg:ED,OLayerVec:wD,OLayerZjvmap:CD,OLine:jD,OMap:xD,OPoint:jv,OPointGroup:$D,OPolygon:UD,OPopup:C9,OSearch:D9,OSelect:c9,OSelectItem:h9,OTrajectory:Kv},Symbol.toStringTag,{value:"Module"})),N9={install(n,e){var t,i;for(const r in Oc){const s=r;Object.prototype.hasOwnProperty.call(Oc,r)&&((i=(t=Oc[s]).install)==null||i.call(t,n))}if(e)for(const r in e)n.provide(r,e[r])}},Yv=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},$9={},B9={t:"1596458734865",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4898","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"14",height:"14"},G9=I("path",{d:"M68.608 962.56V206.848h740.864V962.56H68.608zM746.496 271.36H131.584v629.248h614.912V271.36zM131.584 262.144","p-id":"4899",fill:"#666"},null,-1),V9=I("path",{d:"M219.136 65.024v116.224h62.976V129.536h614.912v629.248h-60.416v61.952h123.392V65.024z","p-id":"4900",fill:"#666"},null,-1),z9=[G9,V9];function j9(n,e){return w(),R("svg",B9,z9)}const W9=Yv($9,[["render",j9]]),U9={},H9={t:"1596458647160",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2840","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"18",height:"18"},X9=I("path",{d:"M311.1 739c-6.1 0-12.2-2.3-16.8-7L69.7 507.4l224.6-224.6c9.3-9.3 24.3-9.3 33.6 0s9.3 24.3 0 33.6l-191 191 191 191c9.3 9.3 9.3 24.3 0 33.6-4.6 4.7-10.7 7-16.8 7zM711.5 739c-6.1 0-12.2-2.3-16.8-7-9.3-9.3-9.3-24.3 0-33.6l191-191-191-191c-9.3-9.3-9.3-24.3 0-33.6s24.3-9.3 33.6 0L953 507.4 728.3 732c-4.6 4.7-10.7 7-16.8 7zM418.5 814.7c-2.4 0-4.8-0.4-7.2-1.1-12.5-4-19.4-17.3-15.5-29.8l179.6-567.1c4-12.5 17.3-19.4 29.8-15.5 12.5 4 19.4 17.3 15.5 29.8L441.1 798.1a23.73 23.73 0 0 1-22.6 16.6z",fill:"#666","p-id":"2841"},null,-1),K9=[X9];function Y9(n,e){return w(),R("svg",H9,K9)}const Z9=Yv(U9,[["render",Y9]]),q9=["href"],J9=I("div",{style:{width:"16px","margin-left":"6px"}},[I("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1024 1024","xml:space":"preserve"},[I("g",null,[I("path",{d:"M1004.57 319.408l-468-312c-15.974-9.83-33.022-9.92-49.142 0l-468 312C7.428 327.406 0 341.694 0 355.978v311.998c0 14.286 7.428 28.572 19.43 36.572l468 312.044c15.974 9.83 33.022 9.92 49.142 0l468-312.044c12-7.998 19.43-22.286 19.43-36.572V355.978c-0.002-14.284-7.43-28.572-19.432-36.57zM556 126.262l344.572 229.716-153.714 102.858L556 331.406V126.262z m-88 0v205.144l-190.858 127.43-153.714-102.858L468 126.262zM88 438.264l110.286 73.714L88 585.692v-147.428z m380 459.43L123.428 667.978l153.714-102.858L468 692.55v205.144z m44-281.716l-155.43-104 155.43-104 155.43 104-155.43 104z m44 281.716V692.55l190.858-127.43 153.714 102.858L556 897.694z m380-312.002l-110.286-73.714L936 438.264v147.428z","p-id":"2793",fill:"#555"})])])],-1),Q9=[J9],eN=F({__name:"SfcPlayground",props:{content:null,importMap:null},setup(n){const e=n,t="https://sfc.vuejs.org/",i=T(()=>{const r={"App.vue":e.content};if(e.importMap)try{r["import-map.json"]=JSON.stringify({imports:e.importMap})}catch{}return`${t}#${btoa(unescape(encodeURIComponent(JSON.stringify(r))))}`});return(r,s)=>(w(),R("a",{href:v(i),style:{display:"flex","align-items":"center"},target:"_blank"},Q9,8,q9))}});function tN(n){const e=Jn({showTip:!1});function t(){navigator.clipboard.writeText(n),e.showTip=!0,setTimeout(()=>{e.showTip=!1},5*1e3)}return{...tn(e),copyCode:t}}const nN={class:"demo-slot vp-raw"},iN={class:"demo-title-desc"},rN={class:"demo-title"},sN={class:"demo-desc"},oN={class:"demo-actions"},aN={class:"demo-platforms"},lN={class:"demo-buttons"},uN={class:"demo-actions-copy"},cN={class:"demo-actions-tip"},hN=["innerHTML"],dN=F({__name:"Demo",props:{code:null,highlightedCode:null,title:null,desc:null,lang:{default:"vue"},defaultExpand:{type:Boolean,default:!1},importMap:{default:()=>({})}},setup(n){const e=n,t=T(()=>decodeURIComponent(e.code)),{showTip:i,copyCode:r}=tN(t.value),s=T(()=>decodeURIComponent(e.highlightedCode)),o=B(e.defaultExpand),a=()=>o.value=!o.value;return(l,u)=>{const c=Dt("ClientOnly");return w(),X(c,null,{default:O(()=>[I("article",Bt(l.$attrs,{class:"vitepress-demo"}),[I("div",nN,[L(l.$slots,"default")]),Et(I("div",iN,[I("span",rN,se(n.title),1),I("span",sN,se(n.desc),1)],512),[[vn,n.title||n.desc]]),I("div",oN,[I("div",aN,[z(eN,{content:v(t),importMap:n.importMap},null,8,["content","importMap"])]),I("div",lN,[I("div",uN,[Et(I("span",cN,"复制成功!",512),[[vn,v(i)]]),Et(z(W9,{onClick:v(r),title:"复制"},null,8,["onClick"]),[[vn,!v(i)]])]),z(Z9,{class:"demo-actions-expand",onClick:u[0]||(u[0]=h=>a()),title:"展开"})])]),Et(I("div",{innerHTML:v(s),class:W(`language-${n.lang} extra-class`)},null,10,hN),[[vn,o.value]])],16)]),_:3})}}}),fN=n=>(kn("data-v-935a9952"),n=n(),Dn(),n),gN={class:"card-header"},pN=fN(()=>I("div",{class:"opopup__arrow"},null,-1)),mN=F({__name:"popup",props:{title:{},position:{}},emits:["update:position"],setup(n,{emit:e}){const t=n,i=e,r=T({get:()=>t.position,set:s=>i("update:position",s)});return(s,o)=>{const a=Kt,l=fP,u=Dt("o-html");return w(),X(u,Bt(s.$attrs,{position:r.value,positioning:"bottom-center"}),{default:O(()=>[z(l,{class:"box-card"},{header:O(()=>[I("div",gN,[I("span",null,se(t.title),1),z(a,{onClick:o[0]||(o[0]=c=>r.value=void 0)},{default:O(()=>[z(v(cw))]),_:1})])]),footer:O(()=>[L(s.$slots,"footer",{},void 0,!0)]),default:O(()=>[L(s.$slots,"default",{},void 0,!0),pN]),_:3})]),_:3},16,["position"])}}}),_N=te(mN,[["__scopeId","data-v-935a9952"]]),MN={...$F,enhanceApp({app:n}){n.component("demo",dN),n.component("popup",_N),n.use(N9.install,{tk:"6e734104b4d4a24e727f6e09e36e6e66"})}};export{PN as E,MN as R,TN as a,SN as b,IN as c,xN as d,CN as e,wN as f,EN as g,bN as h,yN as i,fP as j,oO as k,xe as u,RN as v};
